<html><head><title>JSON</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw " type="text/css" href="blkbluw_.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk " type="text/css" href="whtpurk_.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng " type="text/css" href="whtgrng_.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw " type="text/css" href="grygrnw_.css" media="all" >

<script type="text/javascript" src="_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.13,
  using Pod::Simple::PullParser v3.13,
  under Perl v5.010001 at Wed Feb 27 00:00:04 2013 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#MAPPING'>MAPPING</a>
  <li class='indexItem indexItem1'><a href='#PRETY_PRINTING'>PRETY PRINTING</a>
  <li class='indexItem indexItem1'><a href='#AUTOCONVERT'>AUTOCONVERT</a>
  <li class='indexItem indexItem1'><a href='#UNMAPPING_OPTION'>UNMAPPING OPTION</a>
  <li class='indexItem indexItem1'><a href='#BARE_KEY_OPTION'>BARE KEY OPTION</a>
  <li class='indexItem indexItem1'><a href='#SINGLE_QUOTATION_OPTION'>SINGLE QUOTATION OPTION</a>
  <li class='indexItem indexItem1'><a href='#EXPORT'>EXPORT</a>
  <li class='indexItem indexItem1'><a href='#TODO'>TODO</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#ACKNOWLEDGEMENTS'>ACKNOWLEDGEMENTS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>JSON - parse and convert to JSON (JavaScript Object Notation).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre> use JSON;
 
 $obj = {
    id   =&#62; [&#34;foo&#34;, &#34;bar&#34;, { aa =&#62; &#39;bb&#39;}],
    hoge =&#62; &#39;boge&#39;
 };
 
 $js  = objToJson($obj);
 # this is {&#34;id&#34;:[&#34;foo&#34;,&#34;bar&#34;,{&#34;aa&#34;:&#34;bb&#34;}],&#34;hoge&#34;:&#34;boge&#34;}.
 $obj = jsonToObj($js);
 # the data structure was restored.
 
 # OOP
 
 my $json = new JSON;
 
 $obj = {id =&#62; &#39;foo&#39;, method =&#62; &#39;echo&#39;, params =&#62; [&#39;a&#39;,&#39;b&#39;]}
 $js  = $json-&#62;objToJson($obj);
 $obj = $json-&#62;jsonToObj($js);
 
 # pretty-printing
 $js = $json-&#62;objToJson($obj, {pretty =&#62; 1, indent =&#62; 2});

 $json = JSON-&#62;new(pretty =&#62; 1, delimiter =&#62; 0);
 $json-&#62;objToJson($obj);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module converts between JSON (JavaScript Object Notation) and Perl data structure into each other. For JSON, See to http://www.crockford.com/JSON/.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="new()"
>new()</a></dt>

<dd>
<dt><a name="new(_%options_)"
>new( %options )</a></dt>

<dd>
<p>returns a JSON object. The object delegates the converting and parsing process to <a href="./JSON/Converter.html" class="podlinkpod"
>JSON::Converter</a> and <a href="./JSON/Parser.html" class="podlinkpod"
>JSON::Parser</a>.</p>

<pre> my $json = new JSON;</pre>

<p><code>new</code> can take some options.</p>

<pre> my $json = new JSON (autoconv =&#62; 0, pretty =&#62; 1);</pre>

<p>Following options are supported:</p>

<dl>
<dt><a name="autoconv"
>autoconv</a></dt>

<dd>
<p>See <a href="#AUTOCONVERT" class="podlinkpod"
>&#34;AUTOCONVERT&#34;</a> for more info.</p>

<dt><a name="skipinvalid"
>skipinvalid</a></dt>

<dd>
<p><code>objToJson()</code> does <code>die()</code> when it encounters any invalid data (for instance, coderefs). If <code>skipinvalid</code> is set with true, the function convets these invalid data into JSON format&#39;s <code>null</code>.</p>

<dt><a name="execcoderef"
>execcoderef</a></dt>

<dd>
<p><code>objToJson()</code> does <code>die()</code> when it encounters any code reference. However, if <code>execcoderef</code> is set with true, executes the coderef and uses returned value.</p>

<dt><a name="pretty"
>pretty</a></dt>

<dd>
<p>See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>

<dt><a name="indent"
>indent</a></dt>

<dd>
<p>See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>

<dt><a name="delimiter"
>delimiter</a></dt>

<dd>
<p>See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>
</dd>
</dl>

<dt><a name="objToJson(_$object_)"
>objToJson( $object )</a></dt>

<dd>
<dt><a name="objToJson(_$object,_$hashref_)"
>objToJson( $object, $hashref )</a></dt>

<dd>
<p>takes perl data structure (basically, they are scalars, arrayrefs and hashrefs) and returns JSON formated string.</p>

<pre> my $obj = [1, 2, {foo =&#62; bar}];
 my $js  = $json-&#62;objToJson($obj);
 # [1,2,{&#34;foo&#34;:&#34;bar&#34;}]</pre>

<p>By default, returned string is one-line. However, you can get pretty-printed data with <code>pretty</code> option. Please see below <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a>.</p>

<pre> my $js  = $json-&#62;objToJson($obj, {pretty =&#62; 1, indent =&#62; 2});
 # [
 #   1,
 #   2,
 #   {
 #     &#34;foo&#34; : &#34;bar&#34;
 #   }
 # ]</pre>

<dt><a name="jsonToObj(_$js_)"
>jsonToObj( $js )</a></dt>

<dd>
<p>takes a JSON formated data and returns a perl data structure.</p>

<dt><a name="autoconv()"
>autoconv()</a></dt>

<dd>
<dt><a name="autoconv($bool)"
>autoconv($bool)</a></dt>

<dd>
<p>This is an accessor to <code>autoconv</code>. See <a href="#AUTOCONVERT" class="podlinkpod"
>&#34;AUTOCONVERT&#34;</a> for more info.</p>

<dt><a name="pretty()"
>pretty()</a></dt>

<dd>
<dt><a name="pretty($bool)"
>pretty($bool)</a></dt>

<dd>
<p>This is an accessor to <code>pretty</code>. It takes true or false. When prrety is true, <code>objToJson()</code> returns prrety-printed string. See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>

<dt><a name="indent()"
>indent()</a></dt>

<dd>
<dt><a name="indent($integer)"
>indent($integer)</a></dt>

<dd>
<p>This is an accessor to <code>indent</code>. See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>

<dt><a name="delimiter()"
>delimiter()</a></dt>

<dd>
<p>This is an accessor to <code>delimiter</code>. See <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a> for more info.</p>

<dt><a name="unmapping()"
>unmapping()</a></dt>

<dd>
<p>This is an accessor to <code>unmapping</code>. See <a href="#UNMAPPING_OPTION" class="podlinkpod"
>&#34;UNMAPPING OPTION&#34;</a> for more info.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="MAPPING"
>MAPPING</a></h1>

<pre> (JSON) {&#34;param&#34; : []}
 ( =&#62; Perl) {&#39;param&#39; =&#62; []};
 
 (JSON) {&#34;param&#34; : {}}
 ( =&#62; Perl) {&#39;param&#39; =&#62; {}};
 
 (JSON) {&#34;param&#34; : &#34;string&#34;}
 ( =&#62; Perl) {&#39;param&#39; =&#62; &#39;string&#39;};
 
 JSON {&#34;param&#34; : null}
  =&#62; Perl {&#39;param&#39; =&#62; bless( {&#39;value&#39; =&#62; undef}, &#39;JSON::NotString&#39; )};
  or {&#39;param&#39; =&#62; undef}
 
 (JSON) {&#34;param&#34; : true}
 ( =&#62; Perl) {&#39;param&#39; =&#62; bless( {&#39;value&#39; =&#62; &#39;true&#39;}, &#39;JSON::NotString&#39; )};
  or {&#39;param&#39; =&#62; 1}
 
 (JSON) {&#34;param&#34; : false}
 ( =&#62; Perl) {&#39;param&#39; =&#62; bless( {&#39;value&#39; =&#62; &#39;false&#39;}, &#39;JSON::NotString&#39; )};
  or {&#39;param&#39; =&#62; 2}
 
 (JSON) {&#34;param&#34; : 0xff}
 ( =&#62; Perl) {&#39;param&#39; =&#62; 255};

 (JSON) {&#34;param&#34; : 010}
 ( =&#62; Perl) {&#39;param&#39; =&#62; 8};</pre>

<p>These JSON::NotString objects are overloaded so you don&#39;t care about. Since 1.00, <a href="#UnMapping_option" class="podlinkpod"
>&#34;UnMapping option&#34;</a> is added. When that option is set, {&#34;param&#34; : null} will be converted into {&#39;param&#39; =&#62; undef}, insted of {&#39;param&#39; =&#62; bless( {&#39;value&#39; =&#62; undef}, &#39;JSON::NotString&#39; )}.</p>

<p>Perl&#39;s <code>undef</code> is converted to &#39;null&#39;.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRETY_PRINTING"
>PRETY PRINTING</a></h1>

<p>If you&#39;d like your JSON output to be pretty-printed, pass the <code>pretty</code> parameter to objToJson(). You can affect the indentation (which defaults to 2) by passing the <code>indent</code> parameter to objToJson().</p>

<pre>  my $str = $json-&#62;objToJson($obj, {pretty =&#62; 1, indent =&#62; 4});</pre>

<p>In addition, you can set some number to <code>delimiter</code> option. The available numbers are only 0, 1 and 2. In pretty-printing mode, when <code>delimiter</code> is 1, one space is added after &#39;:&#39; in object keys. If <code>delimiter</code> is 2, it is &#39; : &#39; and 0 is &#39;:&#39; (default is 2). If you give 3 or more to it, the value is taken as 2.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTOCONVERT"
>AUTOCONVERT</a></h1>

<p>By default, $JSON::AUTOCONVERT is true.</p>

<pre> (Perl) {num =&#62; 10.02}
 ( =&#62; JSON) {&#34;num&#34; : 10.02}</pre>

<p>it is not <code>{&#34;num&#34; : &#34;10.02&#34;}</code>.</p>

<p>But set false value with $JSON::AUTOCONVERT:</p>

<pre> (Perl) {num =&#62; 10.02}
 ( =&#62; JSON) {&#34;num&#34; : &#34;10.02&#34;}</pre>

<p>it is not <code>{&#34;num&#34; : 10.02}</code>.</p>

<p>You can explicitly sepcify:</p>

<pre> $obj = {
        id     =&#62; JSON::Number(10.02),
        bool1  =&#62; JSON::True,
        bool2  =&#62; JSON::False,
        noval  =&#62; JSON::Null,
 };

 $json-&#62;objToJson($obj);
 # {&#34;noval&#34; : null, &#34;bool2&#34; : false, &#34;bool1&#34; : true, &#34;id&#34; : 10.02}</pre>

<p><code>JSON::Number()</code> returns <code>undef</code> when an argument invalid format.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="UNMAPPING_OPTION"
>UNMAPPING OPTION</a></h1>

<p>By default, $JSON::UNMAPPING is false and JSON::Parser converts <code>null</code>, <code>true</code>, <code>false</code> into <code>JSON::NotString</code> objects. You can set true into $JSON::UNMAPPING to stop the mapping function. In that case, JSON::Parser will convert <code>null</code>, <code>true</code>, <code>false</code> into <code>undef</code>, 1, 0.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BARE_KEY_OPTION"
>BARE KEY OPTION</a></h1>

<p>You can set a true value into $JSON::BareKey for JSON::Parser to parse bare keys of objects.</p>

<pre> local $JSON::BareKey = 1;
 $obj = jsonToObj(&#39;{foo:&#34;bar&#34;}&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SINGLE_QUOTATION_OPTION"
>SINGLE QUOTATION OPTION</a></h1>

<p>You can set a true value into $JSON::QuotApos for JSON::Parser to parse any keys and values quoted by single quotations.</p>

<pre> local $JSON::QuotApos = 1;
 $obj = jsonToObj(q|{&#34;foo&#34;:&#39;bar&#39;}|);
 $obj = jsonToObj(q|{&#39;foo&#39;:&#39;bar&#39;}|);</pre>

<p>With $JSON::BareKey:</p>

<pre> local $JSON::BareKey  = 1;
 local $JSON::QuotApos = 1;
 $obj = jsonToObj(q|{foo:&#39;bar&#39;}|);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORT"
>EXPORT</a></h1>

<p><code>objToJson</code>, <code>jsonToObj</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TODO"
>TODO</a></h1>

<p><code>JSONRPC::Transport::HTTP::Daemon</code> in <a href="./JSON.html" class="podlinkpod"
>JSON</a> 1.00 (The code has be actually written in JSONRPC::Transport::HTTP.)</p>

<p>Shall I support not only {&#34;foo&#34; : &#34;bar&#34;} but {foo : &#34;bar&#34;} or {&#39;foo&#39; : &#39;bar&#39;} also?</p>

<p>Which name is more desirable? JSONRPC or JSON::RPC.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="http://www.crockford.com/JSON/" class="podlinkurl"
>http://www.crockford.com/JSON/</a>, <a href="./JSON/Parser.html" class="podlinkpod"
>JSON::Parser</a>, <a href="./JSON/Converter.html" class="podlinkpod"
>JSON::Converter</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ACKNOWLEDGEMENTS"
>ACKNOWLEDGEMENTS</a></h1>

<p>I owe most JSONRPC idea to <a href="./XMLRPC/Lite.html" class="podlinkpod"
>XMLRPC::Lite</a> and <a href="./SOAP/Lite.html" class="podlinkpod"
>SOAP::Lite</a>.</p>

<p>SHIMADA pointed out many problems to me.</p>

<p>Mike Castle &#60;dalgoda[at]ix.netcom.com&#62; suggested better packaging way.</p>

<p>Jeremy Muhlich &#60;jmuhlich[at]bitflood.org&#62; help me escaped character handling in JSON::Parser.</p>

<p>Adam Sussman &#60;adam.sussman[at]ticketmaster.com&#62; suggested the octal and hexadecimal formats as number.</p>

<p>Tatsuhiko Miyagawa &#60;miyagawa[at]bulknews.net&#62; taught a terrible typo and gave some suggestions.</p>

<p>David Wheeler &#60;david[at]kineticode.com&#62; suggested me supporting pretty-printing and gave a part of <a href="#PRETY_PRINTING" class="podlinkpod"
>&#34;PRETY PRINTING&#34;</a>.</p>

<p>Rusty Phillips &#60;rphillips[at]edats.com&#62; suggested me supporting the query object other than CGI.pm for JSONRPC::Transport::HTTP::CGI.</p>

<p>Felipe Gasper &#60;gasperfm[at]uc.edu&#62; pointed to a problem of JSON::NotString with undef. And show me patches for &#39;bare key option&#39; &#38; &#39;single quotation option&#39;.</p>

<p>Yaman Saqqa &#60;abulyomon[at]gmail.com&#62; helped my decision to support the bare key option.</p>

<p>Alden DoRosario &#60;adorosario[at]chitika.com&#62; tought JSON::Conveter::_stringfy (&#60;= 0.992) is very slow.</p>

<p>And Thanks very much to JSON by JSON.org (Douglas Crockford) and JSON-RPC by http://json-rpc.org/</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Makamaka Hannyaharamitu, &#60;makamaka[at]cpan.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright 2005 by Makamaka Hannyaharamitu</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
