dw-free/cgi-bin/DW/Request/Base.pm-80-    return $self->add_cookie( %args );
dw-free/cgi-bin/DW/Request/Base.pm-81-}
dw-free/cgi-bin/DW/Request/Base.pm-82-
dw-free/cgi-bin/DW/Request/Base.pm:83:# FIXME: This relies on the behavior parse_args
dw-free/cgi-bin/DW/Request/Base.pm-84-#   and the \0 seperated arguments. This should be cleaned
dw-free/cgi-bin/DW/Request/Base.pm-85-#   up at the same point parse_args is.
dw-free/cgi-bin/DW/Request/Base.pm-86-sub _string_to_multivalue {
--
dw-free/cgi-bin/DW/Request/Apache2.pm-257-    return Apache2::Const::OK;
dw-free/cgi-bin/DW/Request/Apache2.pm-258-}
dw-free/cgi-bin/DW/Request/Apache2.pm-259-
dw-free/cgi-bin/DW/Request/Apache2.pm:260:# FIXME: Temporary, until BML is gone / converted
dw-free/cgi-bin/DW/Request/Apache2.pm:261:# FIXME: This is only valid from a response handler
dw-free/cgi-bin/DW/Request/Apache2.pm-262-sub call_bml {
dw-free/cgi-bin/DW/Request/Apache2.pm-263-    my DW::Request::Apache2 $self = shift;
dw-free/cgi-bin/DW/Request/Apache2.pm-264-
--
dw-free/cgi-bin/DW/Request/Standard.pm-191-}
dw-free/cgi-bin/DW/Request/Standard.pm-192-
dw-free/cgi-bin/DW/Request/Standard.pm-193-# this may not be precisely correct?  maybe we need to maintain our
dw-free/cgi-bin/DW/Request/Standard.pm:194:# own set of headers that are separate for errors... FIXME: investigate
dw-free/cgi-bin/DW/Request/Standard.pm-195-*err_header_out = \&header_out;
dw-free/cgi-bin/DW/Request/Standard.pm-196-*err_header_out_add = \&header_out_add;
dw-free/cgi-bin/DW/Request/Standard.pm-197-
--
dw-free/cgi-bin/DW/Request/Standard.pm-199-sub get_remote_ip {
dw-free/cgi-bin/DW/Request/Standard.pm-200-    my DW::Request::Standard $self = $_[0];
dw-free/cgi-bin/DW/Request/Standard.pm-201-
dw-free/cgi-bin/DW/Request/Standard.pm:202:    # FIXME: this needs to support more than just the header ... what if we're not
dw-free/cgi-bin/DW/Request/Standard.pm-203-    # running behind a proxy?  can we use the environment?  do we fake it?  for now,
dw-free/cgi-bin/DW/Request/Standard.pm-204-    # assume that if there is no X-Forwarded-For or we don't trust it, we just put in
dw-free/cgi-bin/DW/Request/Standard.pm-205-    # a bogus IP...
--
dw-free/cgi-bin/DW/Request/Standard.pm-245-# meets conditions
dw-free/cgi-bin/DW/Request/Standard.pm-246-# conditional GET triggered on:
dw-free/cgi-bin/DW/Request/Standard.pm-247-#   If-Modified-Since
dw-free/cgi-bin/DW/Request/Standard.pm:248:#   If-Unmodified-Since     FIXME: implement
dw-free/cgi-bin/DW/Request/Standard.pm:249:#   If-Match                FIXME: implement
dw-free/cgi-bin/DW/Request/Standard.pm:250:#   If-None-Match           FIXME: implement
dw-free/cgi-bin/DW/Request/Standard.pm:251:#   If-Range                FIXME: implement
dw-free/cgi-bin/DW/Request/Standard.pm-252-sub meets_conditions {
dw-free/cgi-bin/DW/Request/Standard.pm-253-    my DW::Request::Standard $self = $_[0];
dw-free/cgi-bin/DW/Request/Standard.pm-254-
dw-free/cgi-bin/DW/Request/Standard.pm-255-    return $self->OK
dw-free/cgi-bin/DW/Request/Standard.pm-256-        if LJ::http_to_time( $self->header_in("If-Modified-Since") ) <= LJ::http_to_time( $self->header_out("Last-Modified") );
dw-free/cgi-bin/DW/Request/Standard.pm-257-
dw-free/cgi-bin/DW/Request/Standard.pm:258:    # FIXME: this should be pretty easy ... check the If headers (only time ones?)
dw-free/cgi-bin/DW/Request/Standard.pm-259-    # and see if they're good or not.  return proper status code here (OK, NOT_MODIFIED)
dw-free/cgi-bin/DW/Request/Standard.pm-260-    # go see the one caller in LJ::Feed
dw-free/cgi-bin/DW/Request/Standard.pm-261-    return 0;
--
dw-free/cgi-bin/DW/Request/Standard.pm-267-    return;
dw-free/cgi-bin/DW/Request/Standard.pm-268-}
dw-free/cgi-bin/DW/Request/Standard.pm-269-
dw-free/cgi-bin/DW/Request/Standard.pm:270:# FIXME(dre): this may not be the most efficient way but is
dw-free/cgi-bin/DW/Request/Standard.pm-271-# totally fine when we are just using this for tests.
dw-free/cgi-bin/DW/Request/Standard.pm-272-# We *may* need to revisit this if we use this for serving pages
dw-free/cgi-bin/DW/Request/Standard.pm-273-# IMPORTANT: Do not pull out $_[1] to a variable in this sub
--
dw-free/cgi-bin/DW/Shop.pm-138-
dw-free/cgi-bin/DW/Shop.pm-139-# gets a link to the active user; this is done this way with a load_userid call
dw-free/cgi-bin/DW/Shop.pm-140-# to prevent circular references.  (we could just make it a weak reference...?)
dw-free/cgi-bin/DW/Shop.pm:141:# FIXME: explore if LJ uses weak references anywhere and if so we can use them
dw-free/cgi-bin/DW/Shop.pm-142-# to store a weakened-$u in $self in initialize()
dw-free/cgi-bin/DW/Shop.pm-143-sub u {
dw-free/cgi-bin/DW/Shop.pm-144-    return undef if $_[0]->{anon} || ! $_[0]->{userid};
--
dw-free/cgi-bin/DW/Routing/Test.pm-27-    handle_request handle_server_error handle_redirect
dw-free/cgi-bin/DW/Routing/Test.pm-28-    handler regex_handler
dw-free/cgi-bin/DW/Routing/Test.pm-29-    okay is todo_skip skip
dw-free/cgi-bin/DW/Routing/Test.pm:30:    $TODO
dw-free/cgi-bin/DW/Routing/Test.pm-31-);
dw-free/cgi-bin/DW/Routing/Test.pm-32-
dw-free/cgi-bin/DW/Routing/Test.pm-33-my $CLASS = __PACKAGE__;
--
dw-free/cgi-bin/DW/Routing/Test.pm-244-    $tb->todo_skip($why) for( 1 .. $how_many );
dw-free/cgi-bin/DW/Routing/Test.pm-245-
dw-free/cgi-bin/DW/Routing/Test.pm-246-    no warnings 'exiting';
dw-free/cgi-bin/DW/Routing/Test.pm:247:    last TODO;
dw-free/cgi-bin/DW/Routing/Test.pm-248-}
dw-free/cgi-bin/DW/Routing/Test.pm-249-
dw-free/cgi-bin/DW/Routing/Test.pm-250-
--
dw-free/cgi-bin/DW/Template/Filters.pm-83-        if $uselang eq 'debug' || LJ::Lang::get_lang( $uselang );
dw-free/cgi-bin/DW/Template/Filters.pm-84-
dw-free/cgi-bin/DW/Template/Filters.pm-85-    # next is their cookie preference
dw-free/cgi-bin/DW/Template/Filters.pm:86:    #FIXME: COOKIE!
dw-free/cgi-bin/DW/Template/Filters.pm-87-    #if ( $r->cookie('langpref') =~ m!^(\w{2,10})/(\d+)$! ) {
dw-free/cgi-bin/DW/Template/Filters.pm-88-    #    if (exists $env->{"Langs-$1"}) {
dw-free/cgi-bin/DW/Template/Filters.pm:89:    #        # FIXME: Probably should actually do this!!!
dw-free/cgi-bin/DW/Template/Filters.pm-90-    #        # make sure the document says it was changed at least as new as when
dw-free/cgi-bin/DW/Template/Filters.pm-91-    #        # the user last set their current language, else their browser might
dw-free/cgi-bin/DW/Template/Filters.pm-92-    #        # show a cached (wrong language) version.
--
dw-free/cgi-bin/DW/Template/Filters.pm-94-    #    }
dw-free/cgi-bin/DW/Template/Filters.pm-95-    #}
dw-free/cgi-bin/DW/Template/Filters.pm-96-
dw-free/cgi-bin/DW/Template/Filters.pm:97:    # FIXME: next is their browser's preference
dw-free/cgi-bin/DW/Template/Filters.pm-98-
dw-free/cgi-bin/DW/Template/Filters.pm-99-    # next is the default language
dw-free/cgi-bin/DW/Template/Filters.pm-100-    return $LJ::DEFAULT_LANG || $LJ::LANGS[0];
--
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-33-Gets a DW::InviteCode::Promo objct
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-34-
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-35-=cut
dw-free/cgi-bin/DW/InviteCodes/Promo.pm:36:# FIXME: Consider process caching and/or memcache, if this is a busy enough path
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-37-sub load {
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-38-    my ( $class, %opts ) = @_;
dw-free/cgi-bin/DW/InviteCodes/Promo.pm-39-    my $dbh = LJ::get_db_writer();
--
dw-free/cgi-bin/DW/Shop/Engine.pm-97-
dw-free/cgi-bin/DW/Shop/Engine.pm-98-
dw-free/cgi-bin/DW/Shop/Engine.pm-99-# called when someone wants us to try to capture the points
dw-free/cgi-bin/DW/Shop/Engine.pm:100:# FIXME: should move the 'cart' accessor and logic up to this base class ...
dw-free/cgi-bin/DW/Shop/Engine.pm-101-sub try_capture_points {
dw-free/cgi-bin/DW/Shop/Engine.pm-102-    my $self = $_[0];
dw-free/cgi-bin/DW/Shop/Engine.pm-103-
--
dw-free/cgi-bin/DW/Shop/Item/Account.pm-308-}
dw-free/cgi-bin/DW/Shop/Item/Account.pm-309-
dw-free/cgi-bin/DW/Shop/Item/Account.pm-310-# this checks whether we can downgrade the premium to paid
dw-free/cgi-bin/DW/Shop/Item/Account.pm:311:# FIXME: a better fix for this is to have an autorenewal system, and have the paid time
dw-free/cgi-bin/DW/Shop/Item/Account.pm-312-# applied to their account once their current premium time expires
dw-free/cgi-bin/DW/Shop/Item/Account.pm-313-sub allow_account_conversion {
dw-free/cgi-bin/DW/Shop/Item/Account.pm-314-    my ( $class, $u, $to ) = @_;
--
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-106-    my $dbh = DW::Pay::get_db_writer()
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-107-        or die "Unable to get database handle.\n";
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-108-
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm:109:    # FIXME: "SELECT *" is for sad making :(
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-110-    my $row = $dbh->selectrow_hashref( 'SELECT * FROM cc_trans WHERE cctransid = ?', undef, $cctransid );
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-111-    die "Database error: " . $dbh->errstr . "\n"
dw-free/cgi-bin/DW/Shop/Engine/CreditCard.pm-112-        if $dbh->err;
--
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-234-    );
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-235-
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-236-    # if there's a db error above, that's very disturbing and alarming
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm:237:    # FIXME: add $eng->send_alarm or something so that we can have the Management
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-238-    # take a stab at fixing manually in exotic cases?
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-239-    warn "Failure to save pp_trans: " . $dbh->errstr . "\n"
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-240-        if $dbh->err;
--
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-385-sub process_ipn {
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-386-    my ( $class, $form ) = @_;
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-387-
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm:388:    # FIXME: we have to do more than just log it :-)
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-389-    my $dbh = DW::Pay::get_db_writer()
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-390-        or die "failed, please retry later\n";
dw-free/cgi-bin/DW/Shop/Engine/PayPal.pm-391-    $dbh->do(
--
dw-free/cgi-bin/DW/Shop/Item.pm-334-            if $u;
dw-free/cgi-bin/DW/Shop/Item.pm-335-    }
dw-free/cgi-bin/DW/Shop/Item.pm-336-
dw-free/cgi-bin/DW/Shop/Item.pm:337:    # FIXME: english strip
dw-free/cgi-bin/DW/Shop/Item.pm-338-    return "$desc for $for";
dw-free/cgi-bin/DW/Shop/Item.pm-339-}
dw-free/cgi-bin/DW/Shop/Item.pm-340-
--
dw-free/cgi-bin/DW/Panel.pm-49-
dw-free/cgi-bin/DW/Panel.pm-50-    my $ret = fields::new( $class );
dw-free/cgi-bin/DW/Panel.pm-51-
dw-free/cgi-bin/DW/Panel.pm:52:    # TODO: store/retrieve user settings from database
dw-free/cgi-bin/DW/Panel.pm-53-    # possible settings: display or not, position, possibly per-widget config
dw-free/cgi-bin/DW/Panel.pm-54-    $ret->{primary} = [
dw-free/cgi-bin/DW/Panel.pm-55-        "DW::Widget::LatestNews",
--
dw-free/cgi-bin/DW/Panel.pm-114-    return "" unless $widget_body;
dw-free/cgi-bin/DW/Panel.pm-115-
dw-free/cgi-bin/DW/Panel.pm-116-    my $css_subclass = lc $widget->subclass;
dw-free/cgi-bin/DW/Panel.pm:117:    # TODO: this can contain the non-js controls to enable customization of display
dw-free/cgi-bin/DW/Panel.pm-118-    return "<div class='panel' id='panel-$css_subclass' >$widget_body</div>";
dw-free/cgi-bin/DW/Panel.pm-119-}
dw-free/cgi-bin/DW/Panel.pm-120-
--
dw-free/cgi-bin/DW/User/Rename.pm-339-
dw-free/cgi-bin/DW/User/Rename.pm-340-    my $dbh = LJ::get_db_writer() or die "Could not get DB handle";
dw-free/cgi-bin/DW/User/Rename.pm-341-
dw-free/cgi-bin/DW/User/Rename.pm:342:    # FIXME: transactions possible?
dw-free/cgi-bin/DW/User/Rename.pm-343-    foreach my $table ( qw( user useridmap ) )
dw-free/cgi-bin/DW/User/Rename.pm-344-    {
dw-free/cgi-bin/DW/User/Rename.pm-345-        $dbh->do( "UPDATE $table SET user=? WHERE user=?", 
--
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-93-        if $tag_mode && $tag_mode !~ /^(?:any_of|all_of|none_of)$/;
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-94-
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-95-    # tags
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm:96:    # FIXME: validate that the tagids are valid for this user...?
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-97-    my $tags = delete $args{tags} || [];
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-98-    die "tags must be an arrayref\n"
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-99-        if ref $tags ne 'ARRAY';
--
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-229-    # okay, we need the entry object.  a little note here, this is fairly efficient
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-230-    # because LJ::get_log2_recent_log actually creates all of the singletons for
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-231-    # the entries it touches.  so when we call some sort of 'load data on something'
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm:232:    # on one of the entries, then it loads on all of them.  (FIXME: verify this
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-233-    # by watching memcache/db queries.)
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-234-    my $entry = LJ::Entry->new_from_item_hash( $item );
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-235-    my ( $journalu, $posteru ) = ( $entry->journal, $entry->poster );
--
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-332-
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-333-
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-334-# some simple accessors... we don't really support using these as setters
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm:335:# FIXME: we should sanitize on the object creation, not in these getters,
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-336-# ...just hacking this together right now
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-337-sub id        { $_[0]->{id}+0           }
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-338-sub ownerid   { $_[0]->{ownerid}+0      }
--
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-355-    # if no argument, just bail
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-356-    return $self->{$which} unless defined $val;
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-357-
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm:358:    # FIXME: we should probably have generic vetters somewhere... or something, I don't know,
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-359-    # I just know that I don't really like doing this here
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-360-    if ( $which eq 'name' ) {
dw-free/cgi-bin/DW/User/ContentFilters/Filter.pm-361-        $val = LJ::text_trim( $val, 255, 100 ) || '';
--
dw-free/cgi-bin/DW/User/Edges.pm-25-use strict;
dw-free/cgi-bin/DW/User/Edges.pm-26-
dw-free/cgi-bin/DW/User/Edges.pm-27-# FYI - including edges is done at the end of this file.  scroll down to the
dw-free/cgi-bin/DW/User/Edges.pm:28:# comment denoted 'XXX'.
dw-free/cgi-bin/DW/User/Edges.pm-29-
dw-free/cgi-bin/DW/User/Edges.pm-30-# overall list of edges that are valid, if it's not in this list (and not one
dw-free/cgi-bin/DW/User/Edges.pm-31-# of the special edges like 'all') then we don't know how to deal with it
--
dw-free/cgi-bin/DW/User/Edges.pm-115-            return $err->( "Edge $edge of type hashref with invalid value." )
dw-free/cgi-bin/DW/User/Edges.pm-116-                unless ref $edges->{$edge} eq 'HASH';
dw-free/cgi-bin/DW/User/Edges.pm-117-
dw-free/cgi-bin/DW/User/Edges.pm:118:## FIXME: we don't assert all of the 'required' options are passed yet
dw-free/cgi-bin/DW/User/Edges.pm-119-
dw-free/cgi-bin/DW/User/Edges.pm-120-            my $opts = $er->{options};
dw-free/cgi-bin/DW/User/Edges.pm-121-            foreach my $opt ( keys %$opts ) {
--
dw-free/cgi-bin/DW/User/Edges.pm-141-    return 1;
dw-free/cgi-bin/DW/User/Edges.pm-142-}
dw-free/cgi-bin/DW/User/Edges.pm-143-
dw-free/cgi-bin/DW/User/Edges.pm:144:# XXX: add new edge modules that are global here
dw-free/cgi-bin/DW/User/Edges.pm-145-use DW::User::Edges::WatchTrust;
dw-free/cgi-bin/DW/User/Edges.pm-146-use DW::User::Edges::CommMembership;
dw-free/cgi-bin/DW/User/Edges.pm-147-
--
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-47-    # should we exclude mutual watches from 'w_rev_userids'?
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-48-    $self->{mutualsep} = delete $args{mutuals_separate};
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-49-
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm:50:    # TODO: lame that we have to pass this in, but currently
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-51-    # it's not cached on the $u singleton.  in future, remove this.
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-52-    # it's a hashref of { $userid => 1 }, for user's trusts
dw-free/cgi-bin/DW/User/Edges/WatchTrust/UserHelper.pm-53-    $self->{t_userids} = delete $args{t_userids} || {};
--
dw-free/cgi-bin/DW/User/ContentFilters.pm-105-sub create_content_filter {
dw-free/cgi-bin/DW/User/ContentFilters.pm-106-    my ( $u, %args ) = @_;
dw-free/cgi-bin/DW/User/ContentFilters.pm-107-
dw-free/cgi-bin/DW/User/ContentFilters.pm:108:    # FIXME: this is probably the point we should implement limits on how many
dw-free/cgi-bin/DW/User/ContentFilters.pm-109-    # filters you can create...
dw-free/cgi-bin/DW/User/ContentFilters.pm-110-
dw-free/cgi-bin/DW/User/ContentFilters.pm-111-    # check if a filter with this name already exists, if so return its id, so the user can edit or remove it
--
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-51-    my %data;
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-52-    my $dbslow = LJ::get_dbh( 'slow' ) or die "Can't get slow role";
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-53-    
dw-free/cgi-bin/DW/StatData/AccountsByType.pm:54:    # FIXME: look into using a count(*) ... group by. Efficiency?
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-55-    $data{redirect} = $dbslow->selectrow_array( "SELECT COUNT(*) FROM user WHERE journaltype='R'" ) if $opts{redirect};
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-56-    $data{identity} = $dbslow->selectrow_array( "SELECT COUNT(*) FROM user WHERE journaltype='I'" ) if $opts{identity};
dw-free/cgi-bin/DW/StatData/AccountsByType.pm-57-    $data{personal} = $dbslow->selectrow_array( "SELECT COUNT(*) FROM user WHERE journaltype='P'" ) if $opts{personal};
--
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-310-    my $u = $self->{u};
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-311-    return () unless $u->is_syndicated && LJ::is_enabled( 'hubbub' );
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-312-
dw-free/cgi-bin/DW/Logic/ProfilePage.pm:313:    # FIXME: should probably have a PubSubHubbub module that gets this sort
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-314-    # of thing so we don't have to scatter SQL in the profile logic...
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-315-    my $dbr = LJ::get_db_reader();
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-316-
--
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-676-
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-677-    if ( $ret = $u->bio ) {
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-678-        if ( $u->is_identity && $LJ::ONLY_USER_VHOSTS ) {
dw-free/cgi-bin/DW/Logic/ProfilePage.pm:679:            $ret = LJ::ehtml( $ret ); # XXXXX FIXME: TEMP FIX
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-680-            $ret =~ s!\n!<br />!g;
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-681-        } else {
dw-free/cgi-bin/DW/Logic/ProfilePage.pm-682-            LJ::CleanHTML::clean_userbio( \$ret );
--
dw-free/cgi-bin/DW/Logic/Importer.pm-28-        or die "No database.";
dw-free/cgi-bin/DW/Logic/Importer.pm-29-
dw-free/cgi-bin/DW/Logic/Importer.pm-30-    # load up their most recent (active) import
dw-free/cgi-bin/DW/Logic/Importer.pm:31:    # FIXME: memcache this
dw-free/cgi-bin/DW/Logic/Importer.pm-32-    my $imports = $dbh->selectall_arrayref(
dw-free/cgi-bin/DW/Logic/Importer.pm-33-        'SELECT import_data_id, hostname, username, usejournal, password_md5, options FROM import_data WHERE userid = ? ' .
dw-free/cgi-bin/DW/Logic/Importer.pm-34-        'ORDER BY import_data_id DESC LIMIT 1',
--
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-46-    if ($getargs) {
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-47-        if ($getargs->{create}) {
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-48-            my $acct = DW::External::Account->get_external_account($u, $getargs->{create});
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm:49:            # FIXME blue is temporary.  move to css.
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-50-            $ret .= "<div style='color: blue;'>" . $class->ml('setting.xpost.message.create', { username => $acct->username, servername => $acct->servername }) . "</div>";
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-51-        } elsif ($getargs->{update}) {
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-52-            my $acct = DW::External::Account->get_external_account($u, $getargs->{update});
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm:53:            # FIXME blue is temporary.  move to css.
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-54-            $ret .= "<div style='color: blue;'>" . $class->ml('setting.xpost.message.update', { username => $acct->username, servername => $acct->servername }) . "</div>";
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-55-        }
dw-free/cgi-bin/DW/Setting/XPostAccounts.pm-56-    }
--
dw-free/cgi-bin/DW/Routing.pm-121-    }
dw-free/cgi-bin/DW/Routing.pm-122-
dw-free/cgi-bin/DW/Routing.pm-123-    # try the regex choices next
dw-free/cgi-bin/DW/Routing.pm:124:    # FIXME: this should be a dynamically sorting array so the most used items float to the top
dw-free/cgi-bin/DW/Routing.pm-125-    # for now it doesn't matter so much but eventually when everything is in the routing table
dw-free/cgi-bin/DW/Routing.pm-126-    # that will have to be done
dw-free/cgi-bin/DW/Routing.pm-127-    my @args;
--
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-67-    my ( $class, $u, $cmt, $errref ) = @_;
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-68-    $errref ||= '';
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-69-
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm:70:    # FIXME: we should try to do more than just update the picture keyword, this should handle
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-71-    # edits and such.  for now, I'm just trying to get the icons to update...
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-72-    my $c = LJ::Comment->instance( $u, jtalkid => $cmt->{id} )
dw-free/cgi-bin/DW/Worker/ContentImporter/Local/Comments.pm-73-        or return $$errref = 'Unable to instantiate LJ::Comment object.';
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-92-    my ( $class, $data, $url, $acct ) = @_;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-93-    return undef unless $acct;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-94-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm:95:# FIXME: have to do something to pass the errors up
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-96-    my $errors = [];
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-97-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-98-    # canonicalize url
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-108-        return undef unless $acct;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-109-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-110-        # since we're creating, let's validate this against the deny list
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm:111:        # FIXME: probably need to error nicely here, as we're not creating
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-112-        # the feed that the user is expecting...
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-113-        return undef
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-114-            if LJ::User->is_protected_username( $acct );
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-124-    # Try to figure out if this is a local user.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-125-    my ( $hostname, $port ) = ( $1, $2 );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-126-    if ( $hostname =~ /\Q$LJ::DOMAIN\E/i ) {
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm:127:        # TODO: have to map this.. :(
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm:128:        # FIXME: why submit a patch that has incomplete code? :|
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-129-    }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-130-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-131-    # disallow ports (do we ever see this in the wild and care to support it?)
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-182-            unless defined $oid;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-183-    }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-184-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm:185:# FIXME: this is temporarily disabled while we hash out exactly how we want
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-186-# this functionality to work.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-187-#    unless ( defined $fid ) {
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal.pm-188-#        warn "[$$] Remapping feed userid of $data->{hostname}:$user\n";
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-71-    );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-72-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-73-    # mark lj_friends item as able to be scheduled now, and save the map
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm:74:# FIXME: what do we do on error case? well, hopefully that will be rare...
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-75-    $dbh->do(
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-76-        q{UPDATE import_items SET status = 'ready'
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/FriendGroups.pm-77-          WHERE userid = ? AND item IN ('lj_friends', 'lj_entries')
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-84-        or return $fail->( 'Unable to load target with id %d.', $data->{userid} );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-85-    $0 = sprintf( 'content-importer [userpics: %s(%d)]', $u->user, $u->id );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-86-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm:87:# FIXME: URL may not be accurate here for all sites
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-88-    my $fetch_error = "";
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-89-    my $un = $data->{usejournal} || $data->{username};
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-90-    my ( $default, @pics ) = $class->get_lj_userpic_data( "http://$data->{hostname}/users/$un/", $data, $log, \$fetch_error );
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-96-    my $num_imported = scalar( @imported );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-97-    my $to_import = scalar( @pics );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-98-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm:99:    # FIXME: Uncomment when "select userpics later is implemented"
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-100-    #my $has_backup = 0;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-101-    # There's nothing the user can do at this point if Mogile is not available, and any error relating to that will likely confuse them.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-102-    if ( scalar( @imported ) != scalar( @pics ) ) {
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-108-                pics => \@pics,
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-109-            };
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-110-            $mog->store_content( 'import_upi:' . $u->id, 'temp', $data );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm:111:            # FIXME: Uncomment when "select userpics later is implemented"
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-112-            #$has_backup = 1;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-113-        }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-114-    }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-115-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm:116:    # FIXME: Link to "select userpics later" (once it is created) if we have the backup.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-117-    my $message = "$num_imported out of $to_import usericon" . ( $to_import == 1 ? "" : "s" ) . " successfully imported.";
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-118-    $message = "None of your usericons imported successfully." if $num_imported == 0;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-119-    $message = "There were no usericons to import." if $to_import == 0;
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-160-    my ( @upics, $upic, $default_upic, $text_tag );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-161-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-162-    my $cleanup_string = sub {
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm:163:        # FIXME: If LJ ever fixes their /data/userpics feed to double-escepe, this will cause issues.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-164-        # Probably need to figure out a way to detect that a double-escape happened and only fix in that case.
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-165-        return HTML::Entities::decode_entities( encode_utf8( $_[0] || "" ) );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Userpics.pm-166-    };
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-60-        timeout  => 20,     # 20 seconds, might need tuning for slow sites
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-61-    ) or return $temp_fail->( 'Unable to allocate useragent.' );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-62-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm:63:# FIXME: have to flip this back to using the user_path value instead of hardcoded
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-64-# livejournal.com ... this should probably be part of the import_data structure?
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-65-# abstract out sites?
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Bio.pm-66-    my $un = $data->{usejournal} || $data->{username};
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-40-        return $class->temp_fail( $data, 'lj_entries', $job, 'Failure running job: %s', $msg );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-41-    }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-42-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm:43:    # FIXME: temporary hack to reclaim memory when we have imported entries
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-44-    exit 0;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-45-}
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-46-
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-112-    # load the syncitems list; but never try to load the same lastsync time twice, just
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-113-    # in case.  also, we have to do some pretty annoying back-steps and not actually trust
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-114-    # the last synced time because it's possible in some rare cases to lose entries by
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm:115:    # just trusting what the remote end is telling you.  (FIXME: link to a writeup of this
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-116-    # somewhere...)
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-117-    my ( $lastsync, %tried_syncs, %sync );
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-118-    while ( $tried_syncs{$lastsync} < 2 ) {
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-246-                    # set it to 0, but exists, so we don't hit LJ again, but we continue to fail this poster
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-247-                    $user_map{$evt->{poster}} = 0;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-248-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm:249:                    # FIXME: need a better way of totally dying...
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-250-                    push @item_errors, "Unable to map poster from LJ user '$evt->{poster}' to local user.";
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-251-                    $status->(
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-252-                        remote_url => $evt->{url},
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-260-            }
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-261-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-262-            # we just link polls to the original site
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm:263:# FIXME: this URL should be from some method and not manually constructed
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-264-            my $event = $evt->{event};
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-265-            $event =~ s!<.+?-poll-(\d+?)>![<a href="http://www.$data->{hostname}/poll/?id=$1">Poll #$1</a>]!g;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-266-
--
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-404-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-405-        # if we get here, we got a good result, which means that the entry we tried to get
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-406-        # should be in the results.  if it's not, to prevent an infinite loop, let's mark
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm:407:        # it as retrieved.  FIXME: this causes problems with mass-edited journals
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-408-        delete $sync{$last_itemid} if defined $last_itemid;
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-409-
dw-free/cgi-bin/DW/Worker/ContentImporter/LiveJournal/Entries.pm-410-        # log some status for later
--
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-25-    my ( $class, $job ) = @_;
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-26-    my $opts = $job->arg;
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-27-
dw-free/cgi-bin/DW/Worker/LatestFeed.pm:28:    # FIXME: we might want to lock here, to protect against the sysadmin running
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-29-    # more than one copy of this job?  otoh, we should just document that there
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-30-    # should only ever be one of these running.
dw-free/cgi-bin/DW/Worker/LatestFeed.pm-31-
--
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-42-
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-43-sub keep_exit_status_for { 86400 } # 24 hours
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-44-
dw-free/cgi-bin/DW/Worker/XPostWorker.pm:45:# FIXME: tune value?
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-46-sub grab_for { 600 }
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-47-
dw-free/cgi-bin/DW/Worker/XPostWorker.pm-48-sub work {
--
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-41-
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-42-sub keep_exit_status_for { 86400 } # 24 hours
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-43-
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm:44:# FIXME: tune value?
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-45-sub grab_for { 600 }
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-46-
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-47-sub work {
--
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-110-            my $inv_peruser = int( $adj_ninv / $inv_nusers );
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-111-            $reqemail_vars->{peruser} = $inv_peruser;
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-112-
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm:113:            # FIXME: make magic number configurable
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-114-            for (my $start = 0; $start < $inv_nusers; $start += 1000) {
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-115-                my $end = ($start + 999 < $inv_nusers)
dw-free/cgi-bin/DW/Worker/DistributeInvites.pm-116-                    ? $start + 999
--
dw-free/cgi-bin/DW/Pay.pm-442-
dw-free/cgi-bin/DW/Pay.pm-443-            # but the types are different...
dw-free/cgi-bin/DW/Pay.pm-444-            } else {
dw-free/cgi-bin/DW/Pay.pm:445:                # FIXME: this needs to not be dw-nonfree logic
dw-free/cgi-bin/DW/Pay.pm-446-                my $from_type = $LJ::CAP{$ps->{typeid}}->{_account_type};
dw-free/cgi-bin/DW/Pay.pm-447-                my $to_type = $LJ::CAP{$typeid}->{_account_type};
dw-free/cgi-bin/DW/Pay.pm-448-
--
dw-free/cgi-bin/DW/Pay.pm-659-
dw-free/cgi-bin/DW/Pay.pm-660-    unless ( defined $ct ) {
dw-free/cgi-bin/DW/Pay.pm-661-        # not in memcache, so let's hit the database
dw-free/cgi-bin/DW/Pay.pm:662:        # FIXME: add ddlockd so we don't hit the db in waves every 60 seconds
dw-free/cgi-bin/DW/Pay.pm-663-        my $dbh = DW::Pay::get_db_writer()
dw-free/cgi-bin/DW/Pay.pm-664-            or return error( ERR_TEMP, "Unable to get db writer." );
dw-free/cgi-bin/DW/Pay.pm-665-        $ct = $dbh->selectrow_array( 'SELECT COUNT(*) FROM dw_paidstatus WHERE permanent = 1' )+0;
--
dw-free/cgi-bin/DW/Pay.pm-775-    } else {
dw-free/cgi-bin/DW/Pay.pm-776-        # this is a really bad error we should never have... we can't
dw-free/cgi-bin/DW/Pay.pm-777-        # handle this user
dw-free/cgi-bin/DW/Pay.pm:778:        # FIXME: candidate for email-site-admins
dw-free/cgi-bin/DW/Pay.pm-779-        return error( ERR_FATAL, "Unknown typeid." )
dw-free/cgi-bin/DW/Pay.pm-780-            unless DW::Pay::type_is_valid( $ps->{typeid} );
dw-free/cgi-bin/DW/Pay.pm-781-
--
dw-free/cgi-bin/DW/Controller/Rename.pm-265-                from    => $token->fromuser,
dw-free/cgi-bin/DW/Controller/Rename.pm-266-                to      => $token->touser,
dw-free/cgi-bin/DW/Controller/Rename.pm-267-
dw-free/cgi-bin/DW/Controller/Rename.pm:268:                # FIXME: these should probably just be in DW::RenameToken instead
dw-free/cgi-bin/DW/Controller/Rename.pm-269-                owner   => LJ::load_userid( $token->ownerid ),
dw-free/cgi-bin/DW/Controller/Rename.pm-270-                target  => LJ::load_userid( $token->renuserid ),
dw-free/cgi-bin/DW/Controller/Rename.pm-271-                date    => LJ::mysql_time( $token->rendate ),
--
dw-free/cgi-bin/DW/Controller/Dev.pm-132-
dw-free/cgi-bin/DW/Controller/Dev.pm-133-        return $r->OK;
dw-free/cgi-bin/DW/Controller/Dev.pm-134-    }
dw-free/cgi-bin/DW/Controller/Dev.pm:135:    # FIXME: handle post as well
dw-free/cgi-bin/DW/Controller/Dev.pm-136-}
dw-free/cgi-bin/DW/Controller/Dev.pm-137-1;
dw-free/cgi-bin/DW/Controller/Dev.pm-138-
--
dw-free/cgi-bin/DW/Controller/Shop.pm-148-                    reason => $reason,
dw-free/cgi-bin/DW/Controller/Shop.pm-149-                } );
dw-free/cgi-bin/DW/Controller/Shop.pm-150-
dw-free/cgi-bin/DW/Controller/Shop.pm:151:            # FIXME: esnify the notification
dw-free/cgi-bin/DW/Controller/Shop.pm-152-            LJ::send_mail( {
dw-free/cgi-bin/DW/Controller/Shop.pm-153-                to => $u->email_raw,
dw-free/cgi-bin/DW/Controller/Shop.pm-154-                from => $LJ::ACCOUNTS_EMAIL,
--
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-47-        my $uid = LJ::get_userid( $args->{journal} );
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-48-        my $entry = LJ::Entry->new( $uid, ditemid => $ditemid ) if $uid;
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-49-
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm:50:        # FIXME: This returns 200 due to old library, Make return proper when we are jQuery only.
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-51-        return $error_out->( 200, BML::ml( "error.nopermission" ) ) unless $entry;
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-52-        
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-53-        # make sure the user can read the entry
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-54-        if ( $entry->visible_to( $remote ) ) {
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-55-            my $text = load_cuttext( $entry, $remote, $args->{cutid} );
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm:56:            # FIXME: temporary fix.
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-57-            # remove some unicode characters that could cause the returned JSON to break
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-58-            # like in LJ::ejs, but we don't need to escape quotes, etc (objToJson does that)
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-59-            $text =~ s/\xE2\x80[\xA8\xA9]//gs;
--
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-62-        }
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-63-    }
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-64-
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm:65:    # FIXME: This returns 200 due to old library, Make return proper when we are jQuery only.
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-66-    return $error_out->( 200, BML::ml( "error.nopermission" ) );
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-67-}
dw-free/cgi-bin/DW/Controller/RPC/CutExpander.pm-68-
--
dw-free/cgi-bin/DW/Controller/Admin.pm-290-}
dw-free/cgi-bin/DW/Controller/Admin.pm-291-
dw-free/cgi-bin/DW/Controller/Admin.pm-292-# DO NOT USE OUTSIDE THIS FILE!
dw-free/cgi-bin/DW/Controller/Admin.pm:293:# FIXME: Remove once the big scary array up above is gone!
dw-free/cgi-bin/DW/Controller/Admin.pm-294-sub _register_admin_pages_legacy {
dw-free/cgi-bin/DW/Controller/Admin.pm-295-    my ( $class, $scope, @pages ) = @_;
dw-free/cgi-bin/DW/Controller/Admin.pm-296-
--
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-194-
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-195-    my $r = DW::Request->get;
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-196-
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm:197:    # FIXME: use XML::Atom::Service?
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-198-    my $ret = qq{<?xml version="1.0"?>};
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-199-    $ret .= qq{<service xmlns="http://www.w3.org/2007/app" xmlns:atom="http://www.w3.org/2005/Atom">};
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-200-
--
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-288-    # post to the protocol
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-289-    # we ignore some things provided by the user,
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-290-    # such as the entry id, and the update time
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm:291:    # FIXME: use an XML::Atom extension to add security options
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-292-    my $req = {
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-293-        ver         => 1,
dw-free/cgi-bin/DW/Controller/Interface/AtomAPI.pm-294-        username    => $remote->user,
--
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-239-
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-240-    # Unknown type, try running site hooks
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-241-    if ( $type ) {
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm:242:        # TODO: check return value of this hook, and fall back to another hook
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-243-        # that shows the results here, rather than redirecting to another page
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-244-        return LJ::Hooks::run_hook( 'multisearch_custom_search_redirect',
dw-free/cgi-bin/DW/Controller/Search/Multisearch.pm-245-                                    { type => $type, query => $q } );
--
dw-free/cgi-bin/DW/Controller/SiteStats.pm-210-
dw-free/cgi-bin/DW/Controller/SiteStats.pm-211-<<COMMENT;
dw-free/cgi-bin/DW/Controller/SiteStats.pm-212-
dw-free/cgi-bin/DW/Controller/SiteStats.pm:213:FIXME: remove this when you have implemented them all
dw-free/cgi-bin/DW/Controller/SiteStats.pm-214-
dw-free/cgi-bin/DW/Controller/SiteStats.pm-215-* Number of accounts, total (done)
dw-free/cgi-bin/DW/Controller/SiteStats.pm-216-* Number of accounts active (done)
--
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-84-    if ( $r->method eq 'POST' ) {
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-85-        return $r->redirect( "/admin/themes/theme?theme=$uniq" ) unless LJ::check_form_auth( $args->{lj_form_auth} );
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-86-
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm:87:        # FIXME: This should be in S2Themes
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-88-        my $cats = $theme->metadata->{cats};
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-89-        my %kwid_map = map { $_->{kwid} => $_ } values %$cats;
dw-free/cgi-bin/DW/Controller/Admin/ThemeMetadata.pm-90-        my @kwids = keys %kwid_map;
--
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-39-}
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-40-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-41-# internal xml-rpc call method.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm:42:# FIXME we should probably combine this with the similar method in
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-43-# DW::Worker::ContentImporter::LiveJournal, and move it to a general
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-44-# LJ-XMLRPC library class.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-45-sub _call_xmlrpc {
--
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-72-}
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-73-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-74-# does the authentication call.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm:75:# FIXME we should probably combine this with the similar method in
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-76-# DW::Worker::ContentImporter::LiveJournal, and move it to a general
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-77-# LJ-XMLRPC library class.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-78-sub do_auth {
--
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-123-}
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-124-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-125-# public xml-rpc call method.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm:126:# FIXME we should probably combine this with the similar method in
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-127-# DW::Worker::ContentImporter::LiveJournal, and move it to a general
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-128-# LJ-XMLRPC library class.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-129-sub call_xmlrpc {
--
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-188-        # if it's a post or edit, fully populate the request.
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-189-        $req = $self->entry_to_req($entry, $extacct, $auth);
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-190-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm:191:        # FIXME: temporary hack to limit crossposts to one level, avoiding an infinite loop
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-192-        $req->{xpost} = 0;
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-193-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-194-        # are we disabling comments on the remote entry?
--
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-361-    }
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-362-    $req->{props}->{current_moodid} = $external_moodid if $external_moodid;
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-363-
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm:364:    # and set the useragent - FIXME put this somewhere else?
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-365-    $req->{props}->{useragent} = "Dreamwidth Crossposter";
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-366-    
dw-free/cgi-bin/DW/External/XPostProtocol/LJXMLRPC.pm-367-    # do any per-site preprocessing
--
dw-free/cgi-bin/Apache/LiveJournal.pm-465-    }
dw-free/cgi-bin/Apache/LiveJournal.pm-466-
dw-free/cgi-bin/Apache/LiveJournal.pm-467-    # see if we should setup a minimal scheme based on the initial part of the
dw-free/cgi-bin/Apache/LiveJournal.pm:468:    # user-agent string; FIXME: maybe this should do more than just look at the
dw-free/cgi-bin/Apache/LiveJournal.pm-469-    # initial letters?
dw-free/cgi-bin/Apache/LiveJournal.pm-470-    if (my $ua = $r->headers_in->{'User-Agent'}) {
dw-free/cgi-bin/Apache/LiveJournal.pm-471-        if (($ua =~ /^([a-z]+)/i) && $LJ::MINIMAL_USERAGENT{$1}) {
--
dw-free/cgi-bin/Apache/LiveJournal.pm-945-
dw-free/cgi-bin/Apache/LiveJournal.pm-946-        # need to redirect them to canonical version
dw-free/cgi-bin/Apache/LiveJournal.pm-947-        if ($LJ::ONLY_USER_VHOSTS && ! $LJ::DEBUG{'user_vhosts_no_old_redirect'}) {
dw-free/cgi-bin/Apache/LiveJournal.pm:948:            # FIXME: skip two redirects and send them right to __setdomsess with the right
dw-free/cgi-bin/Apache/LiveJournal.pm-949-            #        cookie-to-be-set arguments.  below is the easy/slow route.
dw-free/cgi-bin/Apache/LiveJournal.pm-950-            my $u = LJ::load_user($cuser)
dw-free/cgi-bin/Apache/LiveJournal.pm-951-                or return 404;
--
dw-free/cgi-bin/Apache/LiveJournal.pm-1022-        my $host = $r->headers_in->{"Host"};
dw-free/cgi-bin/Apache/LiveJournal.pm-1023-        unless (    $LJ::USERPIC_ROOT =~ m!^http://\Q$host\E!i
dw-free/cgi-bin/Apache/LiveJournal.pm-1024-                    || $LJ::USERPIC_ROOT_CDN && $LJ::USERPIC_ROOT_CDN =~ m!^http://\Q$host\E!i
dw-free/cgi-bin/Apache/LiveJournal.pm:1025:                    || $host eq '127.0.0.1' # FIXME: lame hack for DW config
dw-free/cgi-bin/Apache/LiveJournal.pm-1026-        ) {
dw-free/cgi-bin/Apache/LiveJournal.pm-1027-            return redir($r, "$LJ::USERPIC_ROOT/$picid/$userid");
dw-free/cgi-bin/Apache/LiveJournal.pm-1028-        }
--
dw-free/cgi-bin/Apache/LiveJournal.pm-1638-
dw-free/cgi-bin/Apache/LiveJournal.pm-1639-sub db_logger
dw-free/cgi-bin/Apache/LiveJournal.pm-1640-{
dw-free/cgi-bin/Apache/LiveJournal.pm:1641:    # FIXME: ModPerl 2.0: how to get last item, bucket brigade? ->last here bad
dw-free/cgi-bin/Apache/LiveJournal.pm-1642-    return;
dw-free/cgi-bin/Apache/LiveJournal.pm-1643-
dw-free/cgi-bin/Apache/LiveJournal.pm-1644-    my $r = shift;
--
dw-free/cgi-bin/DW.pm-32-
dw-free/cgi-bin/DW.pm-33-=cut
dw-free/cgi-bin/DW.pm-34-
dw-free/cgi-bin/DW.pm:35:# FIXME the plan is that at one point we will use File::ShareDir->dist_dir('DW')
dw-free/cgi-bin/DW.pm-36-# or some similar way to return the home directory
dw-free/cgi-bin/DW.pm-37-# See also http://bugs.dwscoalition.org/show_bug.cgi?id=1760
dw-free/cgi-bin/DW.pm-38-sub home {
--
dw-free/cgi-bin/weblib.pl-85-            "width=\"$i->{'width'}\" height=\"$i->{'height'}\" title=\"$alt\" ".
dw-free/cgi-bin/weblib.pl-86-            "alt=\"$alt\" border='0'$attrs />";
dw-free/cgi-bin/weblib.pl-87-    }
dw-free/cgi-bin/weblib.pl:88:    return "<b>XXX</b>";
dw-free/cgi-bin/weblib.pl-89-}
dw-free/cgi-bin/weblib.pl-90-
dw-free/cgi-bin/weblib.pl-91-# <LJFUNC>
--
dw-free/cgi-bin/weblib.pl-310-# </LJFUNC>
dw-free/cgi-bin/weblib.pl-311-sub error_list
dw-free/cgi-bin/weblib.pl-312-{
dw-free/cgi-bin/weblib.pl:313:    # FIXME: retrofit like bad_input above?  merge?  make aliases for each other?
dw-free/cgi-bin/weblib.pl-314-    my @errors = @_;
dw-free/cgi-bin/weblib.pl-315-    my $ret;
dw-free/cgi-bin/weblib.pl-316-    $ret .= "<?errorbar ";
--
dw-free/cgi-bin/weblib.pl-1005-                                      ));
dw-free/cgi-bin/weblib.pl-1006-
dw-free/cgi-bin/weblib.pl-1007-    if ( LJ::BetaFeatures->user_in_beta( $remote => "journaljquery" ) ) {
dw-free/cgi-bin/weblib.pl:1008:        # FIXME: figure out how to fix the saving of the qr entry stuff
dw-free/cgi-bin/weblib.pl-1009-        $ret .= qq{jQuery(function(jQ){
dw-free/cgi-bin/weblib.pl-1010-                jQ("body").append(jQ("<div id='qrdiv'></div>").html("$qrhtml").hide());
dw-free/cgi-bin/weblib.pl-1011-            });
--
dw-free/cgi-bin/weblib.pl-2485-}
dw-free/cgi-bin/weblib.pl-2486-
dw-free/cgi-bin/weblib.pl-2487-sub res_includes {
dw-free/cgi-bin/weblib.pl:2488:    # TODO: automatic dependencies from external map and/or content of files,
dw-free/cgi-bin/weblib.pl-2489-    # currently it's limited to dependencies on the order you call LJ::need_res();
dw-free/cgi-bin/weblib.pl-2490-    my $ret = "";
dw-free/cgi-bin/weblib.pl-2491-    my $do_concat = $LJ::IS_SSL ? $LJ::CONCAT_RES_SSL : $LJ::CONCAT_RES;
--
dw-free/cgi-bin/weblib.pl-3171-    my $args = LJ::eurl( $r->query_string ) || '';
dw-free/cgi-bin/weblib.pl-3172-    my $view = $r->note( 'view' ) || '';
dw-free/cgi-bin/weblib.pl-3173-
dw-free/cgi-bin/weblib.pl:3174:    # FIXME: remove argument
dw-free/cgi-bin/weblib.pl-3175-    if ( $jquery ) {
dw-free/cgi-bin/weblib.pl-3176-        $ret .= qq{
dw-free/cgi-bin/weblib.pl-3177-    <script type='text/javascript'>
--
dw-free/cgi-bin/LJ/Feed.pm-330-    $ret .= "  <generator>LiveJournal / $LJ::SITENAME</generator>\n";
dw-free/cgi-bin/LJ/Feed.pm-331-    $ret .= "  <lj:journal>" . $u->user . "</lj:journal>\n";
dw-free/cgi-bin/LJ/Feed.pm-332-    $ret .= "  <lj:journaltype>" . $u->journaltype_readable . "</lj:journaltype>\n";
dw-free/cgi-bin/LJ/Feed.pm:333:    # TODO: add 'language' field when user.lang has more useful information
dw-free/cgi-bin/LJ/Feed.pm-334-
dw-free/cgi-bin/LJ/Feed.pm-335-    if ( $hubbub ) {
dw-free/cgi-bin/LJ/Feed.pm-336-        $ret .= "  <atom10:link rel='self' href='" . $u->journal_base . "/data/rss' />\n";
--
dw-free/cgi-bin/LJ/Feed.pm-391-        # support 'podcasting' enclosures
dw-free/cgi-bin/LJ/Feed.pm-392-        $ret .= LJ::Hooks::run_hook( "pp_rss_enclosure",
dw-free/cgi-bin/LJ/Feed.pm-393-                { userid => $u->{userid}, ppid => $it->{ppid} }) if $it->{ppid};
dw-free/cgi-bin/LJ/Feed.pm:394:        # TODO: add author field with posterid's email address, respect communities
dw-free/cgi-bin/LJ/Feed.pm-395-        $ret .= "  <lj:music>" . LJ::exml($it->{music}) . "</lj:music>\n" if $it->{music};
dw-free/cgi-bin/LJ/Feed.pm-396-        $ret .= "  <lj:mood>" . LJ::exml($it->{mood}) . "</lj:mood>\n" if $it->{mood};
dw-free/cgi-bin/LJ/Feed.pm-397-        $ret .= "  <lj:security>" . LJ::exml($it->{security}) . "</lj:security>\n" if $it->{security};
--
dw-free/cgi-bin/LJ/Feed.pm-484-
dw-free/cgi-bin/LJ/Feed.pm-485-    my $posteru = LJ::load_userids( map { $_->{posterid} } @$cleanitems);
dw-free/cgi-bin/LJ/Feed.pm-486-    # output individual item blocks
dw-free/cgi-bin/LJ/Feed.pm:487:    # FIXME: use LJ::Entry->atom_entry?
dw-free/cgi-bin/LJ/Feed.pm-488-    foreach my $it (@$cleanitems)
dw-free/cgi-bin/LJ/Feed.pm-489-    {
dw-free/cgi-bin/LJ/Feed.pm-490-        my $itemid = $it->{itemid};
--
dw-free/cgi-bin/LJ/Feed.pm-651-        my $ecountry = LJ::eurl($u->{'country'});
dw-free/cgi-bin/LJ/Feed.pm-652-        $ret .= "    <ya:country dc:title=\"$ecountry\" rdf:resource=\"$LJ::SITEROOT/directorysearch?opt_sort=ut&amp;s_loc=1&amp;loc_cn=$ecountry\"/>\n" if $u->can_show_location($remote);
dw-free/cgi-bin/LJ/Feed.pm-653-        if ($u->{'city'}) {
dw-free/cgi-bin/LJ/Feed.pm:654:            my $estate = '';  # FIXME: add state.  Yandex didn't need it.
dw-free/cgi-bin/LJ/Feed.pm-655-            my $ecity = LJ::eurl($u->{'city'});
dw-free/cgi-bin/LJ/Feed.pm-656-            $ret .= "    <ya:city dc:title=\"$ecity\" rdf:resource=\"$LJ::SITEROOT/directorysearch?opt_sort=ut&amp;s_loc=1&amp;loc_cn=$ecountry&amp;loc_st=$estate&amp;loc_ci=$ecity\"/>\n" if $u->can_show_location($remote);
dw-free/cgi-bin/LJ/Feed.pm-657-       }
--
dw-free/cgi-bin/LJ/Feed.pm-823-    }
dw-free/cgi-bin/LJ/Feed.pm-824-
dw-free/cgi-bin/LJ/Feed.pm-825-    # Local site-specific content
dw-free/cgi-bin/LJ/Feed.pm:826:    # TODO: Give these hooks access to $view somehow?
dw-free/cgi-bin/LJ/Feed.pm-827-    LJ::Hooks::run_hook("yadis_service_descriptors", \$ret);
dw-free/cgi-bin/LJ/Feed.pm-828-
dw-free/cgi-bin/LJ/Feed.pm-829-    $println->('</XRD></xrds:XRDS>');
--
dw-free/cgi-bin/LJ/Feed.pm-895-               grep { $info->{pic}->{$_}->{state} eq 'N' }
dw-free/cgi-bin/LJ/Feed.pm-896-               keys %{ $info->{pic} };
dw-free/cgi-bin/LJ/Feed.pm-897-
dw-free/cgi-bin/LJ/Feed.pm:898:    # FIXME: It sucks that there are two different methods for aggregating
dw-free/cgi-bin/LJ/Feed.pm-899-    #        the information for a user's set of icons, one of which doesn't
dw-free/cgi-bin/LJ/Feed.pm-900-    #        include keywords and the other of which doesn't include pictime.
dw-free/cgi-bin/LJ/Feed.pm-901-    #        But hey, at least they both use caching.
--
dw-free/cgi-bin/LJ/Event.pm-31-#    LJ::Event::JournalNewEntry    -- a journal (user/community) has a new entry in it
dw-free/cgi-bin/LJ/Event.pm-32-#                                   ($ju,$ditemid,undef)
dw-free/cgi-bin/LJ/Event.pm-33-#    LJ::Event::JournalNewComment  -- a journal has a new comment in it
dw-free/cgi-bin/LJ/Event.pm:34:#                                   ($ju,$jtalkid)   # TODO: should probably be ($ju,$jitemid,$jtalkid)
dw-free/cgi-bin/LJ/Event.pm-35-#    LJ::Event::JournalNewComment::TopLevel -- a journal has a new top-level comment in it
dw-free/cgi-bin/LJ/Event.pm-36-#                                   ($ju,$jitemid)
dw-free/cgi-bin/LJ/Event.pm-37-#    LJ::Event::AddedToCircle      -- user $fromuserid added $u to their circle; $actionid is 1 (trust) or 2 (watch)
--
dw-free/cgi-bin/LJ/Event.pm-301-    my $and_enabled = "AND flags & " .
dw-free/cgi-bin/LJ/Event.pm-302-        (LJ::Subscription->INACTIVE | LJ::Subscription->DISABLED) . " = 0";
dw-free/cgi-bin/LJ/Event.pm-303-
dw-free/cgi-bin/LJ/Event.pm:304:    # TODO: gearman parallelize:
dw-free/cgi-bin/LJ/Event.pm-305-    foreach my $cid ($cid ? ($cid) : @LJ::CLUSTERS) {
dw-free/cgi-bin/LJ/Event.pm-306-        # we got enough subs
dw-free/cgi-bin/LJ/Event.pm-307-        last if $limit && $limit_remain <= 0;
--
dw-free/cgi-bin/LJ/Event.pm-333-
dw-free/cgi-bin/LJ/Event.pm-334-        # then we find wildcard matches.
dw-free/cgi-bin/LJ/Event.pm-335-        if (@wildcards_from) {
dw-free/cgi-bin/LJ/Event.pm:336:            # FIXME: journals are only on one cluster! split jidlist based on cluster
dw-free/cgi-bin/LJ/Event.pm-337-            my $jidlist = join(",", @wildcards_from);
dw-free/cgi-bin/LJ/Event.pm-338-
dw-free/cgi-bin/LJ/Event.pm-339-            my $sth = $udbh->prepare(
--
dw-free/cgi-bin/LJ/Event.pm-388-# instance method
dw-free/cgi-bin/LJ/Event.pm-389-sub has_subscriptions {
dw-free/cgi-bin/LJ/Event.pm-390-    my $self = shift;
dw-free/cgi-bin/LJ/Event.pm:391:    return 1; # FIXME: consult "has_subs" table
dw-free/cgi-bin/LJ/Event.pm-392-}
dw-free/cgi-bin/LJ/Event.pm-393-
dw-free/cgi-bin/LJ/Event.pm-394-sub get_subscriptions {
--
dw-free/cgi-bin/LJ/SynSuck.pm-364-        # if we see there's some image or link tag, to save us some work if it's
dw-free/cgi-bin/LJ/SynSuck.pm-365-        # unnecessary (the common case)
dw-free/cgi-bin/LJ/SynSuck.pm-366-        if ($it->{'text'} =~ /<(?:img|a)\b/i) {
dw-free/cgi-bin/LJ/SynSuck.pm:367:            # TODO: support XML Base?  http://www.w3.org/TR/xmlbase/
dw-free/cgi-bin/LJ/SynSuck.pm-368-            my $base_href = $it->{'link'} || $synurl;
dw-free/cgi-bin/LJ/SynSuck.pm-369-            LJ::CleanHTML::resolve_relative_urls(\$it->{'text'}, $base_href);
dw-free/cgi-bin/LJ/SynSuck.pm-370-        }
--
dw-free/cgi-bin/LJ/SynSuck.pm-510-    my $r_etag = $res->header('ETag');
dw-free/cgi-bin/LJ/SynSuck.pm-511-
dw-free/cgi-bin/LJ/SynSuck.pm-512-    # decide when to poll next (in minutes).
dw-free/cgi-bin/LJ/SynSuck.pm:513:    # FIXME: this is super lame.  (use hints in RSS file!)
dw-free/cgi-bin/LJ/SynSuck.pm-514-    my $int = $newcount ? 30 : 60;
dw-free/cgi-bin/LJ/SynSuck.pm-515-    my $status = $newcount ? "ok" : "nonew";
dw-free/cgi-bin/LJ/SynSuck.pm-516-    my $updatenew = $newcount ? ", lastnew=NOW()" : "";
--
dw-free/cgi-bin/LJ/SynSuck.pm-540-    return unless $uid && $topicurl && $huburl;
dw-free/cgi-bin/LJ/SynSuck.pm-541-
dw-free/cgi-bin/LJ/SynSuck.pm-542-    # bail if topicurl and huburl don't pass some sanity checks
dw-free/cgi-bin/LJ/SynSuck.pm:543:    # FIXME: why isn't there an LJ::valid_url function?  we do this sort of check in
dw-free/cgi-bin/LJ/SynSuck.pm-544-    # approximately 13,341,394 places...
dw-free/cgi-bin/LJ/SynSuck.pm-545-    return unless $topicurl =~ /^https?:/ &&
dw-free/cgi-bin/LJ/SynSuck.pm-546-                  $huburl   =~ /^https?:/;
--
dw-free/cgi-bin/LJ/SynSuck.pm-580-
dw-free/cgi-bin/LJ/SynSuck.pm-581-# called by the hubbub bml when someone posts something to us and says that feeds
dw-free/cgi-bin/LJ/SynSuck.pm-582-# have been updated.
dw-free/cgi-bin/LJ/SynSuck.pm:583:# FIXME: they actually give us enough data to update our feeds with the post
dw-free/cgi-bin/LJ/SynSuck.pm-584-# content, but for now, we're just scheduling a synsuck job to go update a feed.
dw-free/cgi-bin/LJ/SynSuck.pm-585-# this is suboptimal.  we have to implement the hub.challenge parameter and
dw-free/cgi-bin/LJ/SynSuck.pm-586-# post our subscriptions using HTTPS before we can do the "proper" way, though.
--
dw-free/cgi-bin/LJ/SynSuck.pm-591-    my $sclient = LJ::theschwartz() or die;
dw-free/cgi-bin/LJ/SynSuck.pm-592-    my $dbh = LJ::get_db_writer() or die;
dw-free/cgi-bin/LJ/SynSuck.pm-593-
dw-free/cgi-bin/LJ/SynSuck.pm:594:    # FIXME: this probably will explode horribly with aggregated content, so as
dw-free/cgi-bin/LJ/SynSuck.pm-595-    # soon as that becomes supported somewhere, we need to fix this
dw-free/cgi-bin/LJ/SynSuck.pm-596-
dw-free/cgi-bin/LJ/SynSuck.pm-597-    # try to parse with our feed parser
--
dw-free/cgi-bin/LJ/Faq.pm-21-# Initially built in a hackathon, so this is only moderately awesome
dw-free/cgi-bin/LJ/Faq.pm-22-# -- whitaker 2006/06/23
dw-free/cgi-bin/LJ/Faq.pm-23-
dw-free/cgi-bin/LJ/Faq.pm:24:# FIXME: singletons?
dw-free/cgi-bin/LJ/Faq.pm-25-
dw-free/cgi-bin/LJ/Faq.pm-26-# <LJFUNC>
dw-free/cgi-bin/LJ/Faq.pm-27-# name: LJ::Faq::new
--
dw-free/cgi-bin/LJ/Faq.pm-42-
dw-free/cgi-bin/LJ/Faq.pm-43-    $self->{$_} = delete $opts{$_}
dw-free/cgi-bin/LJ/Faq.pm-44-        foreach qw(faqid question summary answer faqcat lastmoduserid sortorder lastmodtime unixmodtime);
dw-free/cgi-bin/LJ/Faq.pm:45:    # FIXME: shouldn't that be the root language of the faq domain instead?
dw-free/cgi-bin/LJ/Faq.pm-46-    $self->{lang} = delete $opts{lang} || $LJ::DEFAULT_LANG;
dw-free/cgi-bin/LJ/Faq.pm-47-
dw-free/cgi-bin/LJ/Faq.pm-48-    croak("unknown parameters: " . join(", ", keys %opts))
--
dw-free/cgi-bin/LJ/Faq.pm-76-        or die "Unable to contact global reader";
dw-free/cgi-bin/LJ/Faq.pm-77-
dw-free/cgi-bin/LJ/Faq.pm-78-    my $faq;
dw-free/cgi-bin/LJ/Faq.pm:79:    # FIXME: shouldn't that be the root language of the faq domain instead?
dw-free/cgi-bin/LJ/Faq.pm-80-    if ($lang eq $LJ::DEFAULT_LANG) {
dw-free/cgi-bin/LJ/Faq.pm-81-        my $f = $dbr->selectrow_hashref
dw-free/cgi-bin/LJ/Faq.pm-82-            ("SELECT faqid, question, summary, answer, faqcat, lastmoduserid, ".
--
dw-free/cgi-bin/LJ/Faq.pm-157-        push @faqs, $class->new(%$f);
dw-free/cgi-bin/LJ/Faq.pm-158-    }
dw-free/cgi-bin/LJ/Faq.pm-159-
dw-free/cgi-bin/LJ/Faq.pm:160:    # FIXME: shouldn't that be the root language of the faq domain instead?
dw-free/cgi-bin/LJ/Faq.pm-161-    if ($lang ne $LJ::DEFAULT_LANG) {
dw-free/cgi-bin/LJ/Faq.pm-162-        $class->lang_update_in_place($lang => @faqs);
dw-free/cgi-bin/LJ/Faq.pm-163-    }
--
dw-free/cgi-bin/LJ/Faq.pm-291-
dw-free/cgi-bin/LJ/Faq.pm-292-        $_->{summary}  = $LJ::_T_FAQ_SUMMARY_OVERRIDE if $LJ::_T_FAQ_SUMMARY_OVERRIDE;
dw-free/cgi-bin/LJ/Faq.pm-293-
dw-free/cgi-bin/LJ/Faq.pm:294:        # FIXME?: the join can probably be avoided, eg by using something like
dw-free/cgi-bin/LJ/Faq.pm-295-        # LJ::Lang::get_chgtime_unix for time of last change and a single-table
dw-free/cgi-bin/LJ/Faq.pm-296-        # "SELECT userid FROM ml_text WHERE t.lnid=? AND t.dmid=? AND t.itid=?
dw-free/cgi-bin/LJ/Faq.pm-297-        # ORDER BY t.txtid DESC LIMIT 1" for userid.
--
dw-free/cgi-bin/LJ/Faq.pm-475-
dw-free/cgi-bin/LJ/Faq.pm-476-    # Render FAQs, leaving [[faqtitle:#]] intact. This is to let users search
dw-free/cgi-bin/LJ/Faq.pm-477-    # for user interface strings without FAQ titles getting in the way.
dw-free/cgi-bin/LJ/Faq.pm:478:    # FIXME: This also expands [[username(:foo)?]] and [[journalurl(:bar)?]].
dw-free/cgi-bin/LJ/Faq.pm-479-    # Should it?
dw-free/cgi-bin/LJ/Faq.pm-480-    $class->render_in_place({skipfaqs => 1, lang => $lang, user => $user, url => $user_url}, @faqs)
dw-free/cgi-bin/LJ/Faq.pm-481-        or die "initial FAQ rendering failed";
--
dw-free/cgi-bin/LJ/S2.pm-41-use DW::SiteScheme;
dw-free/cgi-bin/LJ/S2.pm-42-use LJ::PageStats;
dw-free/cgi-bin/LJ/S2.pm-43-
dw-free/cgi-bin/LJ/S2.pm:44:# TEMP HACK
dw-free/cgi-bin/LJ/S2.pm-45-sub get_s2_reader {
dw-free/cgi-bin/LJ/S2.pm-46-    return LJ::get_dbh("s2slave", "slave", "master");
dw-free/cgi-bin/LJ/S2.pm-47-}
--
dw-free/cgi-bin/LJ/S2.pm-277-        my $status = $ctx->[S2::SCRATCH]->{'status'} || 200;
dw-free/cgi-bin/LJ/S2.pm-278-        $r->status($status);
dw-free/cgi-bin/LJ/S2.pm-279-        $r->content_type($ctx->[S2::SCRATCH]->{'ctype'} || $ctype);
dw-free/cgi-bin/LJ/S2.pm:280:        # FIXME: not necessary in ModPerl 2.0?
dw-free/cgi-bin/LJ/S2.pm-281-        #$r->send_http_header();
dw-free/cgi-bin/LJ/S2.pm-282-    };
dw-free/cgi-bin/LJ/S2.pm-283-
--
dw-free/cgi-bin/LJ/S2.pm-786-        push @layers, $style{$_} if $style{$_};
dw-free/cgi-bin/LJ/S2.pm-787-    }
dw-free/cgi-bin/LJ/S2.pm-788-
dw-free/cgi-bin/LJ/S2.pm:789:    # TODO: memcache this.  only make core S2 (which uses the DB) load
dw-free/cgi-bin/LJ/S2.pm-790-    # when we can't get all the s2compiled stuff from memcache.
dw-free/cgi-bin/LJ/S2.pm-791-    # compare s2styles.modtime with s2compiled.comptime to see if memcache
dw-free/cgi-bin/LJ/S2.pm-792-    # version is accurate or not.
--
dw-free/cgi-bin/LJ/S2.pm-2005-    }
dw-free/cgi-bin/LJ/S2.pm-2006-    $e->{metadata}->{groups} = $group_names if $group_names;
dw-free/cgi-bin/LJ/S2.pm-2007-
dw-free/cgi-bin/LJ/S2.pm:2008:    # TODO: Populate this field more intelligently later, but for now this will
dw-free/cgi-bin/LJ/S2.pm-2009-    #   hopefully disuade people from hardcoding logic like this into their S2
dw-free/cgi-bin/LJ/S2.pm-2010-    #   layers when they do weird parsing/manipulation of the text member in
dw-free/cgi-bin/LJ/S2.pm-2011-    #   untrusted layers.
--
dw-free/cgi-bin/LJ/S2.pm-2453-        'is_heading' => $link->{'url'} ? 0 : 1,
dw-free/cgi-bin/LJ/S2.pm-2454-        'url' => LJ::ehtml($link->{'url'}),
dw-free/cgi-bin/LJ/S2.pm-2455-        'title' => LJ::ehtml($link->{'title'}),
dw-free/cgi-bin/LJ/S2.pm:2456:        'children' => $link->{'children'} || [], # TODO: implement parent-child relationships
dw-free/cgi-bin/LJ/S2.pm-2457-    };
dw-free/cgi-bin/LJ/S2.pm-2458-}
dw-free/cgi-bin/LJ/S2.pm-2459-
--
dw-free/cgi-bin/LJ/S2.pm-2483-    push @$lks, qw(manage_membership trust watch post_entry track message);
dw-free/cgi-bin/LJ/S2.pm-2484-    push @$lks, 'tell_friend' if LJ::is_enabled('tellafriend');
dw-free/cgi-bin/LJ/S2.pm-2485-
dw-free/cgi-bin/LJ/S2.pm:2486:    # TODO: Figure out some way to use the userinfo_linkele hook here?
dw-free/cgi-bin/LJ/S2.pm-2487-
dw-free/cgi-bin/LJ/S2.pm-2488-    return $o;
dw-free/cgi-bin/LJ/S2.pm-2489-}
--
dw-free/cgi-bin/LJ/S2.pm-2886-sub weekdays
dw-free/cgi-bin/LJ/S2.pm-2887-{
dw-free/cgi-bin/LJ/S2.pm-2888-    my ($ctx) = @_;
dw-free/cgi-bin/LJ/S2.pm:2889:    return [ 1..7 ];  # FIXME: make this conditionally monday first: [ 2..7, 1 ]
dw-free/cgi-bin/LJ/S2.pm-2890-}
dw-free/cgi-bin/LJ/S2.pm-2891-
dw-free/cgi-bin/LJ/S2.pm-2892-sub journal_current_datetime {
--
dw-free/cgi-bin/LJ/S2.pm-3913-
dw-free/cgi-bin/LJ/S2.pm-3914-    # display subject as-is (cleaned but not wrapped in a link)
dw-free/cgi-bin/LJ/S2.pm-3915-    # if subject has a link and we are on a full comment/single entry view and don't need to click through
dw-free/cgi-bin/LJ/S2.pm:3916:    # TODO: how about other HTML tags?
dw-free/cgi-bin/LJ/S2.pm-3917-    if ( $subject =~ /href/ && ( $this->{full} || $LJ::S2::CURR_PAGE->{view} eq "reply" ||  $LJ::S2::CURR_PAGE->{view} eq "entry" ) ) {
dw-free/cgi-bin/LJ/S2.pm-3918-        return $subject;
dw-free/cgi-bin/LJ/S2.pm-3919-    } else {
--
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-79-    return "A status update about your import."
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-80-        if $status eq 'status';
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-81-
dw-free/cgi-bin/LJ/Event/ImportStatus.pm:82:# FIXME: strip these strings into status strings
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-83-    my $item_has = {
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-84-        0 => 'entries have',
dw-free/cgi-bin/LJ/Event/ImportStatus.pm-85-        1 => 'tags have',
--
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-479-
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-480-    # watching a specific journal
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-481-    if ($sarg1 == 0 && $sarg2 == 0) {
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm:482:        # TODO: friend group filtering in case of $sjid == 0 when
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-483-        # a subprop is filtering on a friend group
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-484-        return 1;
dw-free/cgi-bin/LJ/Event/JournalNewComment.pm-485-    }
--
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-66-        my $old_username    = $opts->{old_username};
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-67-        my $userid          = $u->{userid};
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-68-
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm:69:        # TODO: check is $u a user object?
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-70-        die "Missing credentials" unless $ip && $action && $old_username;
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-71-
dw-free/cgi-bin/LJ/Event/SecurityAttributeChanged.pm-72-        my $dbh = LJ::get_db_writer($u);
--
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-39-
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-40-    my $ditemid = $self->arg1;
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-41-    my $evtju = $self->event_journal;
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm:42:    return 0 unless $evtju && $ditemid; # TODO: throw error?
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-43-
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-44-    my $entry = LJ::Entry->new($evtju, ditemid => $ditemid);
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm:45:    return 0 unless $entry && $entry->valid; # TODO: throw error?
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-46-    return 0 unless $entry->visible_to($subscr->owner);
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-47-
dw-free/cgi-bin/LJ/Event/JournalNewEntry.pm-48-    # filter by tag?
--
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-37-    return LJ::Lang::ml( 'event.xpost.success' );
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-38-}
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-39-
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm:40:# FIXME make this more useful, like include a link to the crosspost
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-41-sub content {
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-42-    my ($self) = @_;
dw-free/cgi-bin/LJ/Event/XPostSuccess.pm-43-    if ( $self->account ) {
--
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-27-    return $class->SUPER::new($u, $msgid, $other_u->{userid});
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-28-}
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-29-
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm:30:# TODO Should this return 1?
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-31-sub is_common { 1 }
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-32-
dw-free/cgi-bin/LJ/Event/UserMessageSent.pm-33-sub load_message {
--
dw-free/cgi-bin/LJ/Links.pm-62-    # fix up the data structure
dw-free/cgi-bin/LJ/Links.pm-63-    foreach (@$linkobj) {
dw-free/cgi-bin/LJ/Links.pm-64-
dw-free/cgi-bin/LJ/Links.pm:65:        # TODO: build child relationships
dw-free/cgi-bin/LJ/Links.pm-66-        #       and store in $_->{'children'}
dw-free/cgi-bin/LJ/Links.pm-67-
dw-free/cgi-bin/LJ/Links.pm-68-        # ordernum/parentnum are only exposed via the
--
dw-free/cgi-bin/LJ/Links.pm-152-        $post->{"link_${num}_url"} = $url;
dw-free/cgi-bin/LJ/Links.pm-153-        push @$linkobj, { 'title' => $title, 'url' => $url };
dw-free/cgi-bin/LJ/Links.pm-154-
dw-free/cgi-bin/LJ/Links.pm:155:        # TODO: build child relationships
dw-free/cgi-bin/LJ/Links.pm-156-        #       push @{$linkobj->[$parentnum-1]->{'children'}}, $myself
dw-free/cgi-bin/LJ/Links.pm-157-    }
dw-free/cgi-bin/LJ/Links.pm-158-
--
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-51-
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-52-sub _make_tempfile {
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-53-    my $self = shift;
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm:54:    $self->{tempfh} = File::Temp->new(TEMPLATE => 'incemailXXXXX',
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-55-                                      DIR      => File::Spec->tmpdir,
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-56-                                      SUFFIX   => ".ieh$self->{id}");
dw-free/cgi-bin/LJ/IncomingEmailHandle.pm-57-}
--
dw-free/cgi-bin/LJ/Global/Defaults.pm-142-        }
dw-free/cgi-bin/LJ/Global/Defaults.pm-143-    }
dw-free/cgi-bin/LJ/Global/Defaults.pm-144-
dw-free/cgi-bin/LJ/Global/Defaults.pm:145:    # FIXME: should forcibly limit userlinks to 255 (tinyint)
dw-free/cgi-bin/LJ/Global/Defaults.pm-146-
dw-free/cgi-bin/LJ/Global/Defaults.pm-147-    # Send community invites from the admin address unless otherwise specified
dw-free/cgi-bin/LJ/Global/Defaults.pm-148-    $COMMUNITY_EMAIL ||= $ADMIN_EMAIL;
--
dw-free/cgi-bin/LJ/Global/Defaults.pm-329-    $LJ::LIB_RES_PRIORITY = 3;
dw-free/cgi-bin/LJ/Global/Defaults.pm-330-    $LJ::SCHEME_RES_PRIORITY = 2;
dw-free/cgi-bin/LJ/Global/Defaults.pm-331-
dw-free/cgi-bin/LJ/Global/Defaults.pm:332:    # FIXME: remove the need for this, it's a hack of a hack of a hack
dw-free/cgi-bin/LJ/Global/Defaults.pm-333-    # it used to be that site scheme pages were called later than page-level CSS
dw-free/cgi-bin/LJ/Global/Defaults.pm-334-    # so page-level CSS was written with that assumption, and overrode some colors
dw-free/cgi-bin/LJ/Global/Defaults.pm-335-    # now that site scheme pages are called earlier than page-level CSS
--
dw-free/cgi-bin/LJ/Global/Defaults.pm-339-
dw-free/cgi-bin/LJ/Global/Defaults.pm-340-    # we only support the minifaction of a subset of pre-generated files
dw-free/cgi-bin/LJ/Global/Defaults.pm-341-    # so for now, let's just configure which files to use a minified version of
dw-free/cgi-bin/LJ/Global/Defaults.pm:342:    # TODO: minify as part of the build process, and remove this hardcoding
dw-free/cgi-bin/LJ/Global/Defaults.pm-343-    %LJ::MINIFY = (
dw-free/cgi-bin/LJ/Global/Defaults.pm-344-        "js/jquery/jquery-1.5.js"       => "js/jquery/jquery-1.5.min.js",
dw-free/cgi-bin/LJ/Global/Defaults.pm-345-        "js/jquery/jquery.ui.core.js"   => "js/jquery/jquery.ui.core.min.js",
--
dw-free/cgi-bin/LJ/CleanHTML.pm-580-
dw-free/cgi-bin/LJ/CleanHTML.pm-581-                        # looks good, render
dw-free/cgi-bin/LJ/CleanHTML.pm-582-                        if ( $opts->{textonly} ) {
dw-free/cgi-bin/LJ/CleanHTML.pm:583:                            # FIXME: need a textonly way of identifying users better?  "user@LJ"?
dw-free/cgi-bin/LJ/CleanHTML.pm-584-                            $newdata .= $user;
dw-free/cgi-bin/LJ/CleanHTML.pm-585-                        } else {
dw-free/cgi-bin/LJ/CleanHTML.pm-586-                            $newdata .= $ext_u->ljuser_display( no_ljuser_class => $to_external_site );
--
dw-free/cgi-bin/LJ/CleanHTML.pm-910-                        # that are allowed (by still being in %$hash after cleaning)
dw-free/cgi-bin/LJ/CleanHTML.pm-911-                        foreach (@$attrs) {
dw-free/cgi-bin/LJ/CleanHTML.pm-912-                            unless (LJ::is_ascii($hash->{$_})) {
dw-free/cgi-bin/LJ/CleanHTML.pm:913:                                # FIXME: this is so ghetto.  make faster.  make generic.
dw-free/cgi-bin/LJ/CleanHTML.pm-914-                                # HTML::Parser decodes entities for us (which is good)
dw-free/cgi-bin/LJ/CleanHTML.pm-915-                                # but in Perl 5.8 also includes the "poison" SvUTF8
dw-free/cgi-bin/LJ/CleanHTML.pm-916-                                # flag on the scalar it returns, thus poisoning the
--
dw-free/cgi-bin/LJ/User.pm-278-    }
dw-free/cgi-bin/LJ/User.pm-279-
dw-free/cgi-bin/LJ/User.pm-280-    # populate some default friends groups
dw-free/cgi-bin/LJ/User.pm:281:    # FIXME(mark): this should probably be removed or refactored, especially
dw-free/cgi-bin/LJ/User.pm-282-    # since editfriendgroups is dying/dead
dw-free/cgi-bin/LJ/User.pm-283-#    LJ::do_request(
dw-free/cgi-bin/LJ/User.pm-284-#                   {
--
dw-free/cgi-bin/LJ/User.pm-338-
dw-free/cgi-bin/LJ/User.pm-339-sub delete_and_purge_completely {
dw-free/cgi-bin/LJ/User.pm-340-    my $u = shift;
dw-free/cgi-bin/LJ/User.pm:341:    # FIXME: delete from user tables
dw-free/cgi-bin/LJ/User.pm:342:    # FIXME: delete from global tables
dw-free/cgi-bin/LJ/User.pm-343-    my $dbh = LJ::get_db_writer();
dw-free/cgi-bin/LJ/User.pm-344-
dw-free/cgi-bin/LJ/User.pm-345-    my @tables = qw(user useridmap reluser priv_map infohistory email password);
--
dw-free/cgi-bin/LJ/User.pm-1041-    my $memkey = [$u->userid, "timeactive:" . $u->userid];
dw-free/cgi-bin/LJ/User.pm-1042-    my $active;
dw-free/cgi-bin/LJ/User.pm-1043-    unless (defined($active = LJ::MemCache::get($memkey))) {
dw-free/cgi-bin/LJ/User.pm:1044:        # FIXME: die if unable to get handle? This was left verbatim from
dw-free/cgi-bin/LJ/User.pm-1045-        # refactored code.
dw-free/cgi-bin/LJ/User.pm-1046-        my $dbcr = LJ::get_cluster_def_reader($u) or return 0;
dw-free/cgi-bin/LJ/User.pm-1047-        $active = $dbcr->selectrow_array("SELECT timeactive FROM clustertrack2 ".
--
dw-free/cgi-bin/LJ/User.pm-1397-
dw-free/cgi-bin/LJ/User.pm-1398-
dw-free/cgi-bin/LJ/User.pm-1399-sub last_transition {
dw-free/cgi-bin/LJ/User.pm:1400:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-1401-    my ($u, $what) = @_;
dw-free/cgi-bin/LJ/User.pm-1402-    croak "invalid user object" unless LJ::isu($u);
dw-free/cgi-bin/LJ/User.pm-1403-
--
dw-free/cgi-bin/LJ/User.pm-1467-
dw-free/cgi-bin/LJ/User.pm-1468-
dw-free/cgi-bin/LJ/User.pm-1469-sub note_transition {
dw-free/cgi-bin/LJ/User.pm:1470:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-1471-    my ($u, $what, $from, $to) = @_;
dw-free/cgi-bin/LJ/User.pm-1472-    croak "invalid user object" unless LJ::isu($u);
dw-free/cgi-bin/LJ/User.pm-1473-
--
dw-free/cgi-bin/LJ/User.pm-1722-
dw-free/cgi-bin/LJ/User.pm-1723-
dw-free/cgi-bin/LJ/User.pm-1724-sub transition_list {
dw-free/cgi-bin/LJ/User.pm:1725:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-1726-    my ($u, $what) = @_;
dw-free/cgi-bin/LJ/User.pm-1727-    croak "invalid user object" unless LJ::isu($u);
dw-free/cgi-bin/LJ/User.pm-1728-
dw-free/cgi-bin/LJ/User.pm-1729-    my $dbh = LJ::get_db_writer()
dw-free/cgi-bin/LJ/User.pm-1730-        or die "unable to contact global db master";
dw-free/cgi-bin/LJ/User.pm-1731-
dw-free/cgi-bin/LJ/User.pm:1732:    # FIXME: return list of transition object singleton instances?
dw-free/cgi-bin/LJ/User.pm-1733-    my @list = ();
dw-free/cgi-bin/LJ/User.pm-1734-    my $sth = $dbh->prepare("SELECT time, `before`, `after` " .
dw-free/cgi-bin/LJ/User.pm-1735-                            "FROM usertrans WHERE userid=? AND what=?");
--
dw-free/cgi-bin/LJ/User.pm-1752-
dw-free/cgi-bin/LJ/User.pm-1753-sub uncache_prop {
dw-free/cgi-bin/LJ/User.pm-1754-    my ($u, $name) = @_;
dw-free/cgi-bin/LJ/User.pm:1755:    my $prop = LJ::get_prop("user", $name) or die; # FIXME: use exceptions
dw-free/cgi-bin/LJ/User.pm-1756-    my $userid = $u->userid;
dw-free/cgi-bin/LJ/User.pm-1757-    LJ::MemCache::delete( [$userid, "uprop:$userid:$prop->{id}"] );
dw-free/cgi-bin/LJ/User.pm-1758-    delete $u->{$name};
--
dw-free/cgi-bin/LJ/User.pm-1783-
dw-free/cgi-bin/LJ/User.pm-1784-# format unixtimestamp according to the user's timezone setting
dw-free/cgi-bin/LJ/User.pm-1785-sub format_time {
dw-free/cgi-bin/LJ/User.pm:1786:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-1787-    my $u = shift;
dw-free/cgi-bin/LJ/User.pm-1788-    my $time = shift;
dw-free/cgi-bin/LJ/User.pm-1789-
--
dw-free/cgi-bin/LJ/User.pm-2051-
dw-free/cgi-bin/LJ/User.pm-2052-
dw-free/cgi-bin/LJ/User.pm-2053-sub can_show_onlinestatus {
dw-free/cgi-bin/LJ/User.pm:2054:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-2055-    my $u = shift;
dw-free/cgi-bin/LJ/User.pm-2056-    my $remote = shift;
dw-free/cgi-bin/LJ/User.pm-2057-    croak "invalid user object passed"
--
dw-free/cgi-bin/LJ/User.pm-3561-
dw-free/cgi-bin/LJ/User.pm-3562-    # would this transaction go over the limit?
dw-free/cgi-bin/LJ/User.pm-3563-    if ($sum + $count > $opp) {
dw-free/cgi-bin/LJ/User.pm:3564:        # FIXME: optionally log to rateabuse, unless caller is doing it
dw-free/cgi-bin/LJ/User.pm-3565-        # themselves somehow, like with the "loginstall" table.
dw-free/cgi-bin/LJ/User.pm-3566-        return 0;
dw-free/cgi-bin/LJ/User.pm-3567-    }
--
dw-free/cgi-bin/LJ/User.pm-3727-
dw-free/cgi-bin/LJ/User.pm-3728-########################################################################
dw-free/cgi-bin/LJ/User.pm-3729-### 11. Birthdays and Age-Related Functions
dw-free/cgi-bin/LJ/User.pm:3730:###   FIXME: Some of these may be outdated when we remove under-13 accounts.
dw-free/cgi-bin/LJ/User.pm-3731-
dw-free/cgi-bin/LJ/User.pm-3732-=head2 Birthdays and Age-Related Functions
dw-free/cgi-bin/LJ/User.pm-3733-=cut
--
dw-free/cgi-bin/LJ/User.pm-4781-#           'start_date' - UTC date after which to look for match
dw-free/cgi-bin/LJ/User.pm-4782-#           'end_date' - UTC date before which to look for match
dw-free/cgi-bin/LJ/User.pm-4783-#           'return' - if 'count' just return the count
dw-free/cgi-bin/LJ/User.pm:4784:#           FIXME: Add caching?
dw-free/cgi-bin/LJ/User.pm-4785-# </LJFUNC>
dw-free/cgi-bin/LJ/User.pm-4786-sub get_post_ids {
dw-free/cgi-bin/LJ/User.pm-4787-    my ($u, %opts) = @_;
--
dw-free/cgi-bin/LJ/User.pm-4907-    foreach my $ri (@recent) {
dw-free/cgi-bin/LJ/User.pm-4908-        my $entry = LJ::Entry->new($u, jitemid => $ri->{itemid});
dw-free/cgi-bin/LJ/User.pm-4909-        push @objs, $entry;
dw-free/cgi-bin/LJ/User.pm:4910:        # FIXME: populate the $entry with security/posterid/alldatepart/ownerid/rlogtime
dw-free/cgi-bin/LJ/User.pm-4911-    }
dw-free/cgi-bin/LJ/User.pm-4912-    return @objs;
dw-free/cgi-bin/LJ/User.pm-4913-}
--
dw-free/cgi-bin/LJ/User.pm-4967-    if (length $old && $draft =~ /^\Q$old\E(.+)/s) {
dw-free/cgi-bin/LJ/User.pm-4968-        my $new = $1;
dw-free/cgi-bin/LJ/User.pm-4969-        my $appending = sub {
dw-free/cgi-bin/LJ/User.pm:4970:            my $prop = LJ::get_prop("user", "entry_draft") or die; # FIXME: use exceptions
dw-free/cgi-bin/LJ/User.pm-4971-            my $rv = $u->do("UPDATE userpropblob SET value = CONCAT(value, ?) WHERE userid=? AND upropid=? AND LENGTH(value)=?",
dw-free/cgi-bin/LJ/User.pm-4972-                            undef, $new, $u->userid, $prop->{id}, length $old);
dw-free/cgi-bin/LJ/User.pm-4973-            return 0 unless $rv > 0;
--
dw-free/cgi-bin/LJ/User.pm-4977-        push @methods, [ "append", $appending, 40 + length $new ];
dw-free/cgi-bin/LJ/User.pm-4978-    }
dw-free/cgi-bin/LJ/User.pm-4979-
dw-free/cgi-bin/LJ/User.pm:4980:    # FIXME: prepending/middle insertion (the former being just the latter), as
dw-free/cgi-bin/LJ/User.pm-4981-    # well as appending, wihch we could then get rid of
dw-free/cgi-bin/LJ/User.pm-4982-
dw-free/cgi-bin/LJ/User.pm-4983-    # try the methods in increasing order
--
dw-free/cgi-bin/LJ/User.pm-5072-
dw-free/cgi-bin/LJ/User.pm-5073-# returns whether or not the user is online on jabber
dw-free/cgi-bin/LJ/User.pm-5074-sub jabber_is_online {
dw-free/cgi-bin/LJ/User.pm:5075:    # FIXME: this function is unused as of Aug 2009 - kareila
dw-free/cgi-bin/LJ/User.pm-5076-    my $u = shift;
dw-free/cgi-bin/LJ/User.pm-5077-
dw-free/cgi-bin/LJ/User.pm-5078-    return keys %{LJ::Jabber::Presence->get_resources($u)} ? 1 : 0;
--
dw-free/cgi-bin/LJ/User.pm-5117-
dw-free/cgi-bin/LJ/User.pm-5118-    my @resources = keys %{LJ::Jabber::Presence->get_resources($self)} or return 0;
dw-free/cgi-bin/LJ/User.pm-5119-
dw-free/cgi-bin/LJ/User.pm:5120:    my $res = $resources[0] or return 0; # FIXME: pick correct server based on priority?
dw-free/cgi-bin/LJ/User.pm-5121-    my $pres = LJ::Jabber::Presence->new($self, $res) or return 0;
dw-free/cgi-bin/LJ/User.pm-5122-    my $ip = $LJ::JABBER_SERVER_IP || '127.0.0.1';
dw-free/cgi-bin/LJ/User.pm-5123-
--
dw-free/cgi-bin/LJ/User.pm-5961-
dw-free/cgi-bin/LJ/User.pm-5962-# interim solution while legacy/ESN notifications are both happening:
dw-free/cgi-bin/LJ/User.pm-5963-# checks possible subscriptions to see if user will get an ESN notification
dw-free/cgi-bin/LJ/User.pm:5964:# THIS IS TEMPORARY. FIXME. Should only be called by talklib.
dw-free/cgi-bin/LJ/User.pm-5965-# params: journal, arg1 (entry ditemid), arg2 (comment talkid)
dw-free/cgi-bin/LJ/User.pm-5966-sub gets_notified {
dw-free/cgi-bin/LJ/User.pm-5967-    my ($u, %params) = @_;
--
dw-free/cgi-bin/LJ/User.pm-7023-Returns true if the userpicmap keyword mappings have a mapid column ( dversion 9 or higher )
dw-free/cgi-bin/LJ/User.pm-7024-
dw-free/cgi-bin/LJ/User.pm-7025-=cut
dw-free/cgi-bin/LJ/User.pm:7026:# FIXME: This probably should be userpics_use_mapid
dw-free/cgi-bin/LJ/User.pm-7027-sub userpic_have_mapid {
dw-free/cgi-bin/LJ/User.pm-7028-    return $_[0]->dversion >= 9;
dw-free/cgi-bin/LJ/User.pm-7029-}
--
dw-free/cgi-bin/LJ/User.pm-7073-
dw-free/cgi-bin/LJ/User.pm-7074-
dw-free/cgi-bin/LJ/User.pm-7075-########################################################################
dw-free/cgi-bin/LJ/User.pm:7076:###  99B. Deprecated (FIXME: we shouldn't need these)
dw-free/cgi-bin/LJ/User.pm-7077-
dw-free/cgi-bin/LJ/User.pm-7078-
dw-free/cgi-bin/LJ/User.pm-7079-# THIS IS DEPRECATED DO NOT USE
--
dw-free/cgi-bin/LJ/User.pm-7083-}
dw-free/cgi-bin/LJ/User.pm-7084-
dw-free/cgi-bin/LJ/User.pm-7085-
dw-free/cgi-bin/LJ/User.pm:7086:# FIXME: Needs updating for WTF
dw-free/cgi-bin/LJ/User.pm-7087-sub opt_showmutualfriends {
dw-free/cgi-bin/LJ/User.pm-7088-    my $u = shift;
dw-free/cgi-bin/LJ/User.pm-7089-    return $u->raw_prop('opt_showmutualfriends') ? 1 : 0;
dw-free/cgi-bin/LJ/User.pm-7090-}
dw-free/cgi-bin/LJ/User.pm-7091-
dw-free/cgi-bin/LJ/User.pm:7092:# FIXME: Needs updating for WTF
dw-free/cgi-bin/LJ/User.pm-7093-# only certain journaltypes can show mutual friends
dw-free/cgi-bin/LJ/User.pm-7094-sub show_mutualfriends {
dw-free/cgi-bin/LJ/User.pm-7095-    my $u = shift;
--
dw-free/cgi-bin/LJ/User.pm-7492-    return 0 unless $u;   # do not auto-vivify $u
dw-free/cgi-bin/LJ/User.pm-7493-    my $uid = $u->userid;
dw-free/cgi-bin/LJ/User.pm-7494-    return 0 unless $uid && $u->clusterid;
dw-free/cgi-bin/LJ/User.pm:7495:    # FIXME: return 1 instead? Callers don't use the return value, so I'm not
dw-free/cgi-bin/LJ/User.pm-7496-    # sure whether 0 means "some error happened" or just "nothing done"
dw-free/cgi-bin/LJ/User.pm-7497-    return 0 unless $u->is_personal || $u->is_community || $u->is_identity;
dw-free/cgi-bin/LJ/User.pm-7498-
--
dw-free/cgi-bin/LJ/User.pm-7915-}
dw-free/cgi-bin/LJ/User.pm-7916-
dw-free/cgi-bin/LJ/User.pm-7917-
dw-free/cgi-bin/LJ/User.pm:7918:# FIXME: this should go away someday... see bug 2760
dw-free/cgi-bin/LJ/User.pm-7919-sub update_user
dw-free/cgi-bin/LJ/User.pm-7920-{
dw-free/cgi-bin/LJ/User.pm-7921-    my ( $u, $ref ) = @_;
--
dw-free/cgi-bin/LJ/User.pm-8424-    my $reject = sub {
dw-free/cgi-bin/LJ/User.pm-8425-        my $errcode = shift;
dw-free/cgi-bin/LJ/User.pm-8426-        my $errmsg = shift;
dw-free/cgi-bin/LJ/User.pm:8427:        # TODO: add $opts to end of check_email and make option
dw-free/cgi-bin/LJ/User.pm-8428-        #       to either return error codes, or let caller supply
dw-free/cgi-bin/LJ/User.pm-8429-        #       a subref to resolve error codes into native language
dw-free/cgi-bin/LJ/User.pm-8430-        #       error messages (probably via BML::ML hash, or something)
--
dw-free/cgi-bin/LJ/User.pm-8690-}
dw-free/cgi-bin/LJ/User.pm-8691-
dw-free/cgi-bin/LJ/User.pm-8692-
dw-free/cgi-bin/LJ/User.pm:8693:# FIXME: Update to pull out S1 support.
dw-free/cgi-bin/LJ/User.pm-8694-# <LJFUNC>
dw-free/cgi-bin/LJ/User.pm-8695-# name: LJ::make_journal
dw-free/cgi-bin/LJ/User.pm-8696-# class:
--
dw-free/cgi-bin/LJ/User.pm-8911-    }
dw-free/cgi-bin/LJ/User.pm-8912-
dw-free/cgi-bin/LJ/User.pm-8913-    # signal to LiveJournal.pm that we can't handle this
dw-free/cgi-bin/LJ/User.pm:8914:    # FIXME: Make this properly invoke siteviews all the time -- once all the views are ready.
dw-free/cgi-bin/LJ/User.pm-8915-    # Most of this if and tons of messy conditionals can go away once all views are done.
dw-free/cgi-bin/LJ/User.pm-8916-    if ( $stylesys == 1 || $stylearg eq 'site' || $stylearg eq 'light' ) {
dw-free/cgi-bin/LJ/User.pm:8917:        my $fallback = "bml"; # FIXME: Should be S2 once everything's done
dw-free/cgi-bin/LJ/User.pm-8918-
dw-free/cgi-bin/LJ/User.pm-8919-        # if we are in this path, and they have style=mine set, it means
dw-free/cgi-bin/LJ/User.pm-8920-        # they either think they can get a S2 styled page but their account
--
dw-free/cgi-bin/LJ/User.pm-8937-        }
dw-free/cgi-bin/LJ/User.pm-8938-
dw-free/cgi-bin/LJ/User.pm-8939-        # there are no BML handlers for these views, so force s2
dw-free/cgi-bin/LJ/User.pm:8940:        # FIXME: Temporaray until talkread/talkpost/month views are converted
dw-free/cgi-bin/LJ/User.pm-8941-        if ( !( { entry => 1, reply => 1, month => 1 }->{$view} ) ) {
dw-free/cgi-bin/LJ/User.pm-8942-            $fallback = "s2";
dw-free/cgi-bin/LJ/User.pm-8943-        }
--
dw-free/cgi-bin/LJ/User.pm-9118-        res  => 1,
dw-free/cgi-bin/LJ/User.pm-9119-        icons => 1,
dw-free/cgi-bin/LJ/User.pm-9120-    );
dw-free/cgi-bin/LJ/User.pm:9121:    # FIXME: pretty this up at some point, to maybe auto-redirect to
dw-free/cgi-bin/LJ/User.pm-9122-    # the external URL or something, but let's just do this for now
dw-free/cgi-bin/LJ/User.pm-9123-    # res is a resource, such as an external stylesheet
dw-free/cgi-bin/LJ/User.pm-9124-    if ( $u->is_identity && !$valid_identity_views{$view} ) {
--
dw-free/cgi-bin/LJ/User.pm-9149-        }
dw-free/cgi-bin/LJ/User.pm-9150-
dw-free/cgi-bin/LJ/User.pm-9151-        # intercept flag to handle_with_bml_ref and instead use siteviews
dw-free/cgi-bin/LJ/User.pm:9152:        # FIXME: Temporary, till everything is converted.
dw-free/cgi-bin/LJ/User.pm-9153-        if ( $opts->{'handle_with_bml_ref'} && ${$opts->{'handle_with_bml_ref'}} && ( $geta->{fallback} eq "s2" || { icons => 1, tag => 1 }->{$view} ) ) {
dw-free/cgi-bin/LJ/User.pm-9154-            $mj = LJ::S2::make_journal($u, "siteviews", $view, $remote, $opts);
dw-free/cgi-bin/LJ/User.pm-9155-        }
--
dw-free/cgi-bin/LJ/SpellCheck.pm-194-    return $result;
dw-free/cgi-bin/LJ/SpellCheck.pm-195-}
dw-free/cgi-bin/LJ/SpellCheck.pm-196-
dw-free/cgi-bin/LJ/SpellCheck.pm:197:# FIXME: this will cause a segfault if called from a controller
dw-free/cgi-bin/LJ/SpellCheck.pm-198-# but IPC::Open2 won't work under mod_perl2, so we can't use the other version if gearman isn't set up
dw-free/cgi-bin/LJ/SpellCheck.pm-199-sub _spawn_spellcheck {
dw-free/cgi-bin/LJ/SpellCheck.pm-200-    my ( $self, $text, $no_ehtml ) = @_;
--
dw-free/cgi-bin/LJ/Tags.pm-275-# args: uobj, opts?
dw-free/cgi-bin/LJ/Tags.pm-276-# des-uobj: User object to get tags for.
dw-free/cgi-bin/LJ/Tags.pm-277-# des-opts: Optional hashref; key can be 'remote' to filter tags to only ones that remote can see
dw-free/cgi-bin/LJ/Tags.pm:278:# returns: Hashref; key being tag id, value being a large hashref (FIXME: document)
dw-free/cgi-bin/LJ/Tags.pm-279-# </LJFUNC>
dw-free/cgi-bin/LJ/Tags.pm-280-sub get_usertags {
dw-free/cgi-bin/LJ/Tags.pm-281-    return {} unless LJ::is_enabled('tags');
--
dw-free/cgi-bin/LJ/Tags.pm-479-
dw-free/cgi-bin/LJ/Tags.pm-480-    # we don't allow identity users to add tags, even when tag permissions would otherwise allow any user on the site
dw-free/cgi-bin/LJ/Tags.pm-481-    # exception are communities that explicitly allow identity users to post in them
dw-free/cgi-bin/LJ/Tags.pm:482:    # FIXME: perhaps we should restrict on all users, but allow for more restrictive settings such as members?
dw-free/cgi-bin/LJ/Tags.pm-483-    return undef unless $remote->is_personal || $remote->is_identity && $u->prop( 'identity_posting' );
dw-free/cgi-bin/LJ/Tags.pm-484-    return undef if $u->has_banned( $remote );
dw-free/cgi-bin/LJ/Tags.pm-485-
--
dw-free/cgi-bin/LJ/Tags.pm-1280-
dw-free/cgi-bin/LJ/Tags.pm-1281-    # see if the tag we're renaming TO already exists as a keyword,
dw-free/cgi-bin/LJ/Tags.pm-1282-    # if so, error and suggest merging the tags
dw-free/cgi-bin/LJ/Tags.pm:1283:    # FIXME: ask user to merge and then merge
dw-free/cgi-bin/LJ/Tags.pm-1284-    my $tags = LJ::Tags::get_usertags( $u );
dw-free/cgi-bin/LJ/Tags.pm-1285-    return $err->( LJ::Lang::ml( 'taglib.error.exists', { tagname => LJ::ehtml( $newname ) } ) )
dw-free/cgi-bin/LJ/Tags.pm-1286-        if $tags->{$newkwid};
--
dw-free/cgi-bin/LJ/Lang.pm-783-    return $wlist[$plural_form];
dw-free/cgi-bin/LJ/Lang.pm-784-}
dw-free/cgi-bin/LJ/Lang.pm-785-
dw-free/cgi-bin/LJ/Lang.pm:786:# TODO: make this faster, using AUTOLOAD and symbol tables pointing to dynamically
dw-free/cgi-bin/LJ/Lang.pm-787-# generated subs which only use $_[0] for $count.
dw-free/cgi-bin/LJ/Lang.pm-788-sub plural_form {
dw-free/cgi-bin/LJ/Lang.pm-789-    my ($lang, $count) = @_;
--
dw-free/cgi-bin/LJ/DB.pm-343-    if ( $LJ::DB_LOG_HOST && $LJ::HAVE_DBI_PROFILE ) {
dw-free/cgi-bin/LJ/DB.pm-344-        $LJ::DB_REPORT_HANDLES{ $dbh->{Name} } = $dbh;
dw-free/cgi-bin/LJ/DB.pm-345-
dw-free/cgi-bin/LJ/DB.pm:346:        # :TODO: Explain magic number
dw-free/cgi-bin/LJ/DB.pm-347-        $dbh->{Profile} ||= "2/DBI::Profile";
dw-free/cgi-bin/LJ/DB.pm-348-
dw-free/cgi-bin/LJ/DB.pm-349-        # And turn off useless (to us) on_destroy() reports, too.
--
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-89-sub configured {
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-90-    my $class = shift;
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-91-
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm:92:    # FIXME: check if jabber server is configured
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-93-    return 1;
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-94-}
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-95-
--
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-97-    my $class = shift;
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-98-    my $u = shift;
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-99-
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm:100:    # FIXME: check if user can use IM
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-101-    return $u->is_person ? 1 : 0;
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-102-}
dw-free/cgi-bin/LJ/NotificationMethod/IM.pm-103-
--
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-160-sub configured {
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-161-    my $class = shift;
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-162-
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm:163:    # FIXME: should probably have more checks
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-164-    return $LJ::BOGUS_EMAIL && $LJ::SITENAMESHORT ? 1 : 0;
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-165-}
dw-free/cgi-bin/LJ/NotificationMethod/Email.pm-166-
--
dw-free/cgi-bin/LJ/Widget.pm-18-use LJ::ModuleLoader;
dw-free/cgi-bin/LJ/Widget.pm-19-use LJ::Auth;
dw-free/cgi-bin/LJ/Widget.pm-20-
dw-free/cgi-bin/LJ/Widget.pm:21:# FIXME: don't really need all widgets now
dw-free/cgi-bin/LJ/Widget.pm-22-LJ::ModuleLoader->require_subclasses( "LJ::Widget" );
dw-free/cgi-bin/LJ/Widget.pm-23-LJ::ModuleLoader->require_subclasses( "DW::Widget" );
dw-free/cgi-bin/LJ/Widget.pm-24-
--
dw-free/cgi-bin/LJ/Widget.pm-187-    foreach my $key (keys %$post) {
dw-free/cgi-bin/LJ/Widget.pm-188-        next unless $key;
dw-free/cgi-bin/LJ/Widget.pm-189-
dw-free/cgi-bin/LJ/Widget.pm:190:        # FIXME: this is currently unused, but might be useful
dw-free/cgi-bin/LJ/Widget.pm-191-        if ($key =~ /^Widget_Submit_(.+)$/) {
dw-free/cgi-bin/LJ/Widget.pm-192-            die "Multiple effective submits?  class=$1"
dw-free/cgi-bin/LJ/Widget.pm-193-                if $eff_submit;
--
dw-free/cgi-bin/LJ/NavTag.pm-171-
dw-free/cgi-bin/LJ/NavTag.pm-172-sub dest_from_url {
dw-free/cgi-bin/LJ/NavTag.pm-173-    my ($class, $url) = @_;
dw-free/cgi-bin/LJ/NavTag.pm:174:    # FIXME: broken.  wrong URL type
dw-free/cgi-bin/LJ/NavTag.pm-175-    return undef unless $url =~ m!/profile.bml\?user=(\w+)!;
dw-free/cgi-bin/LJ/NavTag.pm-176-    return LJ::NavTag::Dest->new(type  => "LJUSER",
dw-free/cgi-bin/LJ/NavTag.pm-177-                                 dest  => $1);
--
dw-free/cgi-bin/LJ/Session.pm-81-
dw-free/cgi-bin/LJ/Session.pm-82-    # validate options
dw-free/cgi-bin/LJ/Session.pm-83-    my $exptype = delete $opts{'exptype'} || "short";
dw-free/cgi-bin/LJ/Session.pm:84:    my $ipfixed = delete $opts{'ipfixed'};   # undef or scalar ipaddress  FIXME: validate
dw-free/cgi-bin/LJ/Session.pm-85-    my $nolog   = delete $opts{'nolog'} || 0; # 1 to not log to loginlogs
dw-free/cgi-bin/LJ/Session.pm-86-    croak("Invalid exptype") unless $exptype =~ /^short|long|once$/;
dw-free/cgi-bin/LJ/Session.pm-87-
--
dw-free/cgi-bin/LJ/Session.pm-93-    # clean up any old, expired sessions they might have (lazy clean)
dw-free/cgi-bin/LJ/Session.pm-94-    $u->do("DELETE FROM sessions WHERE userid=? AND timeexpire < UNIX_TIMESTAMP()",
dw-free/cgi-bin/LJ/Session.pm-95-           undef, $u->{userid});
dw-free/cgi-bin/LJ/Session.pm:96:    # FIXME: but this doesn't remove their memcached keys
dw-free/cgi-bin/LJ/Session.pm-97-
dw-free/cgi-bin/LJ/Session.pm-98-    my $expsec     = LJ::Session->session_length($exptype);
dw-free/cgi-bin/LJ/Session.pm-99-    my $timeexpire = time() + $expsec;
--
dw-free/cgi-bin/LJ/Session.pm-181-                    " WHERE userid=$n_userid AND sessid=$n_sessid",
dw-free/cgi-bin/LJ/Session.pm-182-                    undef, @values);
dw-free/cgi-bin/LJ/Session.pm-183-    if (!$rv) {
dw-free/cgi-bin/LJ/Session.pm:184:        # FIXME: eventually use Error::Strict here on return
dw-free/cgi-bin/LJ/Session.pm-185-        return 0;
dw-free/cgi-bin/LJ/Session.pm-186-    }
dw-free/cgi-bin/LJ/Session.pm-187-
--
dw-free/cgi-bin/LJ/Session.pm-549-#   -- but not called directly.  usually called by LJ::Session->session_from_cookies above
dw-free/cgi-bin/LJ/Session.pm-550-# call: ( $opts?, @ljmastersession_cookie(s) )
dw-free/cgi-bin/LJ/Session.pm-551-# return value is LJ::Session object if we found one; else undef
dw-free/cgi-bin/LJ/Session.pm:552:# FIXME: document ops
dw-free/cgi-bin/LJ/Session.pm-553-sub session_from_master_cookie {
dw-free/cgi-bin/LJ/Session.pm-554-    my $class = shift;
dw-free/cgi-bin/LJ/Session.pm-555-    my $opts = ref $_[0] ? shift() : {};
--
dw-free/cgi-bin/LJ/Session.pm-680-    foreach (qw(sessions sessions_data)) {
dw-free/cgi-bin/LJ/Session.pm-681-        $u->do("DELETE FROM $_ WHERE userid=? AND ".
dw-free/cgi-bin/LJ/Session.pm-682-               "sessid IN ($in)", undef, $userid)
dw-free/cgi-bin/LJ/Session.pm:683:            or return 0;   # FIXME: use Error::Strict
dw-free/cgi-bin/LJ/Session.pm-684-    }
dw-free/cgi-bin/LJ/Session.pm-685-    foreach my $id (@sessids) {
dw-free/cgi-bin/LJ/Session.pm-686-        $id += 0;
--
dw-free/cgi-bin/LJ/Session.pm-795-}
dw-free/cgi-bin/LJ/Session.pm-796-
dw-free/cgi-bin/LJ/Session.pm-797-# function or instance method.
dw-free/cgi-bin/LJ/Session.pm:798:# FIXME: update the documentation for memkeys
dw-free/cgi-bin/LJ/Session.pm-799-sub _memkey {
dw-free/cgi-bin/LJ/Session.pm-800-    if (@_ == 2) {
dw-free/cgi-bin/LJ/Session.pm-801-        my ($u, $sessid) = @_;
--
dw-free/cgi-bin/LJ/Session.pm-807-    }
dw-free/cgi-bin/LJ/Session.pm-808-}
dw-free/cgi-bin/LJ/Session.pm-809-
dw-free/cgi-bin/LJ/Session.pm:810:# FIXME: move this somewhere better
dw-free/cgi-bin/LJ/Session.pm-811-sub set_cookie {
dw-free/cgi-bin/LJ/Session.pm-812-    my ($key, $value, %opts) = @_;
dw-free/cgi-bin/LJ/Session.pm-813-
--
dw-free/cgi-bin/LJ/Directory/Results.pm-87-    foreach my $u (@users) {
dw-free/cgi-bin/LJ/Directory/Results.pm-88-        $ret .= "<li>";
dw-free/cgi-bin/LJ/Directory/Results.pm-89-        $ret .= $u->ljuser_display . " - " . $u->name_html;
dw-free/cgi-bin/LJ/Directory/Results.pm:90:        # FIXME: consider replacing this with $u->last_updated
dw-free/cgi-bin/LJ/Directory/Results.pm-91-        $ret .= " <small>(Last updated: ". LJ::diff_ago_text( $updated->{$u->id} ) . ")</small>";
dw-free/cgi-bin/LJ/Directory/Results.pm-92-        $ret .= "</li>";
dw-free/cgi-bin/LJ/Directory/Results.pm-93-    }
--
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-50-    my $self = shift;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-51-    return $self->{pack_size} if $self->{pack_size};
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-52-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm:53:    # TODO: do this in the same request as load_matching_uids for fewer round-trips
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-54-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-55-    my @paths = $self->mogpaths;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm:56:    die "can't find it FIXME: calculate it again" unless @paths;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-57-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-58-    # do a HEAD reqest
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-59-    while (@paths) {
--
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-63-        next unless $resp->code == 200;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-64-        return $self->{pack_size} = $resp->header("Content-Length");
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-65-    }
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm:66:    die "FIXME: couldn't load it... go recalculate set for $self";
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-67-}
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-68-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-69-sub load_pack_data {
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-70-    my ($self, $cb) = @_;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-71-    my @paths = $self->mogpaths;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm:72:    die "FIXME: couldn't load it... go recalculate set for $self" unless @paths;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-73-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-74-    # stream data with LWP and call callback func with
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-75-    # streamed data
--
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-115-        die "We only read $readdata, not expected amount of $elen" unless $elen == $readdata;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-116-        return;
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-117-    }
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm:118:    die "FIXME: couldn't load it... go recalculate set for $self";
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-119-}
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-120-
dw-free/cgi-bin/LJ/Directory/SetHandle/Mogile.pm-121-sub mogkey {
--
dw-free/cgi-bin/LJ/Support.pm-424-{
dw-free/cgi-bin/LJ/Support.pm-425-    my ($spid, $propname, $propval) = @_;
dw-free/cgi-bin/LJ/Support.pm-426-
dw-free/cgi-bin/LJ/Support.pm:427:    # TODO:
dw-free/cgi-bin/LJ/Support.pm-428-    # -- delete on 'undef' propval
dw-free/cgi-bin/LJ/Support.pm-429-    # -- allow setting of multiple
dw-free/cgi-bin/LJ/Support.pm-430-
--
dw-free/cgi-bin/LJ/Keywords.pm-160-
dw-free/cgi-bin/LJ/Keywords.pm-161-    my @valid_ints = ();
dw-free/cgi-bin/LJ/Keywords.pm-162-    foreach my $int (@ints) {
dw-free/cgi-bin/LJ/Keywords.pm:163:        $int = lc($int);       # FIXME: use utf8?
dw-free/cgi-bin/LJ/Keywords.pm-164-        $int =~ s/^i like //;  # *sigh*
dw-free/cgi-bin/LJ/Keywords.pm-165-        next unless $int;
dw-free/cgi-bin/LJ/Keywords.pm-166-
--
dw-free/cgi-bin/LJ/Keywords.pm-231-        LJ::MemCache::add( $mk_ids, $ids, 3600*12 );
dw-free/cgi-bin/LJ/Keywords.pm-232-    }
dw-free/cgi-bin/LJ/Keywords.pm-233-
dw-free/cgi-bin/LJ/Keywords.pm:234:    # FIXME: set a 'justids' $u cache key in this case, then only return that
dw-free/cgi-bin/LJ/Keywords.pm-235-    #        later if 'justids' is requested?  probably not worth it.
dw-free/cgi-bin/LJ/Keywords.pm-236-    return $ids if $opts->{justids};
dw-free/cgi-bin/LJ/Keywords.pm-237-
--
dw-free/cgi-bin/LJ/Keywords.pm-283-    my $u = shift;
dw-free/cgi-bin/LJ/Keywords.pm-284-    return undef unless LJ::isu( $u );
dw-free/cgi-bin/LJ/Keywords.pm-285-
dw-free/cgi-bin/LJ/Keywords.pm:286:    # FIXME: fall back to SELECT COUNT(*) if not cached already?
dw-free/cgi-bin/LJ/Keywords.pm-287-    return scalar @{ $u->get_interests( { justids => 1 } ) };
dw-free/cgi-bin/LJ/Keywords.pm-288-}
dw-free/cgi-bin/LJ/Keywords.pm-289-
--
dw-free/cgi-bin/LJ/Setting/Interests.pm-57-    # Clean interests and make sure they're valid
dw-free/cgi-bin/LJ/Setting/Interests.pm-58-    my @valid_ints = LJ::validate_interest_list(\@interrors, @ints);
dw-free/cgi-bin/LJ/Setting/Interests.pm-59-    if (@interrors > 0) {
dw-free/cgi-bin/LJ/Setting/Interests.pm:60:        # FIXME: We might have a lot of errors. But we can't pass them all in or else
dw-free/cgi-bin/LJ/Setting/Interests.pm-61-        # we have a hash collision. (The class looks for errors with a given key, so
dw-free/cgi-bin/LJ/Setting/Interests.pm-62-        # we need to find a way to say "hey, look for errors with all these keys")
dw-free/cgi-bin/LJ/Setting/Interests.pm-63-        $class->errors("interests" => LJ::Lang::ml($interrors[0]));
--
dw-free/cgi-bin/LJ/Entry.pm-93-    croak("can't supply both itemid and ditemid")
dw-free/cgi-bin/LJ/Entry.pm-94-        if defined $opts{ditemid} && defined $opts{jitemid};
dw-free/cgi-bin/LJ/Entry.pm-95-
dw-free/cgi-bin/LJ/Entry.pm:96:    # FIXME: don't store $u in here, or at least call LJ::load_userids() on all singletons
dw-free/cgi-bin/LJ/Entry.pm-97-    #        if LJ::want_user() would have been called
dw-free/cgi-bin/LJ/Entry.pm-98-    $self->{u}       = LJ::want_user($uuserid) or croak("invalid user/userid parameter: $uuserid");
dw-free/cgi-bin/LJ/Entry.pm-99-
--
dw-free/cgi-bin/LJ/Entry.pm-350-    my ($class, $entlist) = @_;
dw-free/cgi-bin/LJ/Entry.pm-351-    $class->preload_rows($entlist);
dw-free/cgi-bin/LJ/Entry.pm-352-    $class->preload_props($entlist);
dw-free/cgi-bin/LJ/Entry.pm:353:    # TODO: $class->preload_text($entlist);
dw-free/cgi-bin/LJ/Entry.pm-354-}
dw-free/cgi-bin/LJ/Entry.pm-355-
dw-free/cgi-bin/LJ/Entry.pm-356-# class method:
--
dw-free/cgi-bin/LJ/Entry.pm-414-        $self->{subject_orig}  = $self->{subject};
dw-free/cgi-bin/LJ/Entry.pm-415-        $self->{event_orig}    = $self->{event};
dw-free/cgi-bin/LJ/Entry.pm-416-
dw-free/cgi-bin/LJ/Entry.pm:417:        # FIXME: really convert all the props?  what if we binary-pack some in the future?
dw-free/cgi-bin/LJ/Entry.pm-418-        LJ::item_toutf8($self->{u}, \$self->{'subject'}, \$self->{'event'}, $self->{props});
dw-free/cgi-bin/LJ/Entry.pm-419-    }
dw-free/cgi-bin/LJ/Entry.pm-420-
--
dw-free/cgi-bin/LJ/Entry.pm-853-See userpic_kw.
dw-free/cgi-bin/LJ/Entry.pm-854-
dw-free/cgi-bin/LJ/Entry.pm-855-=cut
dw-free/cgi-bin/LJ/Entry.pm:856:# FIXME: add a context option for friends page, and perhaps
dw-free/cgi-bin/LJ/Entry.pm-857-# respect $remote's userpic viewing preferences (community shows poster
dw-free/cgi-bin/LJ/Entry.pm-858-# vs community's picture)
dw-free/cgi-bin/LJ/Entry.pm-859-sub userpic {
--
dw-free/cgi-bin/LJ/Entry.pm-1288-    # fix up posts as needed for display, following directions given in opts.
dw-free/cgi-bin/LJ/Entry.pm-1289-
dw-free/cgi-bin/LJ/Entry.pm-1290-
dw-free/cgi-bin/LJ/Entry.pm:1291:    # XXX this function is incomplete.  it should also HTML clean, etc.
dw-free/cgi-bin/LJ/Entry.pm:1292:    # XXX we need to load users when we have unknown8bit data, but that
dw-free/cgi-bin/LJ/Entry.pm:1293:    # XXX means we have to load users.
dw-free/cgi-bin/LJ/Entry.pm-1294-
dw-free/cgi-bin/LJ/Entry.pm-1295-
dw-free/cgi-bin/LJ/Entry.pm-1296-    while (my ($id, $rp) = each %$rawposts) {
--
dw-free/cgi-bin/LJ/Entry.pm-1463-    $rows = "";
dw-free/cgi-bin/LJ/Entry.pm-1464-
dw-free/cgi-bin/LJ/Entry.pm-1465-    # get reliable update time from the db
dw-free/cgi-bin/LJ/Entry.pm:1466:    # TODO: check userprop first
dw-free/cgi-bin/LJ/Entry.pm-1467-    my $tu;
dw-free/cgi-bin/LJ/Entry.pm-1468-    my $dbh = LJ::get_db_writer();
dw-free/cgi-bin/LJ/Entry.pm-1469-    if ($dbh) {
--
dw-free/cgi-bin/LJ/Entry.pm-1475-
dw-free/cgi-bin/LJ/Entry.pm-1476-        LJ::MemCache::set([$jid, "tu:$jid"], pack("N", $tu), 30*60)
dw-free/cgi-bin/LJ/Entry.pm-1477-            if defined $tu;
dw-free/cgi-bin/LJ/Entry.pm:1478:        # TODO: update userprop if necessary
dw-free/cgi-bin/LJ/Entry.pm-1479-    }
dw-free/cgi-bin/LJ/Entry.pm-1480-
dw-free/cgi-bin/LJ/Entry.pm-1481-    # if we didn't get tu, don't bother to memcache
--
dw-free/cgi-bin/LJ/Entry.pm-2122-    my $ditemid = $itemid*256 + $anum;
dw-free/cgi-bin/LJ/Entry.pm-2123-    $u = LJ::load_user( $u ) unless LJ::isu( $u );
dw-free/cgi-bin/LJ/Entry.pm-2124-
dw-free/cgi-bin/LJ/Entry.pm:2125:    # XXX: should have an option of returning a url with escaped (&amp;)
dw-free/cgi-bin/LJ/Entry.pm-2126-    #      or non-escaped (&) arguments.  a new link object would be best.
dw-free/cgi-bin/LJ/Entry.pm-2127-    my $args = @args ? "?" . join("&amp;", @args) : "";
dw-free/cgi-bin/LJ/Entry.pm-2128-    return $u->journal_base . "/$ditemid.html$args";
--
dw-free/cgi-bin/LJ/Entry.pm-2182-    $convert->($subject);
dw-free/cgi-bin/LJ/Entry.pm-2183-    $convert->($text);
dw-free/cgi-bin/LJ/Entry.pm-2184-
dw-free/cgi-bin/LJ/Entry.pm:2185:    # FIXME: Have some logprop flag for what props are binary
dw-free/cgi-bin/LJ/Entry.pm-2186-    foreach(keys %$props) {
dw-free/cgi-bin/LJ/Entry.pm-2187-        next if $_ eq 'xpost' || $_ eq 'xpostdetail';
dw-free/cgi-bin/LJ/Entry.pm-2188-        $convert->(\$props->{$_});
--
dw-free/cgi-bin/LJ/EmbedModule.pm-476-                next;
dw-free/cgi-bin/LJ/EmbedModule.pm-477-            }
dw-free/cgi-bin/LJ/EmbedModule.pm-478-
dw-free/cgi-bin/LJ/EmbedModule.pm:479:            # FIXME: ultra ghetto.
dw-free/cgi-bin/LJ/EmbedModule.pm-480-            $attr->{$name} = LJ::no_utf8_flag($attr->{$name});
dw-free/cgi-bin/LJ/EmbedModule.pm-481-
dw-free/cgi-bin/LJ/EmbedModule.pm-482-            $txt .= " $name=\"" . LJ::ehtml($attr->{$name}) . "\"";
--
dw-free/cgi-bin/LJ/S2Theme.pm-27-# Class Methods
dw-free/cgi-bin/LJ/S2Theme.pm-28-##################################################
dw-free/cgi-bin/LJ/S2Theme.pm-29-
dw-free/cgi-bin/LJ/S2Theme.pm:30:# FIXME: This should be configurable
dw-free/cgi-bin/LJ/S2Theme.pm-31-sub default_themes {
dw-free/cgi-bin/LJ/S2Theme.pm-32-    my $class = $_[0];
dw-free/cgi-bin/LJ/S2Theme.pm-33-
--
dw-free/cgi-bin/LJ/Setting.pm-99-    }
dw-free/cgi-bin/LJ/Setting.pm-100-
dw-free/cgi-bin/LJ/Setting.pm-101-    my $err = $errs->{$key}   or return "";
dw-free/cgi-bin/LJ/Setting.pm:102:    # TODO: red is temporary.  move to css.
dw-free/cgi-bin/LJ/Setting.pm-103-    return "<div style='color: red' class='ljinlinesettingerror'>$err</div>";
dw-free/cgi-bin/LJ/Setting.pm-104-}
dw-free/cgi-bin/LJ/Setting.pm-105-
--
dw-free/cgi-bin/LJ/ESN.pm-263-        # is currently on. (and not, eg, a cluster they were moved from)
dw-free/cgi-bin/LJ/ESN.pm-264-        next if $cid && $u->clusterid != $cid;
dw-free/cgi-bin/LJ/ESN.pm-265-
dw-free/cgi-bin/LJ/ESN.pm:266:        # TODO: discern difference between cluster not up and subscription
dw-free/cgi-bin/LJ/ESN.pm-267-        #       having been deleted
dw-free/cgi-bin/LJ/ESN.pm-268-        my $subsc = LJ::Subscription->new_by_id($u, $subid)
dw-free/cgi-bin/LJ/ESN.pm-269-            or next;
--
dw-free/cgi-bin/LJ/ESN.pm-310-        $subsc->{_debug_headers} = $debug_headers;
dw-free/cgi-bin/LJ/ESN.pm-311-    }
dw-free/cgi-bin/LJ/ESN.pm-312-
dw-free/cgi-bin/LJ/ESN.pm:313:    # TODO: do inbox notification method here, first.
dw-free/cgi-bin/LJ/ESN.pm-314-
dw-free/cgi-bin/LJ/ESN.pm-315-    # NEXT: do sub's ntypeid, unless it's inbox, then we're done.
dw-free/cgi-bin/LJ/ESN.pm-316-    $subsc->process($evt)
--
dw-free/cgi-bin/LJ/Blockwatch.pm-103-    my $sth = $dbh->prepare("SELECT id, name FROM blockwatch_events");
dw-free/cgi-bin/LJ/Blockwatch.pm-104-    $sth->execute;
dw-free/cgi-bin/LJ/Blockwatch.pm-105-
dw-free/cgi-bin/LJ/Blockwatch.pm:106:    # TODO Catch dbi errors here and return.
dw-free/cgi-bin/LJ/Blockwatch.pm-107-
dw-free/cgi-bin/LJ/Blockwatch.pm-108-    %event_by_id   = ();
dw-free/cgi-bin/LJ/Blockwatch.pm-109-    %event_by_name = ();
--
dw-free/cgi-bin/LJ/S2/YearPage.pm-94-    my $has_entries = $count->{$year} && $count->{$year}->{$month} ? 1 : 0;
dw-free/cgi-bin/LJ/S2/YearPage.pm-95-    $calmon->{'has_entries'} = $has_entries;
dw-free/cgi-bin/LJ/S2/YearPage.pm-96-
dw-free/cgi-bin/LJ/S2/YearPage.pm:97:    my $start_monday = 0;  # FIXME: check some property to see if weeks start on monday
dw-free/cgi-bin/LJ/S2/YearPage.pm-98-    my $week = undef;
dw-free/cgi-bin/LJ/S2/YearPage.pm-99-
dw-free/cgi-bin/LJ/S2/YearPage.pm-100-    my $flush_week = sub {
--
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-126-            return;
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-127-        }
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-128-
dw-free/cgi-bin/LJ/S2/ReplyPage.pm:129:        # FIXME: Why are we loading the comment manually when we do LJ::Comment->new below
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-130-        # and could do everything through there.
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-131-        my $sql = "SELECT jtalkid, posterid, state, datepost FROM talk2 ".
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-132-            "WHERE journalid=$u->{'userid'} AND jtalkid=$re_talkid ".
--
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-138-        }
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-139-        my $parentcomment = LJ::Comment->new( $u, jtalkid => $re_talkid );
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-140-        unless ($parpost and $parpost->{'state'} ne 'D') {
dw-free/cgi-bin/LJ/S2/ReplyPage.pm:141:            # FIXME: This is a hack. See below...
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-142-
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-143-            $opts->{status} = "404 Not Found";
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-144-            return "<p>This comment has been deleted; you cannot reply to it.</p>";
--
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-150-        if ($parpost->{'state'} eq 'F') {
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-151-            # frozen comment, no replies allowed
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-152-
dw-free/cgi-bin/LJ/S2/ReplyPage.pm:153:            # FIXME: eventually have S2 ErrorPage to handle this and similar
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-154-            #    For now, this hack will work; this error is pretty uncommon anyway.
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-155-            $opts->{status} = "403 Forbidden";
dw-free/cgi-bin/LJ/S2/ReplyPage.pm-156-            return "<p>This thread has been frozen; no more replies are allowed.</p>";
--
dw-free/cgi-bin/LJ/S2/EntryPage.pm-287-            };
dw-free/cgi-bin/LJ/S2/EntryPage.pm-288-
dw-free/cgi-bin/LJ/S2/EntryPage.pm-289-            # don't show info from suspended users
dw-free/cgi-bin/LJ/S2/EntryPage.pm:290:            # FIXME: ideally the load_comments should only return these
dw-free/cgi-bin/LJ/S2/EntryPage.pm-291-            # items if there are children, otherwise they should be hidden entirely
dw-free/cgi-bin/LJ/S2/EntryPage.pm-292-            if ($pu && $pu->is_suspended && !$viewsome) {
dw-free/cgi-bin/LJ/S2/EntryPage.pm-293-                $s2com->{'fromsuspended'} = 1;
--
dw-free/cgi-bin/LJ/Subscription/Pending.pm-53-    $journalu ||= LJ::want_user(delete $opts{journalid});
dw-free/cgi-bin/LJ/Subscription/Pending.pm-54-
dw-free/cgi-bin/LJ/Subscription/Pending.pm-55-    # don't care about disabled for pending
dw-free/cgi-bin/LJ/Subscription/Pending.pm:56:    # FIXME: care
dw-free/cgi-bin/LJ/Subscription/Pending.pm-57-    delete $opts{disabled};
dw-free/cgi-bin/LJ/Subscription/Pending.pm-58-
dw-free/cgi-bin/LJ/Subscription/Pending.pm-59-    croak "Invalid params passed to LJ::Subscription::Pending->new: " . join(',', keys %opts) if scalar keys %opts;
--
dw-free/cgi-bin/LJ/Poll/Question.pm-318-
dw-free/cgi-bin/LJ/Poll/Question.pm-319-    my $href_opts = sub {
dw-free/cgi-bin/LJ/Poll/Question.pm-320-        my $page = shift;
dw-free/cgi-bin/LJ/Poll/Question.pm:321:        # FIXME: this is a quick hack to disable the paging JS on /poll/index since it doesn't work
dw-free/cgi-bin/LJ/Poll/Question.pm-322-        # better fix will await another look at that whole area
dw-free/cgi-bin/LJ/Poll/Question.pm-323-        return  ( $opts{no_class} ? "" : " class='LJ_PollAnswerLink'" ) .
dw-free/cgi-bin/LJ/Poll/Question.pm-324-                " lj_pollid='$pollid'".
--
dw-free/cgi-bin/LJ/Comment.pm-189-    # The following 2 options are necessary for successful user authentification
dw-free/cgi-bin/LJ/Comment.pm-190-    # in the depth of LJ::Talk::Post::init.
dw-free/cgi-bin/LJ/Comment.pm-191-    #
dw-free/cgi-bin/LJ/Comment.pm:192:    # FIXME: this almost certainly should be 'usertype=user' rather than
dw-free/cgi-bin/LJ/Comment.pm-193-    #        'cookieuser' with $remote passed below.  Gross.
dw-free/cgi-bin/LJ/Comment.pm-194-    $talk_opts{cookieuser} ||= $posteru->user;
dw-free/cgi-bin/LJ/Comment.pm-195-    $talk_opts{usertype}   ||= 'cookieuser';
--
dw-free/cgi-bin/LJ/Comment.pm-431-    my $entry = $self->entry;
dw-free/cgi-bin/LJ/Comment.pm-432-    return grep { $_->{parenttalkid} == $self->{jtalkid} } $entry->comment_list;
dw-free/cgi-bin/LJ/Comment.pm-433-
dw-free/cgi-bin/LJ/Comment.pm:434:    # FIXME: It might be a good idea to check to see if the entry object had
dw-free/cgi-bin/LJ/Comment.pm-435-    #        comments cached above, then fall back to a query to select a list
dw-free/cgi-bin/LJ/Comment.pm-436-    #        from db or memcache
dw-free/cgi-bin/LJ/Comment.pm-437-}
--
dw-free/cgi-bin/LJ/Comment.pm-557-            $c_obj->{subject_orig} = $c_obj->{subject};
dw-free/cgi-bin/LJ/Comment.pm-558-            $c_obj->{body_orig}    = $c_obj->{body};
dw-free/cgi-bin/LJ/Comment.pm-559-
dw-free/cgi-bin/LJ/Comment.pm:560:            # FIXME: really convert all the props?  what if we binary-pack some in the future?
dw-free/cgi-bin/LJ/Comment.pm-561-            LJ::item_toutf8($c_obj->journal, \$c_obj->{subject}, \$c_obj->{body}, $c_obj->{props});
dw-free/cgi-bin/LJ/Comment.pm-562-        }
dw-free/cgi-bin/LJ/Comment.pm-563-
--
dw-free/cgi-bin/LJ/NotificationInbox.pm-372-    LJ::MemCache::delete($self->_unread_memkey);
dw-free/cgi-bin/LJ/NotificationInbox.pm-373-}
dw-free/cgi-bin/LJ/NotificationInbox.pm-374-
dw-free/cgi-bin/LJ/NotificationInbox.pm:375:# FIXME: make this faster
dw-free/cgi-bin/LJ/NotificationInbox.pm-376-sub oldest_item {
dw-free/cgi-bin/LJ/NotificationInbox.pm-377-    my $self = shift;
dw-free/cgi-bin/LJ/NotificationInbox.pm-378-    my @items = $self->items;
--
dw-free/cgi-bin/LJ/Worker/Gearman.pm-98-            exit 0 if -e "/var/run/gearman/$$.please_die" || -e "/var/run/ljworker/$$.please_die";
dw-free/cgi-bin/LJ/Worker/Gearman.pm-99-        }
dw-free/cgi-bin/LJ/Worker/Gearman.pm-100-
dw-free/cgi-bin/LJ/Worker/Gearman.pm:101:        $worker->job_servers(@LJ::GEARMAN_SERVERS); # TODO: don't do this everytime, only when config changes?
dw-free/cgi-bin/LJ/Worker/Gearman.pm-102-
dw-free/cgi-bin/LJ/Worker/Gearman.pm-103-        exit 0 if $quit_flag;
dw-free/cgi-bin/LJ/Worker/Gearman.pm-104-    };
--
dw-free/cgi-bin/LJ/ModuleLoader.pm-100-    return 0;
dw-free/cgi-bin/LJ/ModuleLoader.pm-101-}
dw-free/cgi-bin/LJ/ModuleLoader.pm-102-
dw-free/cgi-bin/LJ/ModuleLoader.pm:103:# FIXME: This should do more...
dw-free/cgi-bin/LJ/ModuleLoader.pm-104-
dw-free/cgi-bin/LJ/ModuleLoader.pm-105-1;
--
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-28-
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-29-    my $depth = LJ::MemCache::get( 'importer_queue_depth' );
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-30-    unless ( $depth ) {
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm:31:        # FIXME: don't make this slam the db with people asking the same question, use a lock
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm:32:        # FIXME: we don't have ddlockd, maybe we should
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-33-        
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-34-        # do manual connection
dw-free/cgi-bin/LJ/Widget/ImportQueueStatus.pm-35-        my $db = $LJ::THESCHWARTZ_DBS[0];
--
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-42-    $ret .= "<?p (<a href='$LJ::SITEROOT/admin/sitemessages/add'>Add a site message</a>) p?>";
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-43-    $ret .= "<?p Select a month to view all messages that started during that month. p?>";
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-44-
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm:45:    # TODO: supported way for widgets to do GET forms?
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-46-    #       -- lame that GET/POST is done differently in here
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-47-    $ret .= "<form method='GET'>";
dw-free/cgi-bin/LJ/Widget/ManageSiteMessages.pm-48-    $ret .= "<?p Year: " . LJ::html_text({ name => 'year', size => '4', maxlength => '4', value => $year }) . " ";
--
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-59-    my $itemid = int( $opts{itemid} || 0 );
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-60-    my $remote = LJ::get_remote();
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-61-
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm:62:    my $unread_count = 1; #TODO get real number
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-63-    my $disabled = $unread_count ? '' : 'disabled';
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-64-
dw-free/cgi-bin/LJ/Widget/InboxFolder.pm-65-    # print form
--
dw-free/cgi-bin/LJ/Error.pm-275-# override this
dw-free/cgi-bin/LJ/Error.pm-276-sub as_string {
dw-free/cgi-bin/LJ/Error.pm-277-    my $self = shift;
dw-free/cgi-bin/LJ/Error.pm:278:    # FIXME: show line/file/function, show some fields?  maybe?  that are simple values?
dw-free/cgi-bin/LJ/Error.pm-279-}
dw-free/cgi-bin/LJ/Error.pm-280-
dw-free/cgi-bin/LJ/Error.pm-281-# automatic type returned when something dies with just a string
--
dw-free/cgi-bin/LJ/Talk.pm-683-    # if it seems necessary.
dw-free/cgi-bin/LJ/Talk.pm-684-    my $rp_memkey = $nodetype eq "L" ? [$u->{'userid'}, "rp:$u->{'userid'}:$nodeid"] : undef;
dw-free/cgi-bin/LJ/Talk.pm-685-    my $rp_count = $rp_memkey ? LJ::MemCache::get($rp_memkey) : 0;
dw-free/cgi-bin/LJ/Talk.pm:686:    $rp_count ||= 0; # avoid warnings, FIXME how can LJ::MemCache::get return undef or sg that is not undef?
dw-free/cgi-bin/LJ/Talk.pm-687-
dw-free/cgi-bin/LJ/Talk.pm-688-    # hook for tests to count memcache gets
dw-free/cgi-bin/LJ/Talk.pm-689-    if ($LJ::_T_GET_TALK_DATA_MEMCACHE) {
--
dw-free/cgi-bin/LJ/Talk.pm-1399-    }
dw-free/cgi-bin/LJ/Talk.pm-1400-}
dw-free/cgi-bin/LJ/Talk.pm-1401-
dw-free/cgi-bin/LJ/Talk.pm:1402:# XXX these strings should be in talk, but moving them means we have
dw-free/cgi-bin/LJ/Talk.pm-1403-# to retranslate.  so for now we're just gonna put it off.
dw-free/cgi-bin/LJ/Talk.pm-1404-my $SC = '/talkpost_do.bml';
dw-free/cgi-bin/LJ/Talk.pm-1405-
--
dw-free/cgi-bin/LJ/Talk.pm-2670-    my $threadurl = LJ::Talk::talkargs($talkurl, "thread=$dtalkid");
dw-free/cgi-bin/LJ/Talk.pm-2671-    my $edited = $comment->{editid} ? 1 : 0;
dw-free/cgi-bin/LJ/Talk.pm-2672-
dw-free/cgi-bin/LJ/Talk.pm:2673:    # FIXME: here we have to use existent comment object, not try to create temporary one.
dw-free/cgi-bin/LJ/Talk.pm-2674-    my $comment_obj = LJ::Comment->new($journalu, dtalkid => $dtalkid);
dw-free/cgi-bin/LJ/Talk.pm-2675-
dw-free/cgi-bin/LJ/Talk.pm-2676-    # check to see if parent post is from a registered livejournal user, and
--
dw-free/cgi-bin/LJ/Talk.pm-3332-        $form->{'userpost'} = $remote->{'user'};
dw-free/cgi-bin/LJ/Talk.pm-3333-        $form->{'usertype'} = "user";
dw-free/cgi-bin/LJ/Talk.pm-3334-    }
dw-free/cgi-bin/LJ/Talk.pm:3335:    # FIXME: XXXevan hack:  remove me when we fix preview.
dw-free/cgi-bin/LJ/Talk.pm-3336-    $init->{cookie_auth} = $cookie_auth;
dw-free/cgi-bin/LJ/Talk.pm-3337-
dw-free/cgi-bin/LJ/Talk.pm-3338-    # test accounts may only comment on other test accounts.
--
dw-free/cgi-bin/LJ/Talk.pm-3799-    # check for dup ID in memcache.
dw-free/cgi-bin/LJ/Talk.pm-3800-    my $memkey;
dw-free/cgi-bin/LJ/Talk.pm-3801-    if (@LJ::MEMCACHE_SERVERS) {
dw-free/cgi-bin/LJ/Talk.pm:3802:        # avoid warnings FIXME this should be done elsewhere
dw-free/cgi-bin/LJ/Talk.pm-3803-        foreach my $field (qw(body subject subjecticon preformat picture_keyword)) {
dw-free/cgi-bin/LJ/Talk.pm-3804-            $comment->{$field} = '' if not defined $comment->{$field};
dw-free/cgi-bin/LJ/Talk.pm-3805-        }
--
dw-free/cgi-bin/LJ/Talk.pm-3814-    # they don't have a duplicate...
dw-free/cgi-bin/LJ/Talk.pm-3815-    unless ($jtalkid) {
dw-free/cgi-bin/LJ/Talk.pm-3816-        my ( $posteru, $kw ) = ( $comment->{u}, $comment->{picture_keyword} );
dw-free/cgi-bin/LJ/Talk.pm:3817:        # XXX do select and delete $talkprop{'picture_keyword'} if they're lying
dw-free/cgi-bin/LJ/Talk.pm-3818-        my $pic = LJ::Userpic->new_from_keyword( $posteru, $kw );
dw-free/cgi-bin/LJ/Talk.pm-3819-        delete $comment->{picture_keyword} unless $pic && $pic->state eq 'N';
dw-free/cgi-bin/LJ/Talk.pm-3820-        $comment->{pic} = $pic;
dw-free/cgi-bin/LJ/Talk.pm-3821-
dw-free/cgi-bin/LJ/Talk.pm-3822-        # put the post in the database
dw-free/cgi-bin/LJ/Talk.pm:3823:        $item->{anum} ||= 0; # avoid warning FIXME this should be done elsewhere
dw-free/cgi-bin/LJ/Talk.pm-3824-        my $ditemid = $item->{itemid}*256 + $item->{anum};
dw-free/cgi-bin/LJ/Talk.pm-3825-        $jtalkid = enter_comment($journalu, $parent, $item, $comment, $errref);
dw-free/cgi-bin/LJ/Talk.pm-3826-        return 0 unless $jtalkid;
--
dw-free/cgi-bin/LJ/Talk.pm-3915-    return 1;
dw-free/cgi-bin/LJ/Talk.pm-3916-}
dw-free/cgi-bin/LJ/Talk.pm-3917-
dw-free/cgi-bin/LJ/Talk.pm:3918:# XXXevan:  this function should have its functionality migrated to talkpost.
dw-free/cgi-bin/LJ/Talk.pm-3919-# because of that, it's probably not worth the effort to make it not mangle $form...
dw-free/cgi-bin/LJ/Talk.pm-3920-sub make_preview {
dw-free/cgi-bin/LJ/Talk.pm-3921-    my ($talkurl, $cookie_auth, $form) = @_;
--
dw-free/cgi-bin/LJ/Capabilities.pm-181-         $LJ::READONLY_CLUSTER_ADVISORY{$u->{clusterid}} &&
dw-free/cgi-bin/LJ/Capabilities.pm-182-         ! LJ::get_cap($u, "avoid_readonly"))) {
dw-free/cgi-bin/LJ/Capabilities.pm-183-
dw-free/cgi-bin/LJ/Capabilities.pm:184:        # HACK for desperate moments.  in when_needed mode, see if
dw-free/cgi-bin/LJ/Capabilities.pm-185-        # database is locky first
dw-free/cgi-bin/LJ/Capabilities.pm-186-        my $cid = $u->{clusterid};
dw-free/cgi-bin/LJ/Capabilities.pm-187-        if ($LJ::READONLY_CLUSTER_ADVISORY{$cid} eq "when_needed") {
--
dw-free/cgi-bin/LJ/ParseFeed.pm-50-    # is it RSS or Atom?
dw-free/cgi-bin/LJ/ParseFeed.pm-51-    # Atom feeds are rare for now, so prefer to err in favor of RSS
dw-free/cgi-bin/LJ/ParseFeed.pm-52-    # simple heuristic: Atom feeds will have '<feed' somewhere
dw-free/cgi-bin/LJ/ParseFeed.pm:53:    # TODO: maybe store the feed's type on creation in a userprop and not guess here
dw-free/cgi-bin/LJ/ParseFeed.pm-54-
dw-free/cgi-bin/LJ/ParseFeed.pm-55-    if ( (defined $type && $type eq 'atom') || $content =~ m!\<feed!) {
dw-free/cgi-bin/LJ/ParseFeed.pm-56-        # try treating it as an atom feed
--
dw-free/cgi-bin/LJ/ParseFeed.pm-168-sub w3cdtf_to_time {
dw-free/cgi-bin/LJ/ParseFeed.pm-169-    my $tw3 = shift;
dw-free/cgi-bin/LJ/ParseFeed.pm-170-
dw-free/cgi-bin/LJ/ParseFeed.pm:171:    # TODO: Should somehow return the timezone offset
dw-free/cgi-bin/LJ/ParseFeed.pm-172-    #   so that it can stored... but we don't do timezones
dw-free/cgi-bin/LJ/ParseFeed.pm-173-    #   yet anyway. For now, just strip the timezone
dw-free/cgi-bin/LJ/ParseFeed.pm-174-    #   portion if it is present, along with the decimal
--
dw-free/cgi-bin/LJ/ParseFeed.pm-429-            unless (scalar(@{$item->{'contents'}}) >= 1) {
dw-free/cgi-bin/LJ/ParseFeed.pm-430-                # this item had no <content>
dw-free/cgi-bin/LJ/ParseFeed.pm-431-                # maybe it has <summary>? if so, use <summary>
dw-free/cgi-bin/LJ/ParseFeed.pm:432:                # TODO: type= or encoding issues here? perhaps unite
dw-free/cgi-bin/LJ/ParseFeed.pm-433-                # handling of <summary> with that of <content>?
dw-free/cgi-bin/LJ/ParseFeed.pm-434-                if ($item->{'_atom_summary'}) {
dw-free/cgi-bin/LJ/ParseFeed.pm-435-                    $item->{'text'} = $item->{'_atom_summary'};
--
dw-free/cgi-bin/LJ/ParseFeed.pm-473-                # we ignore the 'mode' attribute of <content>. If it's "xml", we've
dw-free/cgi-bin/LJ/ParseFeed.pm-474-                # stringified it by accumulation; if it's "escaped", our parser
dw-free/cgi-bin/LJ/ParseFeed.pm-475-                # unescaped it
dw-free/cgi-bin/LJ/ParseFeed.pm:476:                # TODO: handle mode=base64?
dw-free/cgi-bin/LJ/ParseFeed.pm-477-
dw-free/cgi-bin/LJ/ParseFeed.pm-478-                $item->{'text'} = $content->[1];
dw-free/cgi-bin/LJ/ParseFeed.pm-479-                delete $item->{'contents'};
--
dw-free/cgi-bin/LJ/Userpic.pm-90-
dw-free/cgi-bin/LJ/Userpic.pm-91-# LJ::Userpic accessor. Returns a LJ::Userpic object indicated by $picid, or
dw-free/cgi-bin/LJ/Userpic.pm-92-# undef if userpic doesn't exist in the db.
dw-free/cgi-bin/LJ/Userpic.pm:93:# TODO: add in lazy peer loading here?
dw-free/cgi-bin/LJ/Userpic.pm-94-sub get {
dw-free/cgi-bin/LJ/Userpic.pm-95-    my ( $class, $u, $picid, $opts ) = @_;
dw-free/cgi-bin/LJ/Userpic.pm-96-    return unless LJ::isu( $u );
--
dw-free/cgi-bin/LJ/Userpic.pm-128-
dw-free/cgi-bin/LJ/Userpic.pm-129-# given a md5sum, load a userpic
dw-free/cgi-bin/LJ/Userpic.pm-130-# takes $u, $md5sum (base64)
dw-free/cgi-bin/LJ/Userpic.pm:131:# TODO: croak if md5sum is wrong number of bytes
dw-free/cgi-bin/LJ/Userpic.pm-132-sub new_from_md5 {
dw-free/cgi-bin/LJ/Userpic.pm-133-    my ($class, $u, $md5sum) = @_;
dw-free/cgi-bin/LJ/Userpic.pm-134-    die unless $u && length($md5sum) == 22;
--
dw-free/cgi-bin/LJ/Userpic.pm-352-
dw-free/cgi-bin/LJ/Userpic.pm-353-# Returns original URL used if userpic was originally uploaded
dw-free/cgi-bin/LJ/Userpic.pm-354-# via a URL.
dw-free/cgi-bin/LJ/Userpic.pm:355:# FIXME: should be renamed to source_url
dw-free/cgi-bin/LJ/Userpic.pm-356-sub fullurl {
dw-free/cgi-bin/LJ/Userpic.pm-357-    my $self = $_[0];
dw-free/cgi-bin/LJ/Userpic.pm-358-    return $self->{url} if $self->{url};
--
dw-free/cgi-bin/LJ/Userpic.pm-416-        '" title="' . $title . '" class="userpic-img" />';
dw-free/cgi-bin/LJ/Userpic.pm-417-}
dw-free/cgi-bin/LJ/Userpic.pm-418-
dw-free/cgi-bin/LJ/Userpic.pm:419:# FIXME: should have alt text, if it should be kept
dw-free/cgi-bin/LJ/Userpic.pm-420-sub imgtag_lite {
dw-free/cgi-bin/LJ/Userpic.pm-421-    my $self = $_[0];
dw-free/cgi-bin/LJ/Userpic.pm-422-    return '<img src="' . $self->url . '" width="' . $self->width . '" height="' . $self->height .
dw-free/cgi-bin/LJ/Userpic.pm-423-        '" class="userpic-img" />';
dw-free/cgi-bin/LJ/Userpic.pm-424-}
dw-free/cgi-bin/LJ/Userpic.pm-425-
dw-free/cgi-bin/LJ/Userpic.pm:426:# FIXME: should have alt text, if it should be kept
dw-free/cgi-bin/LJ/Userpic.pm-427-sub imgtag_nosize {
dw-free/cgi-bin/LJ/Userpic.pm-428-    my $self = $_[0];
dw-free/cgi-bin/LJ/Userpic.pm-429-    return '<img src="' . $self->url . '" class="userpic-img" />';
--
dw-free/cgi-bin/LJ/Userpic.pm-622-    };
dw-free/cgi-bin/LJ/Userpic.pm-623-
dw-free/cgi-bin/LJ/Userpic.pm-624-    eval "use Image::Size;";
dw-free/cgi-bin/LJ/Userpic.pm:625:    # FIXME the filetype is supposed to be returned intthe next call
dw-free/cgi-bin/LJ/Userpic.pm-626-    # but according to the docs of Image::Size v3.2 it does not return that value
dw-free/cgi-bin/LJ/Userpic.pm-627-    my ($w, $h, $filetype) = Image::Size::imgsize($dataref);
dw-free/cgi-bin/LJ/Userpic.pm-628-    my $MAX_UPLOAD = $maxbytesize || LJ::Userpic->max_allowed_bytes($u);
--
dw-free/cgi-bin/LJ/Userpic.pm-673-            'JPG' => 'J',
dw-free/cgi-bin/LJ/Userpic.pm-674-        }->{$filetype};
dw-free/cgi-bin/LJ/Userpic.pm-675-
dw-free/cgi-bin/LJ/Userpic.pm:676:    @errors = (); # TEMP: FIXME: remove... using exceptions
dw-free/cgi-bin/LJ/Userpic.pm-677-
dw-free/cgi-bin/LJ/Userpic.pm-678-    my $dberr = 0;
dw-free/cgi-bin/LJ/Userpic.pm-679-    $u->do( "INSERT INTO userpic2 (picid, userid, fmt, width, height, " .
--
dw-free/cgi-bin/LJ/Userpic.pm-942-}
dw-free/cgi-bin/LJ/Userpic.pm-943-
dw-free/cgi-bin/LJ/Userpic.pm-944-# delete this userpic
dw-free/cgi-bin/LJ/Userpic.pm:945:# TODO: error checking/throw errors on failure
dw-free/cgi-bin/LJ/Userpic.pm-946-sub delete {
dw-free/cgi-bin/LJ/Userpic.pm-947-    my $self = $_[0];
dw-free/cgi-bin/LJ/Userpic.pm-948-    local $LJ::THROW_ERRORS = 1;
--
dw-free/cgi-bin/LJ/Userpic.pm-978-    $u->log_event('delete_userpic', { picid => $picid });
dw-free/cgi-bin/LJ/Userpic.pm-979-
dw-free/cgi-bin/LJ/Userpic.pm-980-    # best-effort on deleteing the blobs
dw-free/cgi-bin/LJ/Userpic.pm:981:    # TODO: we could fire warnings if they fail, then if $LJ::DIE_ON_WARN is set,
dw-free/cgi-bin/LJ/Userpic.pm-982-    # the ->warn methods on errobjs are actually dies.
dw-free/cgi-bin/LJ/Userpic.pm-983-    eval {
dw-free/cgi-bin/LJ/Userpic.pm-984-        if ( $self->in_mogile ) {
--
dw-free/cgi-bin/LJ/Userpic.pm-1072-
dw-free/cgi-bin/LJ/Userpic.pm-1073-    foreach my $kw (@keywords) {
dw-free/cgi-bin/LJ/Userpic.pm-1074-        my $kwid = $u->get_keyword_id( $kw );
dw-free/cgi-bin/LJ/Userpic.pm:1075:        next unless $kwid; # TODO: fire some warning that keyword was bogus
dw-free/cgi-bin/LJ/Userpic.pm-1076-
dw-free/cgi-bin/LJ/Userpic.pm-1077-        if (++$c > $LJ::MAX_USERPIC_KEYWORDS) {
dw-free/cgi-bin/LJ/Userpic.pm-1078-            push @kw_errors, $kw;
--
dw-free/cgi-bin/LJ/Emailpost.pm-244-        my ($tmpdir, $tempfile);
dw-free/cgi-bin/LJ/Emailpost.pm-245-        $tmpdir = File::Temp::tempdir( "ljmailgate_" . 'X' x 20, DIR=> $workdir );
dw-free/cgi-bin/LJ/Emailpost.pm-246-        ( undef, $tempfile ) = File::Temp::tempfile(
dw-free/cgi-bin/LJ/Emailpost.pm:247:            'sprintpcs_XXXXX',
dw-free/cgi-bin/LJ/Emailpost.pm-248-            SUFFIX => '.jpg',
dw-free/cgi-bin/LJ/Emailpost.pm-249-            OPEN   => 0,
dw-free/cgi-bin/LJ/Emailpost.pm-250-            DIR    => $tmpdir
--
dw-free/cgi-bin/LJ/Emailpost.pm-672-        $txt = $txt_e->as_string();
dw-free/cgi-bin/LJ/Emailpost.pm-673-        my $txt_fh;
dw-free/cgi-bin/LJ/Emailpost.pm-674-        ($txt_fh, $txt_f) =
dw-free/cgi-bin/LJ/Emailpost.pm:675:            File::Temp::tempfile('plaintext_XXXXXXXX', DIR => $tmpdir);
dw-free/cgi-bin/LJ/Emailpost.pm-676-        print $txt_fh $txt;
dw-free/cgi-bin/LJ/Emailpost.pm-677-        close $txt_fh;
dw-free/cgi-bin/LJ/Emailpost.pm-678-    } # otherwise, it's clearsigned
--
dw-free/cgi-bin/LJ/Subscription.pm-262-
dw-free/cgi-bin/LJ/Subscription.pm-263-    return undef unless $row;
dw-free/cgi-bin/LJ/Subscription.pm-264-    my $self = bless {%$row}, $class;
dw-free/cgi-bin/LJ/Subscription.pm:265:    # TODO validate keys of row.
dw-free/cgi-bin/LJ/Subscription.pm-266-    return $self;
dw-free/cgi-bin/LJ/Subscription.pm-267-}
dw-free/cgi-bin/LJ/Subscription.pm-268-
--
dw-free/cgi-bin/LJ/TextMessage.pm-19-
dw-free/cgi-bin/LJ/TextMessage.pm-20-package LJ::TextMessage;
dw-free/cgi-bin/LJ/TextMessage.pm-21-
dw-free/cgi-bin/LJ/TextMessage.pm:22:use URI::Escape;  # FIXME: don't use this (uri_escape() below), when we have LJ::eurl() as our standard
dw-free/cgi-bin/LJ/TextMessage.pm-23-use  HTTP::Request;
dw-free/cgi-bin/LJ/TextMessage.pm-24-use  LWP::UserAgent;
dw-free/cgi-bin/LJ/TextMessage.pm-25-use  MIME::Lite;
--
dw-free/cgi-bin/JSON.pm-472-
dw-free/cgi-bin/JSON.pm-473-C<objToJson>, C<jsonToObj>.
dw-free/cgi-bin/JSON.pm-474-
dw-free/cgi-bin/JSON.pm:475:=head1 TODO
dw-free/cgi-bin/JSON.pm-476-
dw-free/cgi-bin/JSON.pm-477-C<JSONRPC::Transport::HTTP::Daemon> in L<JSON> 1.00
dw-free/cgi-bin/JSON.pm-478-(The code has be actually written in JSONRPC::Transport::HTTP.)
--
dw-free/cgi-bin/ljtextutil.pl-37-# similar to decode_url_string below, but a nicer calling convention.  returns
dw-free/cgi-bin/ljtextutil.pl-38-# a hash of items parsed from the string passed in as the only argument.
dw-free/cgi-bin/ljtextutil.pl-39-
dw-free/cgi-bin/ljtextutil.pl:40:# FIXME: This method using \0 is being used in legacy locations
dw-free/cgi-bin/ljtextutil.pl-41-#  however should be factored out ( to Hash::MultiValue )
dw-free/cgi-bin/ljtextutil.pl-42-#  as soon as the need for the legacy use is removed.
dw-free/cgi-bin/ljtextutil.pl-43-sub parse_args {
--
dw-free/cgi-bin/ljtextutil.pl-599-                    next;
dw-free/cgi-bin/ljtextutil.pl-600-                }
dw-free/cgi-bin/ljtextutil.pl-601-
dw-free/cgi-bin/ljtextutil.pl:602:                # FIXME: ultra ghetto.
dw-free/cgi-bin/ljtextutil.pl-603-                $attr->{$attrname} = LJ::no_utf8_flag($attr->{$attrname});
dw-free/cgi-bin/ljtextutil.pl-604-                $out .= " $attrname=\"" . LJ::ehtml($attr->{$attrname}) . "\"";
dw-free/cgi-bin/ljtextutil.pl-605-            }
--
dw-free/cgi-bin/ljprotocol.pl-495-    @to = keys %to;
dw-free/cgi-bin/ljprotocol.pl-496-
dw-free/cgi-bin/ljprotocol.pl-497-    my @msg;
dw-free/cgi-bin/ljprotocol.pl:498:    BML::set_language('en'); # FIXME
dw-free/cgi-bin/ljprotocol.pl-499-
dw-free/cgi-bin/ljprotocol.pl-500-    foreach my $to (@to) {
dw-free/cgi-bin/ljprotocol.pl-501-        my $tou = LJ::load_user($to);
--
dw-free/cgi-bin/ljprotocol.pl-854-    unless ($update) {
dw-free/cgi-bin/ljprotocol.pl-855-        my @fr = $u->watched_userids;
dw-free/cgi-bin/ljprotocol.pl-856-
dw-free/cgi-bin/ljprotocol.pl:857:        # FIXME: see whether we can just get the list of users who are in the filter
dw-free/cgi-bin/ljprotocol.pl-858-        if ( $filter ) {
dw-free/cgi-bin/ljprotocol.pl-859-            my @filter_users;
dw-free/cgi-bin/ljprotocol.pl-860-
--
dw-free/cgi-bin/ljprotocol.pl-1219-        if ($req->{tz} eq 'guess') {
dw-free/cgi-bin/ljprotocol.pl-1220-            LJ::get_timezone($u, \$offset, \$time_was_faked);
dw-free/cgi-bin/ljprotocol.pl-1221-        } elsif ($req->{'tz'} =~ /^[+\-]\d\d\d\d$/) {
dw-free/cgi-bin/ljprotocol.pl:1222:            # FIXME we ought to store this timezone and make use of it somehow.
dw-free/cgi-bin/ljprotocol.pl-1223-            $offset = $req->{'tz'} / 100.0;
dw-free/cgi-bin/ljprotocol.pl-1224-        } else {
dw-free/cgi-bin/ljprotocol.pl-1225-            return fail($err, 203, "Invalid tz");
--
dw-free/cgi-bin/ljprotocol.pl-1468-                }
dw-free/cgi-bin/ljprotocol.pl-1469-
dw-free/cgi-bin/ljprotocol.pl-1470-                foreach my $to (@emails) {
dw-free/cgi-bin/ljprotocol.pl:1471:                    # TODO: html/plain text.
dw-free/cgi-bin/ljprotocol.pl-1472-                    my $body = LJ::Lang::get_text(
dw-free/cgi-bin/ljprotocol.pl-1473-                        $to->{'browselang'},
dw-free/cgi-bin/ljprotocol.pl-1474-                        'esn.moderated_submission.body', undef,
--
dw-free/cgi-bin/ljprotocol.pl-1722-    my $sclient = LJ::theschwartz();
dw-free/cgi-bin/ljprotocol.pl-1723-    if ($sclient && @jobs) {
dw-free/cgi-bin/ljprotocol.pl-1724-        my @handles = $sclient->insert_jobs(@jobs);
dw-free/cgi-bin/ljprotocol.pl:1725:        # TODO: error on failure?  depends on the job I suppose?  property of the job?
dw-free/cgi-bin/ljprotocol.pl-1726-    }
dw-free/cgi-bin/ljprotocol.pl-1727-
dw-free/cgi-bin/ljprotocol.pl-1728-    return $res;
--
dw-free/cgi-bin/ljprotocol.pl-1951-    my $entry_tags;
dw-free/cgi-bin/ljprotocol.pl-1952-
dw-free/cgi-bin/ljprotocol.pl-1953-    if ($oldevent->{security} ne $security || $qallowmask != $oldevent->{allowmask}) {
dw-free/cgi-bin/ljprotocol.pl:1954:        # FIXME: this is a hopefully temporary hack which deletes tags from the entry
dw-free/cgi-bin/ljprotocol.pl-1955-        # when the security has changed.  the real fix is to make update_logtags aware
dw-free/cgi-bin/ljprotocol.pl-1956-        # of security changes so it can update logkwsum appropriately.
dw-free/cgi-bin/ljprotocol.pl-1957-
--
dw-free/cgi-bin/ljprotocol.pl-1964-            $req->{props}->{taglist} = $entry_tags;
dw-free/cgi-bin/ljprotocol.pl-1965-        }
dw-free/cgi-bin/ljprotocol.pl-1966-
dw-free/cgi-bin/ljprotocol.pl:1967:        # FIXME: temporary hack until we can make update_logtags recognize entry security edits
dw-free/cgi-bin/ljprotocol.pl-1968-        if ( LJ::Tags::can_control_tags( $uowner, $u ) || LJ::Tags::can_add_tags( $uowner, $u ) ) {
dw-free/cgi-bin/ljprotocol.pl-1969-            my $delete = LJ::Tags::delete_logtags( $uowner, $itemid );
dw-free/cgi-bin/ljprotocol.pl-1970-            $do_tags_security = 1;
--
dw-free/cgi-bin/ljprotocol.pl-2139-    my $sclient = LJ::theschwartz();
dw-free/cgi-bin/ljprotocol.pl-2140-    if ( $sclient && @jobs ) {
dw-free/cgi-bin/ljprotocol.pl-2141-        my @handles = $sclient->insert_jobs(@jobs);
dw-free/cgi-bin/ljprotocol.pl:2142:        # TODO: error on failure?  depends on the job I suppose?  property of the job?
dw-free/cgi-bin/ljprotocol.pl-2143-    }
dw-free/cgi-bin/ljprotocol.pl-2144-
dw-free/cgi-bin/ljprotocol.pl-2145-    # ensure our xposted edit fires
--
dw-free/cgi-bin/ljprotocol.pl-2215-        my $qmonth = $dbr->quote($req->{'month'});
dw-free/cgi-bin/ljprotocol.pl-2216-        my $qday = $dbr->quote($req->{'day'});
dw-free/cgi-bin/ljprotocol.pl-2217-        $where = "AND year=$qyear AND month=$qmonth AND day=$qday";
dw-free/cgi-bin/ljprotocol.pl:2218:        $limit = "LIMIT 200";  # FIXME: unhardcode this constant (also in ljviews.pl)
dw-free/cgi-bin/ljprotocol.pl-2219-
dw-free/cgi-bin/ljprotocol.pl-2220-        # see note above about why the sort order is different
dw-free/cgi-bin/ljprotocol.pl-2221-        $orderby = $is_community ? "ORDER BY logtime" : "ORDER BY eventtime";
--
dw-free/cgi-bin/ljprotocol.pl-2409-
dw-free/cgi-bin/ljprotocol.pl-2410-        foreach my $itemid (keys %props) {
dw-free/cgi-bin/ljprotocol.pl-2411-            # 'replycount' is a pseudo-prop, don't send it.
dw-free/cgi-bin/ljprotocol.pl:2412:            # FIXME: this goes away after we restructure APIs and
dw-free/cgi-bin/ljprotocol.pl-2413-            # replycounts cease being transferred in props
dw-free/cgi-bin/ljprotocol.pl-2414-            delete $props{$itemid}->{'replycount'};
dw-free/cgi-bin/ljprotocol.pl-2415-
--
dw-free/cgi-bin/ljprotocol.pl-3095-
dw-free/cgi-bin/ljprotocol.pl-3096-    my %seen;  # mashifiedptr -> 1
dw-free/cgi-bin/ljprotocol.pl-3097-
dw-free/cgi-bin/ljprotocol.pl:3098:    # FIXME: should be a utf-8 sort
dw-free/cgi-bin/ljprotocol.pl-3099-    foreach my $kw ( sort keys %{$pi->{kw}} ) {
dw-free/cgi-bin/ljprotocol.pl-3100-        my $pic = $pi->{kw}{$kw};
dw-free/cgi-bin/ljprotocol.pl-3101-        $seen{$pic} = 1;
--
dw-free/cgi-bin/ljlib.pl-214-    my $id = {
dw-free/cgi-bin/ljlib.pl-215-        "userpic" => 1,
dw-free/cgi-bin/ljlib.pl-216-    }->{$name};
dw-free/cgi-bin/ljlib.pl:217:    # FIXME: add hook support, so sites can't define their own
dw-free/cgi-bin/ljlib.pl-218-    # general code gets priority on numbers, say, 1-200, so verify
dw-free/cgi-bin/ljlib.pl-219-    # hook returns a number 201-255
dw-free/cgi-bin/ljlib.pl-220-    return $id if $id;
--
dw-free/cgi-bin/ljlib.pl-715-sub auth_digest {
dw-free/cgi-bin/ljlib.pl-716-    my ($r) = @_;
dw-free/cgi-bin/ljlib.pl-717-
dw-free/cgi-bin/ljlib.pl:718:    # FIXME: Move this up to the caller.
dw-free/cgi-bin/ljlib.pl-719-    $r = DW::Request->get;
dw-free/cgi-bin/ljlib.pl-720-
dw-free/cgi-bin/ljlib.pl-721-    my $decline = sub {
--
dw-free/cgi-bin/ljlib.pl-736-    my $header = $r->header_in("Authorization");
dw-free/cgi-bin/ljlib.pl-737-
dw-free/cgi-bin/ljlib.pl-738-    # parse it
dw-free/cgi-bin/ljlib.pl:739:    # TODO: could there be "," or " " inside attribute values, requiring
dw-free/cgi-bin/ljlib.pl-740-    # trickier parsing?
dw-free/cgi-bin/ljlib.pl-741-
dw-free/cgi-bin/ljlib.pl-742-    my @vals = split(/[, \s]/, $header);
--
dw-free/cgi-bin/ljlib.pl-1082-sub start_request
dw-free/cgi-bin/ljlib.pl-1083-{
dw-free/cgi-bin/ljlib.pl-1084-    handle_caches();
dw-free/cgi-bin/ljlib.pl:1085:    # TODO: check process growth size
dw-free/cgi-bin/ljlib.pl-1086-
dw-free/cgi-bin/ljlib.pl-1087-    # clear per-request caches
dw-free/cgi-bin/ljlib.pl-1088-    LJ::unset_remote();               # clear cached remote
--
dw-free/bin/upgrading/s2layers/core2.s2-1141-## Display settings - general
dw-free/bin/upgrading/s2layers/core2.s2-1142-##===============================
dw-free/bin/upgrading/s2layers/core2.s2-1143-
dw-free/bin/upgrading/s2layers/core2.s2:1144:# FIXME: Not all of these properties are hooked into the appropriate functions, so setting them does not yet work.
dw-free/bin/upgrading/s2layers/core2.s2-1145-
dw-free/bin/upgrading/s2layers/core2.s2-1146-property int num_items_recent {
dw-free/bin/upgrading/s2layers/core2.s2-1147-    des = "Number of journal entries to show on the Recent Entries page";
--
dw-free/bin/upgrading/s2layers/core2.s2-1304-set time_ago_hours = "1 hour // # hours";
dw-free/bin/upgrading/s2layers/core2.s2-1305-set time_ago_days = "1 day // # days";
dw-free/bin/upgrading/s2layers/core2.s2-1306-
dw-free/bin/upgrading/s2layers/core2.s2:1307:# FIXME: this is not currently implemented, so not showing it in the UI yet
dw-free/bin/upgrading/s2layers/core2.s2-1308-property string reg_firstdayofweek {
dw-free/bin/upgrading/s2layers/core2.s2-1309-    noui = 1;
dw-free/bin/upgrading/s2layers/core2.s2-1310-    des = "The day of the week the calendar weeks starts on.";
--
dw-free/bin/upgrading/s2layers/core2.s2-1398-## Display settings - sidebar
dw-free/bin/upgrading/s2layers/core2.s2-1399-##===============================
dw-free/bin/upgrading/s2layers/core2.s2-1400-
dw-free/bin/upgrading/s2layers/core2.s2:1401:# FIXME: Not sure if none is a sensible value, but need something appropriate as a default for designers who are not using this option.
dw-free/bin/upgrading/s2layers/core2.s2-1402-# In order to use layout_type on /customize/ in official layouts, the associated S2Theme file needs to be edited, and then changing the layout type will select a different wizard-layer.  Non-official layouts can use this property on the /customize/options.bml page.  Both methods will add the layout_type to <body> in the Page::print-wrapper to allow CSS to be written accordingly.
dw-free/bin/upgrading/s2layers/core2.s2-1403-
dw-free/bin/upgrading/s2layers/core2.s2-1404-property string layout_type {
--
dw-free/bin/upgrading/s2layers/core2.s2-1852-    grouped = 1;
dw-free/bin/upgrading/s2layers/core2.s2-1853-    allow_other = 1;
dw-free/bin/upgrading/s2layers/core2.s2-1854-}
dw-free/bin/upgrading/s2layers/core2.s2:1855:# FIXME: This should be grouped, but then it doesn't get a label.
dw-free/bin/upgrading/s2layers/core2.s2-1856-property int image_background_header_height {
dw-free/bin/upgrading/s2layers/core2.s2-1857-    des = "The height of your header, in pixels.  Use 0 for default.";
dw-free/bin/upgrading/s2layers/core2.s2-1858-    example = "50";
--
dw-free/bin/upgrading/s2layers/core2.s2-3374-    var string display_type = ($*userlite_interaction_links == "text") ? " text-links" : " icon-links";
dw-free/bin/upgrading/s2layers/core2.s2-3375-
dw-free/bin/upgrading/s2layers/core2.s2-3376-    """<ul class="userlite-interaction-links$display_type">""";
dw-free/bin/upgrading/s2layers/core2.s2:3377:    # FIXME: HTML is not valid if there are no items inside a list, so there should be a
dw-free/bin/upgrading/s2layers/core2.s2-3378-    # check that there are user interaction links before opening the ul class.
dw-free/bin/upgrading/s2layers/core2.s2-3379-    var Link link;
dw-free/bin/upgrading/s2layers/core2.s2-3380-    var int count;
--
dw-free/bin/upgrading/s2layers/core2.s2-4823-function EntryLite::print_wrapper_start() {
dw-free/bin/upgrading/s2layers/core2.s2-4824-}
dw-free/bin/upgrading/s2layers/core2.s2-4825-function Entry::print_wrapper_start() {
dw-free/bin/upgrading/s2layers/core2.s2:4826:# FIXME: need to ensure that calling the alternate function doesn't interfere with the printing of comments or the printing of module groups.
dw-free/bin/upgrading/s2layers/core2.s2-4827-    var string alternate = alternate ("entry-wrapper-odd", "entry-wrapper-even");
dw-free/bin/upgrading/s2layers/core2.s2-4828-    var string security = $this.security ? $this.security : "public";
dw-free/bin/upgrading/s2layers/core2.s2-4829-    var string adult_content_level = $this.adult_content_level ? $this.adult_content_level : "none";
--
dw-free/bin/upgrading/s2layers/core2.s2-4980-
dw-free/bin/upgrading/s2layers/core2.s2-4981-    var string display_type = ($*comment_management_links == "text") ? " text-links" : " icon-links";
dw-free/bin/upgrading/s2layers/core2.s2-4982-
dw-free/bin/upgrading/s2layers/core2.s2:4983:    # FIXME: HTML is not valid if there are no items inside a list, so there should
dw-free/bin/upgrading/s2layers/core2.s2-4984-    # be a check that there are comment management links before opening the ul class.
dw-free/bin/upgrading/s2layers/core2.s2-4985-    """<ul class="comment-management-links$display_type">""";
dw-free/bin/upgrading/s2layers/core2.s2-4986-    var Link link;
--
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2082-#      #                                          #
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2083-###################################################
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2084-
dw-free/bin/upgrading/s2layers/zesty/layout.s2:2085:# TODO: this is broken in the core.
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2086-# Waiting on http://rt.livejournal.org/Ticket/Display.html?id=1266 .
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2087-#
dw-free/bin/upgrading/s2layers/zesty/layout.s2-2088-function EntryPage::lay_comment_poster_is_suspended(Comment c) : bool {
--
dw-free/bin/upgrading/texttool.pl-501-    $out->('-', "Done.");
dw-free/bin/upgrading/texttool.pl-502-}
dw-free/bin/upgrading/texttool.pl-503-
dw-free/bin/upgrading/texttool.pl:504:# TODO: use LJ::LangDatFile->save
dw-free/bin/upgrading/texttool.pl-505-sub dumptext {
dw-free/bin/upgrading/texttool.pl-506-    my $to_cvs = shift;
dw-free/bin/upgrading/texttool.pl-507-    my $append = shift;
--
dw-free/bin/upgrading/update-db-general.pl-392-    insert_time INT UNSIGNED NOT NULL,
dw-free/bin/upgrading/update-db-general.pl-393-    value INT UNSIGNED NOT NULL,
dw-free/bin/upgrading/update-db-general.pl-394-
dw-free/bin/upgrading/update-db-general.pl:395:    -- FIXME: This is good for retrieving data for a single category+key, but
dw-free/bin/upgrading/update-db-general.pl-396-    -- maybe not as good if we want all keys for the category, with a limit on
dw-free/bin/upgrading/update-db-general.pl-397-    -- time (ie, last 5 entries, or last 2 weeks). Do we need an extra index?
dw-free/bin/upgrading/update-db-general.pl-398-    INDEX (category_id, key_id, insert_time)
--
dw-free/bin/upgrading/update-db-general.pl-1925-)
dw-free/bin/upgrading/update-db-general.pl-1926-EOC
dw-free/bin/upgrading/update-db-general.pl-1927-
dw-free/bin/upgrading/update-db-general.pl:1928:# TODO: why is this myisam?
dw-free/bin/upgrading/update-db-general.pl-1929-register_tablecreate("recentactions", <<'EOC');
dw-free/bin/upgrading/update-db-general.pl-1930-CREATE TABLE recentactions (
dw-free/bin/upgrading/update-db-general.pl-1931-    what CHAR(2) NOT NULL
--
dw-free/bin/upgrading/update-db-general.pl-3433-                 "exptype ENUM('short', 'long', 'once') NOT NULL");
dw-free/bin/upgrading/update-db-general.pl-3434-    }
dw-free/bin/upgrading/update-db-general.pl-3435-
dw-free/bin/upgrading/update-db-general.pl:3436:    # TODO: fix initial definition to match this, make table innodb
dw-free/bin/upgrading/update-db-general.pl-3437-    if (column_type("ml_items", "itid") =~ /auto_increment/) {
dw-free/bin/upgrading/update-db-general.pl-3438-        do_alter("ml_items",
dw-free/bin/upgrading/update-db-general.pl-3439-                 "ALTER TABLE ml_items MODIFY COLUMN " .
dw-free/bin/upgrading/update-db-general.pl-3440-                 "itid MEDIUMINT UNSIGNED NOT NULL DEFAULT 0");
dw-free/bin/upgrading/update-db-general.pl-3441-    }
dw-free/bin/upgrading/update-db-general.pl-3442-
dw-free/bin/upgrading/update-db-general.pl:3443:    # TODO: fix initial definition to match this, make table innodb
dw-free/bin/upgrading/update-db-general.pl-3444-    if (column_type("ml_text", "txtid") =~ /auto_increment/) {
dw-free/bin/upgrading/update-db-general.pl-3445-        do_alter("ml_text",
dw-free/bin/upgrading/update-db-general.pl-3446-                 "ALTER TABLE ml_text MODIFY COLUMN " .
--
dw-free/bin/deleteusers.pl-42-    if (time() - $lastbreak > 3) { print "pause.\n"; sleep(1); $lastbreak = time(); }
dw-free/bin/deleteusers.pl-43-};
dw-free/bin/deleteusers.pl-44-
dw-free/bin/deleteusers.pl:45:# FIXME: This will soon need to be changed to use methods of the $u
dw-free/bin/deleteusers.pl-46-#    object rather than global LJ:: functions, but this should work
dw-free/bin/deleteusers.pl-47-#    for now.
dw-free/bin/deleteusers.pl-48-
--
dw-free/bin/moveucluster.pl-881-                # so we'll try as big as possible.  but not with myisam -- need to start
dw-free/bin/moveucluster.pl-882-                # small there too, unless we have a guess at the number of rows remaining.
dw-free/bin/moveucluster.pl-883-
dw-free/bin/moveucluster.pl:884:                my $src_is_innodb = 0;  # FIXME: detect this.  but first verify HANDLER differences.
dw-free/bin/moveucluster.pl-885-                if ($src_is_innodb) {
dw-free/bin/moveucluster.pl-886-                    $batch_size = $max_batch;
dw-free/bin/moveucluster.pl-887-                } else {
--
dw-free/bin/dbcheck.pl-174-            if ($ss->{'master_log_file'} eq $ss->{'relay_master_log_file'}) {
dw-free/bin/dbcheck.pl-175-                $diff = $ss->{'read_master_log_pos'} - $ss->{'exec_master_log_pos'};
dw-free/bin/dbcheck.pl-176-            } else {
dw-free/bin/dbcheck.pl:177:                $diff = "XXXXXXX";
dw-free/bin/dbcheck.pl-178-                push @errors, "Wrong log file: $d->{name}";
dw-free/bin/dbcheck.pl-179-            }
dw-free/bin/dbcheck.pl-180-        } else {
dw-free/bin/dbcheck.pl:181:            $diff = "XXXXXXX";
dw-free/bin/dbcheck.pl-182-            $ss->{last_error} =~ s/[^\n\r\t\x20-\x7e]//g;
dw-free/bin/dbcheck.pl-183-            push @errors, "Slave not running: $d->{name}: $ss->{last_error}";
dw-free/bin/dbcheck.pl-184-        }
--
dw-free/bin/ljubackup.pl-686-                }
dw-free/bin/ljubackup.pl-687-
dw-free/bin/ljubackup.pl-688-                # Mark the user as "in progress" by setting the destination
dw-free/bin/ljubackup.pl:689:                # cluster field. :FIXME: This is obviously stupid to disconnect
dw-free/bin/ljubackup.pl-690-                # and reconnect every time, but since the handle is b0rked after
dw-free/bin/ljubackup.pl-691-                # the ->run() below fork()s, this is necessary for it to work.
dw-free/bin/ljubackup.pl-692-
dw-free/bin/ljubackup.pl:693:                # :FIXME: Is this necessary? We obviously don't have a
dw-free/bin/ljubackup.pl-694-                # destination cluster...
dw-free/bin/ljubackup.pl-695-
dw-free/bin/ljubackup.pl-696-                #LJ::DB::disconnect_dbs();
--
dw-free/bin/ljubackup.pl-823-		$user,		# User object iterator
dw-free/bin/ljubackup.pl-824-       );
dw-free/bin/ljubackup.pl-825-
dw-free/bin/ljubackup.pl:826:    # :FIXME: This is the only way I can make this query work. If I don't do
dw-free/bin/ljubackup.pl-827-    # this, I get "MySQL has gone away" on the second query, despite calling
dw-free/bin/ljubackup.pl-828-    # disconnect_dbs() in the thread's start() method immediately after the
dw-free/bin/ljubackup.pl-829-    # fork(), too. Perhaps I'll revisit this after hacking on DBI::Role for a
--
dw-free/bin/ljblockwatcher.pl-79-
dw-free/bin/ljblockwatcher.pl-80-=cut
dw-free/bin/ljblockwatcher.pl-81-
dw-free/bin/ljblockwatcher.pl:82:# :TODO: Change param order in received msgs
dw-free/bin/ljblockwatcher.pl-83-
dw-free/bin/ljblockwatcher.pl-84-##############################################################################
dw-free/bin/ljblockwatcher.pl-85-package dbreportd;
--
dw-free/bin/moveuclusterd.pl-1058-    my JobServer $self = shift;
dw-free/bin/moveuclusterd.pl-1059-    my $agent = shift;
dw-free/bin/moveuclusterd.pl-1060-
dw-free/bin/moveuclusterd.pl:1061:    # Stop incoming connections (:TODO: remove it from Danga::Socket?)
dw-free/bin/moveuclusterd.pl-1062-    $self->{listener}->close;
dw-free/bin/moveuclusterd.pl-1063-
dw-free/bin/moveuclusterd.pl-1064-    # Clear jobs so no more get handed out while clients are closing
--
dw-free/bin/moveuclusterd.pl-1875-    # command is assumed by the help system to be standalone and take no arguments.
dw-free/bin/moveuclusterd.pl-1876-    %CommandTable = (
dw-free/bin/moveuclusterd.pl-1877-
dw-free/bin/moveuclusterd.pl:1878:        # :TODO: Implement a 'desc' or 'longhelp' or something to augment the
dw-free/bin/moveuclusterd.pl-1879-        # per-command help.
dw-free/bin/moveuclusterd.pl-1880-
dw-free/bin/moveuclusterd.pl-1881-        get_job  => {
--
dw-free/bin/worker/import-scheduler-99-        } @$statusrows
dw-free/bin/worker/import-scheduler-100-    );
dw-free/bin/worker/import-scheduler-101-
dw-free/bin/worker/import-scheduler:102:# FIXME: handle the case where the user already has an import_job going and it's
dw-free/bin/worker/import-scheduler-103-# different from the current import_data_id that we are trying to import for.
dw-free/bin/worker/import-scheduler-104-# if we don't handle this case, we're going to get pretty confused about what
dw-free/bin/worker/import-scheduler-105-# to update later...
--
dw-free/bin/worker/sphinx-search-gm-113-            push @out, $match;
dw-free/bin/worker/sphinx-search-gm-114-        }
dw-free/bin/worker/sphinx-search-gm-115-
dw-free/bin/worker/sphinx-search-gm:116:        # FIXME: this should use some other index name than 'test1' heh, and we should probably
dw-free/bin/worker/sphinx-search-gm-117-        # try to figure out the language of the journal being searched (or the searcher?) and use
dw-free/bin/worker/sphinx-search-gm-118-        # an appropriate stemming library?  (future expansion opportunity)
dw-free/bin/worker/sphinx-search-gm-119-        my $exc = $sx->BuildExcerpts( [ map { $_->{entry} } @out ], 'dw1stemmed', $query, {} ) || [];
--
dw-free/bin/worker/subscribe-hubbub-78-            'hub.topic'         => $topicurl,
dw-free/bin/worker/subscribe-hubbub-79-            'hub.verify'        => 'async',
dw-free/bin/worker/subscribe-hubbub-80-            'hub.lease_seconds' => 86400 * 30,  # 30 days.  we assume we care for a while.
dw-free/bin/worker/subscribe-hubbub:81:#            'hub.secret' FIXME: implement, this is part of PSHB 0.2
dw-free/bin/worker/subscribe-hubbub-82-            'hub.verify_token'  => $verifytoken,
dw-free/bin/worker/subscribe-hubbub-83-        } );
dw-free/bin/worker/subscribe-hubbub-84-
--
dw-free/bin/worker/subscribe-hubbub-96-    # time we see a feed reference a (userid, huburl, topicurl) combination.  if one of those
dw-free/bin/worker/subscribe-hubbub-97-    # stops getting referenced for some period of time (24 hours?) then we should consider
dw-free/bin/worker/subscribe-hubbub-98-    # that subscription to be invalid.  (and in fact, we should unsubscribe.)
dw-free/bin/worker/subscribe-hubbub:99:    # FIXME: implement this ;)
dw-free/bin/worker/subscribe-hubbub-100-}
dw-free/bin/worker/subscribe-hubbub-101-
dw-free/bin/worker/subscribe-hubbub-102-
--
dw-free/bin/worker/incoming-email-330-    );
dw-free/bin/worker/incoming-email-331-
dw-free/bin/worker/incoming-email-332-    if (@errors) {
dw-free/bin/worker/incoming-email:333:        # FIXME: detect trasient vs. permanent errors (changes to
dw-free/bin/worker/incoming-email-334-        # file_request above, probably) and either dequeue or try
dw-free/bin/worker/incoming-email-335-        # later
dw-free/bin/worker/incoming-email-336-        return dequeue("Support errors: @errors");
--
dw-free/bin/ljdb-88-$role ||= "master";
dw-free/bin/ljdb-89-
dw-free/bin/ljdb-90-# find a database (not necessarily an alive one) that matches the role
dw-free/bin/ljdb:91:# you need.  FIXME: capture mysql's output and try and reconnect to
dw-free/bin/ljdb-92-# another one if it fails?
dw-free/bin/ljdb-93-
dw-free/bin/ljdb-94-my $db;
--
dw-free/bin/ljumover.pl-876-                }
dw-free/bin/ljumover.pl-877-
dw-free/bin/ljumover.pl-878-                # Mark the user as "in progress" by setting the destination
dw-free/bin/ljumover.pl:879:                # cluster field. :FIXME: This is obviously stupid to disconnect
dw-free/bin/ljumover.pl-880-                # and reconnect every time, but since the handle is b0rked after
dw-free/bin/ljumover.pl-881-                # the ->run() below fork()s, this is necessary for it to work.
dw-free/bin/ljumover.pl-882-                LJ::DB::disconnect_dbs();
--
dw-free/bin/ljumover.pl-1023-        @users,     # User rows
dw-free/bin/ljumover.pl-1024-       );
dw-free/bin/ljumover.pl-1025-
dw-free/bin/ljumover.pl:1026:    # :FIXME: This is the only way I can make this query work. If I don't do
dw-free/bin/ljumover.pl-1027-    # this, I get "MySQL has gone away" on the second query, despite calling
dw-free/bin/ljumover.pl-1028-    # disconnect_dbs() in the thread's start() method immediately after the
dw-free/bin/ljumover.pl-1029-    # fork(), too. Perhaps I'll revisit this after hacking on DBI::Role for a
--
dw-free/htdocs/stats.bml-216-
dw-free/htdocs/stats.bml-217-
dw-free/htdocs/stats.bml-218- # return early, since the graphs below are pretty much broken now
dw-free/htdocs/stats.bml:219: # with index changes.  FIXME: make alternate means to generate stats
dw-free/htdocs/stats.bml-220- return $ret;
dw-free/htdocs/stats.bml-221-
dw-free/htdocs/stats.bml-222- ### graphs!
--
dw-free/htdocs/mobile/read.bml-36-#    my $filter;
dw-free/htdocs/mobile/read.bml-37-    my $groupname = "All friends";
dw-free/htdocs/mobile/read.bml-38-
dw-free/htdocs/mobile/read.bml:39:# FIXME: WTF reading groups
dw-free/htdocs/mobile/read.bml-40-#    foreach ("Mobile View", "Default View") {
dw-free/htdocs/mobile/read.bml-41-#        if (my $grp = LJ::get_friend_group($u, { 'name' => $_ })) {
dw-free/htdocs/mobile/read.bml-42-#            $groupname = $_;
--
dw-free/htdocs/profile.bml-248-        };
dw-free/htdocs/profile.bml-249-
dw-free/htdocs/profile.bml-250-        # separate openids by site
dw-free/htdocs/profile.bml:251:        # FIXME: use DW::External methods here?
dw-free/htdocs/profile.bml-252-        foreach my $u ( @$openids ) {
dw-free/htdocs/profile.bml-253-            my $id = $u->display_name;
dw-free/htdocs/profile.bml-254-            my @parts = split /\./, $id;
--
dw-free/htdocs/profile.bml-753-            # if the option to hide subscribers is set and the person cannot manage the communities.
dw-free/htdocs/profile.bml-754-            # It means the profile page is still broken to people who manage the community, though, but
dw-free/htdocs/profile.bml-755-            # it doesn't break things for smaller communities by not loading them for the admins.
dw-free/htdocs/profile.bml:756:            # FIXME: This overall situation of profile pages choking up for large amounts of subscribers or members
dw-free/htdocs/profile.bml-757-            #   needs to be fixed in a more elegant and useful way.
dw-free/htdocs/profile.bml-758-            unless $u->prop( 'opt_hidefriendofs' ) && ( !$remote || !$remote->can_manage( $u ) );
dw-free/htdocs/profile.bml-759-    }
--
dw-free/htdocs/delcomment.bml-28-    my $error = sub {
dw-free/htdocs/delcomment.bml-29-        if ($jsmode) {
dw-free/htdocs/delcomment.bml-30-            BML::finish();
dw-free/htdocs/delcomment.bml:31:            # FIXME: remove once we've switched over completely to jquery
dw-free/htdocs/delcomment.bml-32-            if ( !!$GET{json} ) {
dw-free/htdocs/delcomment.bml-33-                sleep 1 if $LJ::IS_DEV_SERVER;
dw-free/htdocs/delcomment.bml-34-                return JSON::objToJson( { error => $_[0] } );
--
dw-free/htdocs/community/members.bml-503-    my $dbr = LJ::get_db_reader();
dw-free/htdocs/community/members.bml-504-
dw-free/htdocs/community/members.bml-505-    # get all community edges
dw-free/htdocs/community/members.bml:506:    # FIXME: kind of lame to do it this way, manually, instead of having accessors for this...
dw-free/htdocs/community/members.bml-507-    my $sth = $dbr->prepare("SELECT r.targetid, r.type, u.user FROM reluser r, useridmap u " .
dw-free/htdocs/community/members.bml-508-                            "WHERE r.targetid = u.userid AND r.userid=? AND r.type IN ($typein)");
dw-free/htdocs/community/members.bml-509-    $sth->execute($cid);
--
dw-free/htdocs/preview/entry.bml-92-        $stylesys = 1; $styleid = 0;
dw-free/htdocs/preview/entry.bml-93-    }
dw-free/htdocs/preview/entry.bml-94-
dw-free/htdocs/preview/entry.bml:95:    # TODO: clean up this codepath/logic
dw-free/htdocs/preview/entry.bml-96-    # "stylesys == 1" in here means that you're viewing a BML page, not customized comemnts
dw-free/htdocs/preview/entry.bml-97-    if ($stylesys == 1) {
dw-free/htdocs/preview/entry.bml-98-        # pre-load common strings for little speed and less typing later
--
dw-free/htdocs/js/subfilters.js-335-    $.post( '/__rpc_contentfilters?mode=save_filters&user=' + DW.currentUser,
dw-free/htdocs/js/subfilters.js-336-        { 'json': JSON.stringify( cfFilters ) },
dw-free/htdocs/js/subfilters.js-337-        function( data ) {
dw-free/htdocs/js/subfilters.js:338:            // FIXME: error handling...
dw-free/htdocs/js/subfilters.js-339-            if ( !data.ok )
dw-free/htdocs/js/subfilters.js-340-                return;
dw-free/htdocs/js/subfilters.js-341-
--
dw-free/htdocs/js/subfilters.js-368-    if ( !filt || !member )
dw-free/htdocs/js/subfilters.js-369-        return;
dw-free/htdocs/js/subfilters.js-370-
dw-free/htdocs/js/subfilters.js:371:    // FIXME: don't always reget the tags
dw-free/htdocs/js/subfilters.js-372-    $.getJSON( '/__rpc_general?mode=list_tags&user=' + user.username, cfUpdateTags );
dw-free/htdocs/js/subfilters.js-373-
dw-free/htdocs/js/subfilters.js-374-    // clear out both of the tag lists
--
dw-free/htdocs/js/subfilters.js-501-    $.getJSON( '/__rpc_contentfilters?mode=create_filter&user=' + DW.currentUser + '&name=' + name,
dw-free/htdocs/js/subfilters.js-502-        function( data ) {
dw-free/htdocs/js/subfilters.js-503-            // no id means some sort of failure
dw-free/htdocs/js/subfilters.js:504:            // FIXME: error handling so the user knows what's up
dw-free/htdocs/js/subfilters.js-505-            if ( !data.id || !data.name )
dw-free/htdocs/js/subfilters.js-506-                return;
dw-free/htdocs/js/subfilters.js-507-
--
dw-free/htdocs/js/subfilters.js-530-    if ( !filt )
dw-free/htdocs/js/subfilters.js-531-        return;
dw-free/htdocs/js/subfilters.js-532-
dw-free/htdocs/js/subfilters.js:533:    // FIXME: don't think dialogs are accessible at all
dw-free/htdocs/js/subfilters.js-534-    var renamed = prompt( 'Rename filter to:', filt.name );
dw-free/htdocs/js/subfilters.js-535-    if ( renamed != null )
dw-free/htdocs/js/subfilters.js-536-        filt.name = renamed;
--
dw-free/htdocs/js/subfilters.js-590-
dw-free/htdocs/js/subfilters.js-591-    $.getJSON( '/__rpc_contentfilters?mode=delete_filter&user=' + DW.currentUser + '&id=' + filt.id,
dw-free/htdocs/js/subfilters.js-592-        function( data ) {
dw-free/htdocs/js/subfilters.js:593:            // FIXME: error handling ...
dw-free/htdocs/js/subfilters.js-594-            if ( !data.ok )
dw-free/htdocs/js/subfilters.js-595-                return;
dw-free/htdocs/js/subfilters.js-596-
--
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-120-			console.log.apply('', arguments);
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-121-	},
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-122-	
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js:123:	// TODO rename to "widget" when switching to widget factory
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-124-	_widgetDatepicker: function() {
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-125-		return this.dpDiv;
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-126-	},
--
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-674-		var borders = $.datepicker._getBorders(inst.dpDiv);
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-675-		inst.dpDiv.empty().append(this._generateHTML(inst));
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-676-		var cover = inst.dpDiv.find('iframe.ui-datepicker-cover'); // IE6- only
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js:677:		if( !!cover.length ){ //avoid call to outerXXXX() when not in IE6
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-678-			cover.css({left: -borders[0], top: -borders[1], width: inst.dpDiv.outerWidth(), height: inst.dpDiv.outerHeight()})
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-679-		}
dw-free/htdocs/js/jquery/jquery.ui.datepicker.js-680-		inst.dpDiv.find('button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a')
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-41-		this.element
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-42-			.addClass( "ui-autocomplete-input" )
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-43-			.attr( "autocomplete", "off" )
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:44:			// TODO verify these actually work as intended
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-45-			.attr({
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-46-				role: "textbox",
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-47-				"aria-autocomplete": "list",
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-356-			.empty()
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-357-			.zIndex( this.element.zIndex() + 1 );
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-358-		this._renderMenu( ul, items );
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:359:		// TODO refresh should check if the active item is still in the dom, removing the need for a manual deactivate
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-360-		this.menu.deactivate();
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-361-		this.menu.refresh();
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-362-
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-545-		}
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-546-	},
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-547-
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:548:	// TODO merge with previousPage
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-549-	nextPage: function(event) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-550-		if (this.hasScroll()) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:551:			// TODO merge with no-scroll-else
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-552-			if (!this.active || this.last()) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-553-				this.activate(event, this.element.children(".ui-menu-item:first"));
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-554-				return;
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-557-				height = this.element.height(),
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-558-				result = this.element.children(".ui-menu-item").filter(function() {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-559-					var close = $(this).offset().top - base - height + $(this).height();
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:560:					// TODO improve approximation
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-561-					return close < 10 && close > -10;
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-562-				});
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-563-
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:564:			// TODO try to catch this earlier when scrollTop indicates the last page anyway
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-565-			if (!result.length) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-566-				result = this.element.children(".ui-menu-item:last");
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-567-			}
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-572-		}
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-573-	},
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-574-
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:575:	// TODO merge with nextPage
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-576-	previousPage: function(event) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-577-		if (this.hasScroll()) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:578:			// TODO merge with no-scroll-else
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-579-			if (!this.active || this.first()) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-580-				this.activate(event, this.element.children(".ui-menu-item:last"));
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-581-				return;
--
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-585-				height = this.element.height();
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-586-				result = this.element.children(".ui-menu-item").filter(function() {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-587-					var close = $(this).offset().top - base + height - $(this).height();
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:588:					// TODO improve approximation
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-589-					return close < 10 && close > -10;
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-590-				});
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-591-
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js:592:			// TODO try to catch this earlier when scrollTop indicates the last page anyway
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-593-			if (!result.length) {
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-594-				result = this.element.children(".ui-menu-item:first");
dw-free/htdocs/js/jquery/jquery.ui.autocomplete.js-595-			}
--
dw-free/htdocs/js/jquery/jquery.ui.position.js-37-		targetWidth = target.width();
dw-free/htdocs/js/jquery/jquery.ui.position.js-38-		targetHeight = target.height();
dw-free/htdocs/js/jquery/jquery.ui.position.js-39-		basePosition = { top: 0, left: 0 };
dw-free/htdocs/js/jquery/jquery.ui.position.js:40:	// TODO: use $.isWindow() in 1.9
dw-free/htdocs/js/jquery/jquery.ui.position.js-41-	} else if ( targetElem.setTimeout ) {
dw-free/htdocs/js/jquery/jquery.ui.position.js-42-		targetWidth = target.width();
dw-free/htdocs/js/jquery/jquery.ui.position.js-43-		targetHeight = target.height();
--
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-172-
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-173-		//handling of deprecated beforeclose (vs beforeClose) option
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-174-		//Ticket #4669 http://dev.jqueryui.com/ticket/4669
dw-free/htdocs/js/jquery/jquery.ui.dialog.js:175:		//TODO: remove in 1.9pre
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-176-		if ($.isFunction(options.beforeclose) && !$.isFunction(options.beforeClose)) {
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-177-			options.beforeClose = options.beforeclose;
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-178-		}
--
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-564-		switch (key) {
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-565-			//handling of deprecated beforeclose (vs beforeClose) option
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-566-			//Ticket #4669 http://dev.jqueryui.com/ticket/4669
dw-free/htdocs/js/jquery/jquery.ui.dialog.js:567:			//TODO: remove in 1.9pre
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-568-			case "beforeclose":
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-569-				key = "beforeClose";
dw-free/htdocs/js/jquery/jquery.ui.dialog.js-570-				break;
--
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-152-		};
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-153-
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-154-		// Only after we got the offset, we can change the helper's position to absolute
dw-free/htdocs/js/jquery/jquery.ui.sortable.js:155:		// TODO: Still need to figure out a way to make relative sorting possible
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-156-		this.helper.css("position", "absolute");
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-157-		this.cssPosition = this.helper.css("position");
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-158-
--
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-679-		//Append it after the actual current item
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-680-		self.currentItem.after(self.placeholder);
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-681-
dw-free/htdocs/js/jquery/jquery.ui.sortable.js:682:		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-683-		o.placeholder.update(self, self.placeholder);
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-684-
dw-free/htdocs/js/jquery/jquery.ui.sortable.js-685-	},
--
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-36-		this.started = false;
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-37-	},
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-38-
dw-free/htdocs/js/jquery/jquery.ui.mouse.js:39:	// TODO: make sure destroying one instance of mouse doesn't mess with
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-40-	// other instances of mouse
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-41-	_mouseDestroy: function() {
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-42-		this.element.unbind('.'+this.widgetName);
--
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-44-
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-45-	_mouseDown: function(event) {
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-46-		// don't let more than one widget handle mouseStart
dw-free/htdocs/js/jquery/jquery.ui.mouse.js:47:		// TODO: figure out why we have to use originalEvent
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-48-		event.originalEvent = event.originalEvent || {};
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-49-		if (event.originalEvent.mouseHandled) { return; }
dw-free/htdocs/js/jquery/jquery.ui.mouse.js-50-
--
dw-free/htdocs/js/jquery/jquery-1.5.js-1390-			thisCache[ name ] = data;
dw-free/htdocs/js/jquery/jquery-1.5.js-1391-		}
dw-free/htdocs/js/jquery/jquery-1.5.js-1392-
dw-free/htdocs/js/jquery/jquery-1.5.js:1393:		// TODO: This is a hack for 1.5 ONLY. It will be removed in 1.6. Users should
dw-free/htdocs/js/jquery/jquery-1.5.js-1394-		// not attempt to inspect the internal events object using jQuery.data, as this
dw-free/htdocs/js/jquery/jquery-1.5.js-1395-		// internal data object is undocumented and subject to change.
dw-free/htdocs/js/jquery/jquery-1.5.js-1396-		if ( name === "events" && !thisCache[name] ) {
--
dw-free/htdocs/js/jquery/jquery-1.5.js-2395-
dw-free/htdocs/js/jquery/jquery-1.5.js-2396-				// Only trigger if we've ever bound an event for it
dw-free/htdocs/js/jquery/jquery-1.5.js-2397-				if ( jQuery.event.global[ type ] ) {
dw-free/htdocs/js/jquery/jquery-1.5.js:2398:					// XXX This code smells terrible. event.js should not be directly
dw-free/htdocs/js/jquery/jquery-1.5.js-2399-					// inspecting the data cache
dw-free/htdocs/js/jquery/jquery-1.5.js-2400-					jQuery.each( jQuery.cache, function() {
dw-free/htdocs/js/jquery/jquery-1.5.js-2401-						// internalKey variable is just used to make it easier to find
--
dw-free/htdocs/js/jquery/jquery-1.5.js-3783-				Sizzle.error( match[0] );
dw-free/htdocs/js/jquery/jquery-1.5.js-3784-			}
dw-free/htdocs/js/jquery/jquery-1.5.js-3785-
dw-free/htdocs/js/jquery/jquery-1.5.js:3786:			// TODO: Move to normal caching system
dw-free/htdocs/js/jquery/jquery-1.5.js-3787-			match[0] = done++;
dw-free/htdocs/js/jquery/jquery-1.5.js-3788-
dw-free/htdocs/js/jquery/jquery-1.5.js-3789-			return match;
--
dw-free/htdocs/js/jquery/jquery-1.5.js-6745-});
dw-free/htdocs/js/jquery/jquery-1.5.js-6746-
dw-free/htdocs/js/jquery/jquery-1.5.js-6747-/* Handles responses to an ajax request:
dw-free/htdocs/js/jquery/jquery-1.5.js:6748: * - sets all responseXXX fields accordingly
dw-free/htdocs/js/jquery/jquery-1.5.js-6749- * - finds the right dataType (mediates between content-type and expected dataType)
dw-free/htdocs/js/jquery/jquery-1.5.js-6750- * - returns the corresponding response
dw-free/htdocs/js/jquery/jquery-1.5.js-6751- */
--
dw-free/htdocs/js/jquery/jquery-1.5.js-6759-		finalDataType,
dw-free/htdocs/js/jquery/jquery-1.5.js-6760-		firstDataType;
dw-free/htdocs/js/jquery/jquery-1.5.js-6761-
dw-free/htdocs/js/jquery/jquery-1.5.js:6762:	// Fill responseXXX fields
dw-free/htdocs/js/jquery/jquery-1.5.js-6763-	for( type in responseFields ) {
dw-free/htdocs/js/jquery/jquery-1.5.js-6764-		if ( type in responses ) {
dw-free/htdocs/js/jquery/jquery-1.5.js-6765-			jXHR[ responseFields[type] ] = responses[ type ];
--
dw-free/htdocs/js/jquery/jquery-1.5.js-7391-		}
dw-free/htdocs/js/jquery/jquery-1.5.js-7392-
dw-free/htdocs/js/jquery/jquery-1.5.js-7393-		return this[ optall.queue === false ? "each" : "queue" ](function() {
dw-free/htdocs/js/jquery/jquery-1.5.js:7394:			// XXX 'this' does not always have a nodeName when running the
dw-free/htdocs/js/jquery/jquery-1.5.js-7395-			// test suite
dw-free/htdocs/js/jquery/jquery-1.5.js-7396-
dw-free/htdocs/js/jquery/jquery-1.5.js-7397-			var opt = jQuery.extend({}, optall), p,
--
dw-free/htdocs/js/jquery/jquery.ui.widget.js-100-					methodValue = instance && $.isFunction( instance[options] ) ?
dw-free/htdocs/js/jquery/jquery.ui.widget.js-101-						instance[ options ].apply( instance, args ) :
dw-free/htdocs/js/jquery/jquery.ui.widget.js-102-						instance;
dw-free/htdocs/js/jquery/jquery.ui.widget.js:103:				// TODO: add this back in 1.9 and use $.error() (see #5972)
dw-free/htdocs/js/jquery/jquery.ui.widget.js-104-//				if ( !instance ) {
dw-free/htdocs/js/jquery/jquery.ui.widget.js-105-//					throw "cannot call methods on " + name + " prior to initialization; " +
dw-free/htdocs/js/jquery/jquery.ui.widget.js-106-//						"attempted to call method '" + options + "'";
--
dw-free/htdocs/js/jquery/jquery.ui.core.js-285-			return true;
dw-free/htdocs/js/jquery/jquery.ui.core.js-286-		}
dw-free/htdocs/js/jquery/jquery.ui.core.js-287-	
dw-free/htdocs/js/jquery/jquery.ui.core.js:288:		// TODO: determine which cases actually cause this to happen
dw-free/htdocs/js/jquery/jquery.ui.core.js-289-		// if the element doesn't have the scroll set, see if it's possible to
dw-free/htdocs/js/jquery/jquery.ui.core.js-290-		// set the scroll
dw-free/htdocs/js/jquery/jquery.ui.core.js-291-		el[ scroll ] = 1;
--
dw-free/htdocs/js/thread_expander.js-105-
dw-free/htdocs/js/thread_expander.js-106-Expander.prototype.getS1width = function(canvas){
dw-free/htdocs/js/thread_expander.js-107-  var w;
dw-free/htdocs/js/thread_expander.js:108:  //TODO:  may be we should should add somie ID to the spacer img instead of searching it
dw-free/htdocs/js/thread_expander.js-109-  //yet, this works until we have not changed the spacers url = 'dot.gif');
dw-free/htdocs/js/thread_expander.js-110-  var img, imgs, found;
dw-free/htdocs/js/thread_expander.js-111-  imgs = canvas.getElementsByTagName('img');
--
dw-free/htdocs/js/thread_expander.js-159-                                            if(obj.is_S1 && w!==null){
dw-free/htdocs/js/thread_expander.js-160-                                                    obj.setS1width(comments_page[id].canvas,w);
dw-free/htdocs/js/thread_expander.js-161-                                            }
dw-free/htdocs/js/thread_expander.js:162:                                            //TODO: may be this should be uncommented
dw-free/htdocs/js/thread_expander.js-163-                                            //comments_page[id].canvas.className = new_comment.canvas.className;
dw-free/htdocs/js/thread_expander.js-164-                                            LJ_cmtinfo[id].full=1;
dw-free/htdocs/js/thread_expander.js-165-                                        }
--
dw-free/htdocs/js/jquery.contextualhover.js-261-        $relation.addClass("RelationshipStatus");
dw-free/htdocs/js/jquery.contextualhover.js-262-    }
dw-free/htdocs/js/jquery.contextualhover.js-263-
dw-free/htdocs/js/jquery.contextualhover.js:264:    // FIXME: double-check this when vgifts come out
dw-free/htdocs/js/jquery.contextualhover.js-265-    if ( ( data.is_person || data.is_comm ) && ! data.is_requester && data.can_receive_vgifts ) {
dw-free/htdocs/js/jquery.contextualhover.js-266-        var $sendvgift = $("<a></a>", { href: Site.siteroot + "/shop/vgift?to=" + data.username })
dw-free/htdocs/js/jquery.contextualhover.js-267-            .html("Send a virtual gift");
--
dw-free/htdocs/js/s2edit/xlib.js-88-		range.collapse(true);
dw-free/htdocs/js/s2edit/xlib.js-89-		range.moveEnd('character', pos);
dw-free/htdocs/js/s2edit/xlib.js-90-		range.moveStart('character', pos);
dw-free/htdocs/js/s2edit/xlib.js:91:		range.select();		// TODO: test this
dw-free/htdocs/js/s2edit/xlib.js-92-	} else {
dw-free/htdocs/js/s2edit/xlib.js-93-		obj.selectionStart = obj.selectionEnd = pos;
dw-free/htdocs/js/s2edit/xlib.js-94-		obj.focus();
--
dw-free/htdocs/js/xbStyle.js-444-// elements, left,top are measured from the element's normal inline position.
dw-free/htdocs/js/xbStyle.js-445-// getLeft(), setLeft() operate on this type of coordinate.
dw-free/htdocs/js/xbStyle.js-446-//
dw-free/htdocs/js/xbStyle.js:447:// to allow dynamic positioning the getOffsetXXX and setOffsetXXX methods are
dw-free/htdocs/js/xbStyle.js-448-// defined to return and set the position of either an absolutely or relatively
dw-free/htdocs/js/xbStyle.js-449-// positioned element relative to the containing element.
dw-free/htdocs/js/xbStyle.js-450-//
--
dw-free/htdocs/js/xbStyle.js-546-  var position;
dw-free/htdocs/js/xbStyle.js-547-  
dw-free/htdocs/js/xbStyle.js-548-  //xxxHack: Due to limitations in Gecko's (0.9.6) ability to determine the 
dw-free/htdocs/js/xbStyle.js:549:  // effective position attribute , attempt to use offsetXXX
dw-free/htdocs/js/xbStyle.js-550-
dw-free/htdocs/js/xbStyle.js-551-  if (typeof(elm.offsetLeft) == 'number')
dw-free/htdocs/js/xbStyle.js-552-  {
--
dw-free/htdocs/js/xbStyle.js-590-  var position;
dw-free/htdocs/js/xbStyle.js-591-  
dw-free/htdocs/js/xbStyle.js-592-  //xxxHack: Due to limitations in Gecko's (0.9.6) ability to determine the 
dw-free/htdocs/js/xbStyle.js:593:  // effective position attribute , attempt to use offsetXXX
dw-free/htdocs/js/xbStyle.js-594-
dw-free/htdocs/js/xbStyle.js-595-  if (elm && typeof(elm.offsetLeft) == 'number')
dw-free/htdocs/js/xbStyle.js-596-  {
--
dw-free/htdocs/js/xbStyle.js-636-  var position;
dw-free/htdocs/js/xbStyle.js-637-  
dw-free/htdocs/js/xbStyle.js-638-  //xxxHack: Due to limitations in Gecko's (0.9.6) ability to determine the 
dw-free/htdocs/js/xbStyle.js:639:  // effective position attribute , attempt to use offsetXXX
dw-free/htdocs/js/xbStyle.js-640-
dw-free/htdocs/js/xbStyle.js-641-  if (typeof(elm.offsetTop) == 'number')
dw-free/htdocs/js/xbStyle.js-642-  {
--
dw-free/htdocs/js/xbStyle.js-680-  var position;
dw-free/htdocs/js/xbStyle.js-681-  
dw-free/htdocs/js/xbStyle.js-682-  //xxxHack: Due to limitations in Gecko's (0.9.6) ability to determine the 
dw-free/htdocs/js/xbStyle.js:683:  // effective position attribute , attempt to use offsetXXX
dw-free/htdocs/js/xbStyle.js-684-
dw-free/htdocs/js/xbStyle.js-685-  if (elm && typeof(elm.offsetTop) == 'number')
dw-free/htdocs/js/xbStyle.js-686-  {
--
dw-free/htdocs/js/tests/qunit.js-75-		} );
dw-free/htdocs/js/tests/qunit.js-76-
dw-free/htdocs/js/tests/qunit.js-77-		// allow utility functions to access the current test environment
dw-free/htdocs/js/tests/qunit.js:78:		// TODO why??
dw-free/htdocs/js/tests/qunit.js-79-		QUnit.current_testEnvironment = this.testEnvironment;
dw-free/htdocs/js/tests/qunit.js-80-		
dw-free/htdocs/js/tests/qunit.js-81-		try {
--
dw-free/htdocs/update.bml-607-            $pageload
dw-free/htdocs/update.bml-608-        }
dw-free/htdocs/update.bml-609-
dw-free/htdocs/update.bml:610:        // TODO: make these function calls
dw-free/htdocs/update.bml-611-        LJDraft.autoSaveInterval = $LJ::AUTOSAVE_DRAFT_INTERVAL;
dw-free/htdocs/update.bml-612-        LJDraft.savedMsg = '$eMLautosave';
dw-free/htdocs/update.bml-613-
--
dw-free/htdocs/doc/server/style.css-50-  border-top-width: 1px;
dw-free/htdocs/doc/server/style.css-51-}
dw-free/htdocs/doc/server/style.css-52-
dw-free/htdocs/doc/server/style.css:53:/* FIXME: make bottom bar prettier */
dw-free/htdocs/doc/server/style.css-54-div.navfooter
dw-free/htdocs/doc/server/style.css-55-{
dw-free/htdocs/doc/server/style.css-56-  border-top: 1px solid #c1272c; 
--
dw-free/htdocs/misc/vcard.bml-8-    # Return a vCard for a user.
dw-free/htdocs/misc/vcard.bml-9-    # If mode=jabber, Return a Jabber vCard as per JEP-0054
dw-free/htdocs/misc/vcard.bml-10-    # For invalid users, just returns nothing.
dw-free/htdocs/misc/vcard.bml:11:    # FIXME: Should probably return 404 Not Found or something
dw-free/htdocs/misc/vcard.bml-12-
dw-free/htdocs/misc/vcard.bml-13-    if ($GET{'user'}) {
dw-free/htdocs/misc/vcard.bml-14-        my $user = LJ::canonical_username($GET{'user'});
--
dw-free/htdocs/misc/vcard.bml-46-
dw-free/htdocs/misc/vcard.bml-47-                    my $imagedata = $pic->imagedata;
dw-free/htdocs/misc/vcard.bml-48-
dw-free/htdocs/misc/vcard.bml:49:                    # TODO: If mode=jabber, scale the userpic to 96x96px.
dw-free/htdocs/misc/vcard.bml-50-
dw-free/htdocs/misc/vcard.bml-51-                    $ret .= "<PHOTO>";
dw-free/htdocs/misc/vcard.bml-52-                    $ret .= "<TYPE>".LJ::exml($type)."</TYPE>";
Binary file dw-free/htdocs/img/customize/previews/fluidmeasure/forestgreen.png matches
Binary file dw-free/htdocs/img/customize/previews/funkycircles/earthygreen.png matches
Binary file dw-free/htdocs/img/customize/previews/funkycircles/darkpurple.png matches
Binary file dw-free/htdocs/img/customize/previews/colorside/bedrock.png matches
Binary file dw-free/htdocs/img/customize/previews/colorside/lightondark.png matches
Binary file dw-free/htdocs/img/customize/previews/compartmentalize/morningdew.png matches
Binary file dw-free/htdocs/img/customize/previews/refriedtablet/autumnnight.png matches
Binary file dw-free/htdocs/img/customize/previews/refriedtablet/paisaje.png matches
Binary file dw-free/htdocs/img/customize/previews/brittle/nnwm2009.png matches
Binary file dw-free/htdocs/img/customize/previews/modular/mediterraneanpeach.png matches
Binary file dw-free/htdocs/img/customize/previews/nouveauoleanders/vintagechristmas.png matches
Binary file dw-free/htdocs/img/customize/previews/modish/greyscale.png matches
Binary file dw-free/htdocs/img/customize/previews/boxesandborders/gray.png matches
Binary file dw-free/htdocs/img/customize/previews/blanket/peach.png matches
Binary file dw-free/htdocs/img/customize/previews/skittlishdreams/orange.png matches
Binary file dw-free/htdocs/img/customize/previews/steppingstones/purple.png matches
Binary file dw-free/htdocs/img/customize/layouts/2lnh.png matches
Binary file dw-free/htdocs/img/customize/layouts/3l.png matches
Binary file dw-free/htdocs/img/customize/layouts/2l.png matches
Binary file dw-free/htdocs/img/profile_icons/arrow-down.gif matches
Binary file dw-free/htdocs/img/profile_icons/track.gif matches
Binary file dw-free/htdocs/img/profile_icons/arrow-right.gif matches
Binary file dw-free/htdocs/img/external/dj-community.gif matches
Binary file dw-free/htdocs/img/ins-object.gif matches
--
dw-free/htdocs/editicons.bml-520-            $body .= "<div class='pkg userpic_wrapper'>";
dw-free/htdocs/editicons.bml-521-            $body .= "<span class='EditIconsUserpic'>" .  $pic->imgtag . "</span>\n";
dw-free/htdocs/editicons.bml-522-
dw-free/htdocs/editicons.bml:523:            # FIXME: if no keywords then light grey text and empty out when you click in it
dw-free/htdocs/editicons.bml-524-            my $keywords = $pic->keywords;
dw-free/htdocs/editicons.bml-525-            my $comment = $pic->comment;
dw-free/htdocs/editicons.bml-526-            my $description = $pic->description;
--
dw-free/htdocs/shop/creditcard.bml-47-    return BML::redirect( "$LJ::SITEROOT/shop/receipt?ordernum=" . $cart->ordernum )
dw-free/htdocs/shop/creditcard.bml-48-        unless $cart->state == $DW::Shop::STATE_OPEN;
dw-free/htdocs/shop/creditcard.bml-49-
dw-free/htdocs/shop/creditcard.bml:50:    # FIXME: if they have a $0 cart, we don't support that yet
dw-free/htdocs/shop/creditcard.bml-51-    return $ML{'.error.zerocart'}
dw-free/htdocs/shop/creditcard.bml-52-        if $cart->total_cash == 0.00;
dw-free/htdocs/shop/creditcard.bml-53-
--
dw-free/htdocs/shop/entercc.bml-57-    return BML::redirect( "$LJ::SITEROOT/shop/creditcard_wait?ordernum=" . $cart->ordernum . "&cctransid=" & $cart->{cctransid} )
dw-free/htdocs/shop/entercc.bml-58-        unless $cart->state == $DW::Shop::STATE_OPEN;
dw-free/htdocs/shop/entercc.bml-59-
dw-free/htdocs/shop/entercc.bml:60:    # FIXME: if they have a $0 cart, we don't support that yet
dw-free/htdocs/shop/entercc.bml-61-    return $ML{'.error.zerocart'}
dw-free/htdocs/shop/entercc.bml-62-        if $cart->total_cash == 0.00;
dw-free/htdocs/shop/entercc.bml-63-
--
dw-free/htdocs/shop/entercc.bml-205-    return $ML{'.error.megafail'}
dw-free/htdocs/shop/entercc.bml-206-        unless $cctransid && $cctransid > 0;
dw-free/htdocs/shop/entercc.bml-207-
dw-free/htdocs/shop/entercc.bml:208:    # FIXME: mega hack, we're depending on the storable state of the cart here
dw-free/htdocs/shop/entercc.bml-209-    # and this should really be in a db row somewhere so we can reverse it
dw-free/htdocs/shop/entercc.bml-210-    $cart->{cctransid} = $cctransid;
dw-free/htdocs/shop/entercc.bml-211-    $cart->save;
--
dw-free/htdocs/shop/checkout.bml-40-    return $ML{'.error.emptycart'}
dw-free/htdocs/shop/checkout.bml-41-        unless $cart->has_items;
dw-free/htdocs/shop/checkout.bml-42-
dw-free/htdocs/shop/checkout.bml:43:    # FIXME: if they have a $0 cart, we don't support that yet
dw-free/htdocs/shop/checkout.bml-44-    return $ML{'.error.zerocart'}
dw-free/htdocs/shop/checkout.bml-45-        if $cart->total_cash == 0.00 && $cart->total_points == 0;
dw-free/htdocs/shop/checkout.bml-46-
--
dw-free/htdocs/talkmulti.bml-92-        # first, unscreen everything for replycount and hasscreened to adjust
dw-free/htdocs/talkmulti.bml-93-        my @unscreen = grep { $talkinfo{$_}->[0] eq "S" } @talkids;
dw-free/htdocs/talkmulti.bml-94-        LJ::Talk::unscreen_comment($u, $itemid, @unscreen);
dw-free/htdocs/talkmulti.bml:95:        # FIXME: race condition here... somebody could get lucky and view items while unscreened.
dw-free/htdocs/talkmulti.bml-96-        # then delete, updating the log2 replycount as necessary
dw-free/htdocs/talkmulti.bml-97-
dw-free/htdocs/talkmulti.bml-98-        # Mark as spam
--
dw-free/htdocs/go.bml-26-     my $vhost;
dw-free/htdocs/go.bml-27-     $vhost = $POST{'redir_vhost'} if $POST{'redir_vhost'}=~/users|tilde|community|front|other/;
dw-free/htdocs/go.bml-28-     if ($vhost eq "other") {
dw-free/htdocs/go.bml:29:         # FIXME: lookup their domain alias, and make vhost be "other:domain.com";
dw-free/htdocs/go.bml-30-     }
dw-free/htdocs/go.bml-31-     my $base = LJ::journal_base($user, $vhost);
dw-free/htdocs/go.bml-32-     return $ML{'.error.redirkey'} unless $POST{'redir_key'} =~/^(\d\d\d\d)(\d\d)$/;
--
dw-free/htdocs/feeds/index.bml-109-                    my ($type, $val) = ($1, $2);
dw-free/htdocs/feeds/index.bml-110-                    # RSS/Atom
dw-free/htdocs/feeds/index.bml-111-                    # <link rel="alternate" type="application/(?:rss|atom)+xml" title="RSS" href="http://...." />
dw-free/htdocs/feeds/index.bml:112:                    # FIXME: deal with relative paths (eg, href="blah.rss") ... right now we need the full URI
dw-free/htdocs/feeds/index.bml-113-                    if ($type eq "link" &&
dw-free/htdocs/feeds/index.bml-114-                        $val =~ m!rel=.alternate.!i &&
dw-free/htdocs/feeds/index.bml-115-                        $val =~ m!type=.application/(?:rss|atom)\+xml.!i &&
--
dw-free/htdocs/manage/externalaccount.bml-276-    return "" unless $errs;
dw-free/htdocs/manage/externalaccount.bml-277-
dw-free/htdocs/manage/externalaccount.bml-278-    my $err = $errs->{$key}   or return "";
dw-free/htdocs/manage/externalaccount.bml:279:    # FIXME: red is temporary.  move to css.
dw-free/htdocs/manage/externalaccount.bml-280-    return "<div style='color: red' class='ljinlinesettingerror'>$err</div>";
dw-free/htdocs/manage/externalaccount.bml-281-}
dw-free/htdocs/manage/externalaccount.bml-282-
--
dw-free/htdocs/manage/externalaccount.bml-382-        $opts{password} = "" unless $opts{savepassword};
dw-free/htdocs/manage/externalaccount.bml-383-
dw-free/htdocs/manage/externalaccount.bml-384-        my $new_acct = DW::External::Account->create($u, \%opts);
dw-free/htdocs/manage/externalaccount.bml:385:        # FIXME add error if create fails.
dw-free/htdocs/manage/externalaccount.bml-386-        if ($new_acct) {
dw-free/htdocs/manage/externalaccount.bml-387-            return "&create=". $new_acct->acctid;
dw-free/htdocs/manage/externalaccount.bml-388-        } else {
--
dw-free/htdocs/manage/emailpost.bml-355-        $ret .= "<?p $ML{'.success.helpmessage'} p?>" if @send_helpmessage;
dw-free/htdocs/manage/emailpost.bml-356-        if ($LJ::HELPURL{emailpost}) {
dw-free/htdocs/manage/emailpost.bml-357-            $ret .= "<?h1 $ML{'.instructions.header'} h1?>";
dw-free/htdocs/manage/emailpost.bml:358:            $ret .= "<?p FIXME: link to helpurl p?>";
dw-free/htdocs/manage/emailpost.bml-359-        }
dw-free/htdocs/manage/emailpost.bml-360-        return $ret;
dw-free/htdocs/manage/emailpost.bml-361-    }
--
dw-free/htdocs/manage/profile/index.bml-606-            push @errors, $ML{'.error.bio.toolong'};
dw-free/htdocs/manage/profile/index.bml-607-        }
dw-free/htdocs/manage/profile/index.bml-608-
dw-free/htdocs/manage/profile/index.bml:609:        # FIXME: validation AND POSTING are handled by widgets' handle_post() methods
dw-free/htdocs/manage/profile/index.bml-610-        # (introduce validate_post() ?)
dw-free/htdocs/manage/profile/index.bml-611-        my $save_search_index = $POST{'opt_showlocation'} =~ /^[YR]$/;
dw-free/htdocs/manage/profile/index.bml-612-        LJ::Widget->handle_post(\%POST, 'Location' => {save_search_index => $save_search_index});
--
dw-free/htdocs/manage/banusers.bml-78-            $submit_msg = "<?warningbar $ML{'.editmsg'} warningbar?>";
dw-free/htdocs/manage/banusers.bml-79-        } elsif ( $POST{ban_list} ) {
dw-free/htdocs/manage/banusers.bml-80-            # first remove any users from the list that are not valid users
dw-free/htdocs/manage/banusers.bml:81:            # FIXME: we need load_user_multiple
dw-free/htdocs/manage/banusers.bml-82-            my @banlist_orig = split(/,/, $POST{ban_list});
dw-free/htdocs/manage/banusers.bml-83-            my @banlist;
dw-free/htdocs/manage/banusers.bml-84-            foreach my $banusername (@banlist_orig) {
--
dw-free/htdocs/manage/subscriptions/filters.bml-30-    return "<?needlogin?>" unless $remote;
dw-free/htdocs/manage/subscriptions/filters.bml-31-
dw-free/htdocs/manage/subscriptions/filters.bml-32-    # stick in some JS to set the current user
dw-free/htdocs/manage/subscriptions/filters.bml:33:    # FIXME: this should be done automatically as part of the templates!
dw-free/htdocs/manage/subscriptions/filters.bml-34-    my $ret = "<script type='text/javascript'>\n" .
dw-free/htdocs/manage/subscriptions/filters.bml-35-              "DW.currentUser = '" . $remote->user . "';\n" .
dw-free/htdocs/manage/subscriptions/filters.bml-36-              "DW.userIsPaid = " . ( $remote->is_paid ? 'true' : 'false' ) . ";\n" .
--
dw-free/htdocs/latest.bml-31-    $feed = '' unless $feed && exists $LJ::LATEST_TAG_FEEDS{group_names}->{$feed};
dw-free/htdocs/latest.bml-32-    $tag = '' unless $tag = LJ::get_sitekeyword_id( $tag, 0 );
dw-free/htdocs/latest.bml-33-
dw-free/htdocs/latest.bml:34:    # if they want a format we don't support ... FIXME: implement all formats
dw-free/htdocs/latest.bml-35-    return "Sorry, that format is not supported yet."
dw-free/htdocs/latest.bml-36-        if $fmt ne 'html';
dw-free/htdocs/latest.bml-37-
--
dw-free/htdocs/latest.bml-132-    # put filtering options in a standout box
dw-free/htdocs/latest.bml-133-    $tagfeeds = "<div class='highlight-box' id='tagfeeds'>$tagfeeds</div>" if $tagfeeds;
dw-free/htdocs/latest.bml-134-
dw-free/htdocs/latest.bml:135:    # FIXME: don't english-strip this just yet. Needs some extra work
dw-free/htdocs/latest.bml-136-    # The entire page is cached for efficiency, so if anyone does ?uselang=x
dw-free/htdocs/latest.bml-137-    # /latest will show as that language to all users until cache expires
dw-free/htdocs/latest.bml-138-    my $ret = <<EOC;
--
dw-free/htdocs/tools/recent_comments.bml-217-                 }
dw-free/htdocs/tools/recent_comments.bml-218-            }
dw-free/htdocs/tools/recent_comments.bml-219-
dw-free/htdocs/tools/recent_comments.bml:220:            # FIXME: (David?) We'll have to make talk_multi.bml understand jtalkids in multiple posts
dw-free/htdocs/tools/recent_comments.bml-221-            #$ret .= " <nobr><input type='checkbox' name='selected_$r->{jtalkid}' id='s$r->{jtalkid}' />";
dw-free/htdocs/tools/recent_comments.bml-222-            #$ret .= " <label for='s$r->{jtalkid}'>$ML{'/talkread.bml.select'}</label></nobr>";
dw-free/htdocs/tools/recent_comments.bml-223-
--
dw-free/htdocs/tools/recent_email.bml-52-                unless $u;
dw-free/htdocs/tools/recent_email.bml-53-        }
dw-free/htdocs/tools/recent_email.bml-54-    } else {
dw-free/htdocs/tools/recent_email.bml:55:        # TODO: add a link to upgrading your account if you don't have the cap
dw-free/htdocs/tools/recent_email.bml-56-        return "Sorry, you are not able to view outgoing email."
dw-free/htdocs/tools/recent_email.bml-57-            unless $u->can_view_mailqueue;
dw-free/htdocs/tools/recent_email.bml-58-
--
dw-free/htdocs/tools/recent_email.bml-85-            $body .= "Errors:";
dw-free/htdocs/tools/recent_email.bml-86-            $body .= '<ul>';
dw-free/htdocs/tools/recent_email.bml-87-            foreach my $failure ($job->handle->failure_log) {
dw-free/htdocs/tools/recent_email.bml:88:                # TODO: we should get the error_time here and show it, but it isn't available currently :(
dw-free/htdocs/tools/recent_email.bml-89-                $body .= "<li>$failure</li>";
dw-free/htdocs/tools/recent_email.bml-90-            }
dw-free/htdocs/tools/recent_email.bml-91-            $body .= '</ul>';
--
dw-free/htdocs/tools/endpoints/contentfilters.bml-64-        foreach my $uid ( keys %$data ) {
dw-free/htdocs/tools/endpoints/contentfilters.bml-65-            my $member = $data->{$uid};
dw-free/htdocs/tools/endpoints/contentfilters.bml-66-
dw-free/htdocs/tools/endpoints/contentfilters.bml:67:            # FIXME: use load_userids_multiple to get the user objects...
dw-free/htdocs/tools/endpoints/contentfilters.bml-68-            $ret{members}->{$uid} = {
dw-free/htdocs/tools/endpoints/contentfilters.bml-69-                user => LJ::load_userid( $uid )->user,
dw-free/htdocs/tools/endpoints/contentfilters.bml-70-                adultcontent => $member->{adultcontent} || 'any',
--
dw-free/htdocs/talkread.bml-84-    my $ditemid = $init->{'ditemid'}+0;
dw-free/htdocs/talkread.bml-85-
dw-free/htdocs/talkread.bml-86-    if ($old_url && $GET{'journal'}) {
dw-free/htdocs/talkread.bml:87:        # FIXME: add args
dw-free/htdocs/talkread.bml-88-        my %args = %GET;
dw-free/htdocs/talkread.bml-89-        delete $args{'journal'};
dw-free/htdocs/talkread.bml-90-        delete $args{'itemid'};
--
dw-free/htdocs/talkread.bml-104-    # now check for init->error, since we know the account wasn't renamed
dw-free/htdocs/talkread.bml-105-    return "<?h1 $ML{'Error'} h1?><?p $init->{'error'} p?>" if $init->{'error'};
dw-free/htdocs/talkread.bml-106-
dw-free/htdocs/talkread.bml:107:    # FIXME: Only gets past here if handle_with_bml has been set
dw-free/htdocs/talkread.bml-108-    # to 1. (eg. format=light, lynx site scheme)
dw-free/htdocs/talkread.bml-109-
dw-free/htdocs/talkread.bml-110-    $r->notes->{journalid} = $u->{userid};
--
dw-free/htdocs/stc/fck/editor/fckdialog.html-180-	 * Safari seems to have a bug with the time when RefreshSize() is executed - it
dw-free/htdocs/stc/fck/editor/fckdialog.html-181-	 * thinks frmMain's innerHeight is 0 if we query the value too soon after the
dw-free/htdocs/stc/fck/editor/fckdialog.html-182-	 * page is loaded in some circumstances. (#1316)
dw-free/htdocs/stc/fck/editor/fckdialog.html:183:	 * TODO : Maybe this is not needed anymore after #35.
dw-free/htdocs/stc/fck/editor/fckdialog.html-184-	 */
dw-free/htdocs/stc/fck/editor/fckdialog.html-185-	if ( FCKBrowserInfo.IsSafari )
dw-free/htdocs/stc/fck/editor/fckdialog.html-186-	{
Binary file dw-free/htdocs/stc/fck/editor/skins/silver/toolbar/imagebutton.gif matches
--
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-137-	}
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-138-	else if ( bExists && eCaption )
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-139-	{
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html:140:		// TODO: It causes an IE internal error if using removeChild or
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-141-		// table.deleteCaption() (see #505).
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-142-		if ( oEditor.FCKBrowserInfo.IsIE )
dw-free/htdocs/stc/fck/editor/dialog/fck_table.html-143-			eCaption.innerHTML = '' ;
Binary file dw-free/htdocs/stc/nouveauoleanders/journalheader_background.png matches
--
dw-free/htdocs/editprivacy.bml-226-        }
dw-free/htdocs/editprivacy.bml-227-
dw-free/htdocs/editprivacy.bml-228-        $body .= "<p>$ML{'.notified'}</p>";
dw-free/htdocs/editprivacy.bml:229:        # TODO: Let the user know when the job is complete
dw-free/htdocs/editprivacy.bml-230-
dw-free/htdocs/editprivacy.bml-231-        return $body;
dw-free/htdocs/editprivacy.bml-232-    }
--
dw-free/htdocs/openid/approve.bml-41-    $site =~ s/\?.*//;
dw-free/htdocs/openid/approve.bml-42-    return $err->($ML{'.error.invalid_site_address'}) unless $site =~ m!^https?://!;
dw-free/htdocs/openid/approve.bml-43-
dw-free/htdocs/openid/approve.bml:44:    # TODO: check URL and see if it contains images or external scripts/css/images, where
dw-free/htdocs/openid/approve.bml-45-    # an attacker could sniff the validation tokens in the Referer header?
dw-free/htdocs/openid/approve.bml-46-    
dw-free/htdocs/openid/approve.bml-47-    my $nos = LJ::OpenID::server();
--
dw-free/htdocs/talkscreen.bml-30-    my $error = sub {
dw-free/htdocs/talkscreen.bml-31-        if ($jsmode) {
dw-free/htdocs/talkscreen.bml-32-            BML::finish();
dw-free/htdocs/talkscreen.bml:33:            # FIXME: remove once we've switched over completely to jquery
dw-free/htdocs/talkscreen.bml-34-            if ( !!$GET{json} ) {
dw-free/htdocs/talkscreen.bml-35-                return JSON::objToJson( { error => $_[0] } );
dw-free/htdocs/talkscreen.bml-36-            } else {
--
dw-free/htdocs/talkscreen.bml-160-        if ($state ne 'S') {
dw-free/htdocs/talkscreen.bml-161-            LJ::Talk::screen_comment($u, $qitemid, $qtalkid);
dw-free/htdocs/talkscreen.bml-162-        }
dw-free/htdocs/talkscreen.bml:163:        # FIXME: no error checking?
dw-free/htdocs/talkscreen.bml-164-        return $jsres->($mode, $ML{'.screened.body'}) if $jsmode;
dw-free/htdocs/talkscreen.bml-165-        $body = "<?h1 $ML{'.screened.title'} h1?><?p $ML{'.screened.body'} $linktext p?>";
dw-free/htdocs/talkscreen.bml-166-        return;
--
dw-free/htdocs/talkscreen.bml-185-        if ($state ne 'A') {
dw-free/htdocs/talkscreen.bml-186-            LJ::Talk::unscreen_comment($u, $qitemid, $qtalkid);
dw-free/htdocs/talkscreen.bml-187-        }
dw-free/htdocs/talkscreen.bml:188:        # FIXME: no error checking?
dw-free/htdocs/talkscreen.bml-189-        return $jsres->($mode, $ML{'.unscreened.body'}) if $jsmode;
dw-free/htdocs/talkscreen.bml-190-        $body = "<?h1 $ML{'.unscreened.title'} h1?><?p $ML{'.unscreened.body'} $linktext p?>";
dw-free/htdocs/talkscreen.bml-191-        return;
--
dw-free/htdocs/admin/translate/editpage.bml-320-             if ( $extra_checkboxes ) {
dw-free/htdocs/admin/translate/editpage.bml-321-                 # Not gonna bother to refactor to LJ::Lang as the whole
dw-free/htdocs/admin/translate/editpage.bml-322-                 # translation system will get thrown away and redone later.
dw-free/htdocs/admin/translate/editpage.bml:323:                 # FIXME: make sure my words don't come back to haunt me.
dw-free/htdocs/admin/translate/editpage.bml-324-                 $dbh->do( "UPDATE ml_items SET proofed = ?, updated = ? " .
dw-free/htdocs/admin/translate/editpage.bml-325-                           "WHERE dmid = ? AND itid = ?", undef, $proofed ? 1 : 0,
dw-free/htdocs/admin/translate/editpage.bml-326-                           $updated ? 1 : 0, $dom, $itid );
--
dw-free/htdocs/admin/entryprops.bml-86-            if ( $prop eq "xpost" || $prop eq "xpostdetail" ) {
dw-free/htdocs/admin/entryprops.bml-87-                my %external_accounts_map = map { $_->acctid => $_->servername } DW::External::Account->get_external_accounts( $pu );
dw-free/htdocs/admin/entryprops.bml-88-
dw-free/htdocs/admin/entryprops.bml:89:                # FIXME: temporary; trying to figure out when this is undef
dw-free/htdocs/admin/entryprops.bml-90-                my $xpost_prop = $props{$prop};
dw-free/htdocs/admin/entryprops.bml-91-                my $xpost_hash = DW::External::Account->xpost_string_to_hash( $props{$prop} );
dw-free/htdocs/admin/entryprops.bml-92-                my %xpost_map = %{ $xpost_hash || {} };
--
dw-free/htdocs/admin/entryprops.bml-99-                    $p->{des} .= " (site name => { itemid, url })";
dw-free/htdocs/admin/entryprops.bml-100-                }
dw-free/htdocs/admin/entryprops.bml-101-
dw-free/htdocs/admin/entryprops.bml:102:                # FIXME: temporary
dw-free/htdocs/admin/entryprops.bml-103-                $props{$prop} .= "raw information about $prop - <input type='text' value='$xpost_prop' />" 
dw-free/htdocs/admin/entryprops.bml-104-                    unless $xpost_hash;
dw-free/htdocs/admin/entryprops.bml-105-            } elsif ( $prop eq 'picture_mapid' && $pu->userpic_have_mapid ) {
--
dw-free/htdocs/admin/invites/promo.bml-203-    } elsif ( DW::InviteCodes::Promo->is_promo_code( code => $code ) ) {
dw-free/htdocs/admin/invites/promo.bml-204-        $create_form->( DW::InviteCodes::Promo->load( code => $code ) );
dw-free/htdocs/admin/invites/promo.bml-205-    } else {
dw-free/htdocs/admin/invites/promo.bml:206:        # FIXME: Do not do hash accesses on this.
dw-free/htdocs/admin/invites/promo.bml-207-        my $codes = DW::InviteCodes::Promo->load_bulk( state => $state );
dw-free/htdocs/admin/invites/promo.bml-208-
dw-free/htdocs/admin/invites/promo.bml-209-        $ret .= '<a href="/admin/invites/promo?state=create">' . $ML{'.state.new'} . '</a> | ';
--
dw-free/htdocs/admin/userlog.bml-120-            $action = "Email address changed to: $extra->{new}";
dw-free/htdocs/admin/userlog.bml-121-        } elsif ($row->{action} eq 'mass_privacy_change') {
dw-free/htdocs/admin/userlog.bml-122-            $action = "Entry privacy updated (from $extra->{s_security} to $extra->{e_security})";
dw-free/htdocs/admin/userlog.bml:123:            # TODO: parse out e_unixtime and s_unixtime and display?
dw-free/htdocs/admin/userlog.bml-124-        } elsif ($row->{action} eq 'delete_userpic') {
dw-free/htdocs/admin/userlog.bml-125-            $action = "Deleted userpic #$extra->{picid}";
dw-free/htdocs/admin/userlog.bml-126-        } elsif ( $row->{action} eq 'impersonated' ) {
--
dw-free/htdocs/admin/theschwartz.bml-42-    # by TheScwartz without this manual hackery... also, this requires that we not
dw-free/htdocs/admin/theschwartz.bml-43-    # be using roled TheSchwartz, or multiple (undefined results)
dw-free/htdocs/admin/theschwartz.bml-44-    #
dw-free/htdocs/admin/theschwartz.bml:45:    # FIXME: this can be so much better.
dw-free/htdocs/admin/theschwartz.bml-46-    return "Site configuration is not valid for using this tool."
dw-free/htdocs/admin/theschwartz.bml-47-        if scalar( grep { defined $_->{role} } @LJ::THESCHWARTZ_DBS ) > 0 ||
dw-free/htdocs/admin/theschwartz.bml-48-           scalar( @LJ::THESCHWARTZ_DBS ) > 1;
--
dw-free/htdocs/admin/pay/view.bml-16-    return BML::ml( "admin.noprivserror", { numprivs => $numprivs, needprivs => "<b>" . join(", ", @displayprivs) . "</b>"} )
dw-free/htdocs/admin/pay/view.bml-17-        unless $remote->has_priv( 'payments' );
dw-free/htdocs/admin/pay/view.bml-18-
dw-free/htdocs/admin/pay/view.bml:19:    # FIXME: there should be a better page for this or something
dw-free/htdocs/admin/pay/view.bml-20-    if ( my $acid = $GET{striptimefrom} ) {
dw-free/htdocs/admin/pay/view.bml-21-        if ( LJ::did_post() && LJ::check_form_auth() ) {
dw-free/htdocs/admin/pay/view.bml-22-            my $dbh = LJ::get_db_writer();
--
dw-free/htdocs/admin/faq/faqedit.bml-25-{
dw-free/htdocs/admin/faq/faqedit.bml-26-    use strict;
dw-free/htdocs/admin/faq/faqedit.bml-27-
dw-free/htdocs/admin/faq/faqedit.bml:28:    # FIXME: add crumb
dw-free/htdocs/admin/faq/faqedit.bml-29-    
dw-free/htdocs/admin/faq/faqedit.bml-30-    my $id = $FORM{id} + 0;
dw-free/htdocs/admin/faq/faqedit.bml-31-    my $ret = "";
--
dw-free/htdocs/admin/faq/faqedit.bml-137-                $dbh->do( "DELETE FROM faq WHERE faqid=?", undef, $id );
dw-free/htdocs/admin/faq/faqedit.bml-138-                $ret .= "FAQ item deleted.";
dw-free/htdocs/admin/faq/faqedit.bml-139-
dw-free/htdocs/admin/faq/faqedit.bml:140:                # FIXME: delete translation from ml_* ?
dw-free/htdocs/admin/faq/faqedit.bml-141-            }
dw-free/htdocs/admin/faq/faqedit.bml-142-
dw-free/htdocs/admin/faq/faqedit.bml-143-            return $ret;
dw-free/htdocs/admin/faq/faqedit.bml-144-        }
dw-free/htdocs/admin/faq/faqedit.bml-145-
dw-free/htdocs/admin/faq/faqedit.bml-146-        if ( $POST{'action:preview'} ) { # Preview FAQ
dw-free/htdocs/admin/faq/faqedit.bml:147:            # FIXME: make lastmodtime look more like in LJ::Faq->load
dw-free/htdocs/admin/faq/faqedit.bml-148-            my $fake_faq
dw-free/htdocs/admin/faq/faqedit.bml-149-                = LJ::Faq->new( faqid => $id, question => $question,
dw-free/htdocs/admin/faq/faqedit.bml-150-                                summary => $summary, answer => $answer,
--
dw-free/htdocs/admin/faq/faqedit.bml-177-                                  && LJ::is_enabled( 'faq_summaries' );
dw-free/htdocs/admin/faq/faqedit.bml-178-
dw-free/htdocs/admin/faq/faqedit.bml-179-            # escape question
dw-free/htdocs/admin/faq/faqedit.bml:180:            # FIXME: do we still need to check for \n? Did we ever?
dw-free/htdocs/admin/faq/faqedit.bml-181-            my $q_html
dw-free/htdocs/admin/faq/faqedit.bml-182-                = LJ::html_newlines( LJ::trim( $fake_faq->question_html ) );
dw-free/htdocs/admin/faq/faqedit.bml-183-
--
dw-free/htdocs/admin/faq/faqedit.bml-190-                if $display_answer;
dw-free/htdocs/admin/faq/faqedit.bml-191-
dw-free/htdocs/admin/faq/faqedit.bml-192-            # run hook to transform the text of this FAQ before it's rendered
dw-free/htdocs/admin/faq/faqedit.bml:193:            # FIXME: hook is responsible for clean-up if it changes $display_*
dw-free/htdocs/admin/faq/faqedit.bml-194-            # from false to true. Should that be checked/enforced here instead?
dw-free/htdocs/admin/faq/faqedit.bml:195:            # FIXME: do we even need that hook? It looks like LJ only ever used
dw-free/htdocs/admin/faq/faqedit.bml-196-            # it to add stuff to LJ Talk FAQs, for Gizmo sponsorship.
dw-free/htdocs/admin/faq/faqedit.bml-197-            LJ::Hooks::run_hook( "faq.$id.transform", $remote, answer => \$a_html,
dw-free/htdocs/admin/faq/faqedit.bml-198-                          question => \$q_html, summary => \$s_html,
--
dw-free/htdocs/admin/faq/faqedit.bml-211-
dw-free/htdocs/admin/faq/faqedit.bml-212-            $ret .= "</div>";
dw-free/htdocs/admin/faq/faqedit.bml-213-
dw-free/htdocs/admin/faq/faqedit.bml:214:            # FIXME: lastmodtime and lastmodwho should be vars in .lastupdated
dw-free/htdocs/admin/faq/faqedit.bml-215-            # Also, using the string in htdocs/support/faqbrowse.bml.text for
dw-free/htdocs/admin/faq/faqedit.bml-216-            # now, but this may change (either duplicate it here, or remove it
dw-free/htdocs/admin/faq/faqedit.bml-217-            # altogether, since $remote presumably knows who they are and what
Binary file dw-free/htdocs/palimg/textures/terracotta.png matches
Binary file dw-free/htdocs/palimg/textures/wood.png matches
Binary file dw-free/htdocs/palimg/s1gradient.gif matches
Binary file dw-free/htdocs/palimg/shadow/topleft/tr.gif matches
Binary file dw-free/htdocs/palimg/shadow/bottomright/bl.gif matches
Binary file dw-free/htdocs/palimg/shadow/t.gif matches
Binary file dw-free/htdocs/palimg/shadow/bottomleft/br.gif matches
Binary file dw-free/htdocs/palimg/shadow/topright/tl.gif matches
Binary file dw-free/htdocs/palimg/shadow/b.gif matches
Binary file dw-free/htdocs/palimg/colorpicker/longgrad.gif matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/bubbles.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/explosion.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/letters.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/nature.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/futuristic.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/camouflage.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/clouds.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/nature2.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/bubblewrap.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/ramblings.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/diamonds.png matches
Binary file dw-free/htdocs/palimg/deardiary/titleimages/urban.png matches
Binary file dw-free/htdocs/palimg/deardiary/headinggrad.png matches
--
dw-free/htdocs/talkpost_do.bml-120-    LJ::need_res( LJ::Talk::init_iconbrowser_js() )
dw-free/htdocs/talkpost_do.bml-121-        if $remote && $remote->can_use_userpic_select;
dw-free/htdocs/talkpost_do.bml-122-
dw-free/htdocs/talkpost_do.bml:123:    # FIXME: this isn't entirely correct, if ecphash is present but ignored/incorrect
dw-free/htdocs/talkpost_do.bml-124-    # that fix would need to be done in talklib.pl
dw-free/htdocs/talkpost_do.bml-125-
dw-free/htdocs/talkpost_do.bml-126-    # show this error along with the regenerated comment form down below
--
dw-free/htdocs/talkpost_do.bml-219-    # Allow style=mine, etc for QR redirects
dw-free/htdocs/talkpost_do.bml-220-    my $style_args = LJ::viewing_style_args( %POST );
dw-free/htdocs/talkpost_do.bml-221-
dw-free/htdocs/talkpost_do.bml:222:    # FIXME: potentially can be replaced with some form of additional logic when we have multiple account linkage
dw-free/htdocs/talkpost_do.bml-223-    my $posted = $comment->{state} eq 'A' ? "posted=1" : "";
dw-free/htdocs/talkpost_do.bml-224-
dw-free/htdocs/talkpost_do.bml-225-    my $cthread = $POST{'viewing_thread'} ? "thread=$POST{viewing_thread}" : "view=$dtalkid";
--
dw-free/htdocs/editjournal.bml-205-                $spellcheck_html = "<?inerr $ML{'entryform.spellcheck.noerrors'} inerr?>" unless $spellcheck_html ne "";
dw-free/htdocs/editjournal.bml-206-            }
dw-free/htdocs/editjournal.bml-207-
dw-free/htdocs/editjournal.bml:208:            # TODO: Move this to the protocol?
dw-free/htdocs/editjournal.bml-209-            if ($POST{'action:savemaintainer'} && !$disabled_spamdelete) {
dw-free/htdocs/editjournal.bml-210-                return LJ::bad_input($ML{'error.invalidform'}) unless LJ::check_form_auth();
dw-free/htdocs/editjournal.bml-211-
--
dw-free/htdocs/editjournal.bml-429-            $entry->{prop_last_fm_user} = $u_for_entry->prop('last_fm_user');
dw-free/htdocs/editjournal.bml-430-
dw-free/htdocs/editjournal.bml-431-            # add property for xpost data (this is removed by the getevents protocol)
dw-free/htdocs/editjournal.bml:432:            # FIXME: this should be added by the entry form, but since it doesn't have an
dw-free/htdocs/editjournal.bml-433-            # entry object right now, this is just easier
dw-free/htdocs/editjournal.bml-434-            $entry->{prop_xpost} = $entry_obj->prop( 'xpost' );
dw-free/htdocs/editjournal.bml-435-
--
dw-free/htdocs/support/stock_answers.bml-79-        foreach my $ref (\$subj, \$body) {
dw-free/htdocs/support/stock_answers.bml-80-            $$ref =~ s/^\s+//;
dw-free/htdocs/support/stock_answers.bml-81-            $$ref =~ s/\s+$//;
dw-free/htdocs/support/stock_answers.bml:82:            # FIXME: more stuff to clean it up?
dw-free/htdocs/support/stock_answers.bml-83-        }
dw-free/htdocs/support/stock_answers.bml-84-
dw-free/htdocs/support/stock_answers.bml-85-        return "<?h1 $ML{'.error'} h1?><?p $ML{'.fill.out.all.friends'} p?>"
--
dw-free/htdocs/support/see_request.bml-706-
dw-free/htdocs/support/see_request.bml-707-        my %faqcat;
dw-free/htdocs/support/see_request.bml-708-        my %faqq;
dw-free/htdocs/support/see_request.bml:709:        # FIXME: must refactor that somewhere
dw-free/htdocs/support/see_request.bml-710-        my $deflang = BML::get_language_default();
dw-free/htdocs/support/see_request.bml-711-        my $mll = LJ::Lang::get_lang( $curlang );
dw-free/htdocs/support/see_request.bml-712-        my $mld = LJ::Lang::get_dom( "faq" );
--
dw-free/htdocs/support/faqbrowse.bml-42-
dw-free/htdocs/support/faqbrowse.bml-43-    # get faqid and redirect to faq.bml if none
dw-free/htdocs/support/faqbrowse.bml-44-    my $faqidarg = $GET{'faqid'} + 0;
dw-free/htdocs/support/faqbrowse.bml:45:    # FIXME: disallow both faqid and faqcat (or ignore one)
dw-free/htdocs/support/faqbrowse.bml-46-    my $faqcatarg = $GET{'faqcat'};
dw-free/htdocs/support/faqbrowse.bml-47-    
dw-free/htdocs/support/faqbrowse.bml-48-    unless ($faqidarg || $faqcatarg) {
--
dw-free/htdocs/support/faqbrowse.bml-172-            $question =~ s/(\Q$qterm\E)/$term->($1)/ige;
dw-free/htdocs/support/faqbrowse.bml-173-
dw-free/htdocs/support/faqbrowse.bml-174-            # don't highlight terms in URLs or HTML tags
dw-free/htdocs/support/faqbrowse.bml:175:            # FIXME: if the search term is present in a tag, should still
dw-free/htdocs/support/faqbrowse.bml-176-            # highlight occurences outside tags.
dw-free/htdocs/support/faqbrowse.bml-177-            $summary =~ s!((?:https?://[^>]+)?\Q$qterm\E)!$term->($1)!ige
dw-free/htdocs/support/faqbrowse.bml-178-                unless $summary =~ m!<[^>]*\Q$qterm\E[^>]*>!;
--
dw-free/htdocs/support/faqbrowse.bml-182-        }
dw-free/htdocs/support/faqbrowse.bml-183-
dw-free/htdocs/support/faqbrowse.bml-184-        # run hook to transform the text of this FAQ before it's rendered
dw-free/htdocs/support/faqbrowse.bml:185:        # FIXME: hook is responsible for clean-up if it changes $display_*
dw-free/htdocs/support/faqbrowse.bml-186-        # from false to true. Should that be checked/enforced here instead?
dw-free/htdocs/support/faqbrowse.bml:187:        # FIXME: do we even need that hook? It looks like LJ only ever used
dw-free/htdocs/support/faqbrowse.bml-188-        # it to add stuff to LJ Talk FAQs, for Gizmo sponsorship.
dw-free/htdocs/support/faqbrowse.bml-189-        LJ::Hooks::run_hook( "faq.$faqid.transform", $remote, question => \$question,
dw-free/htdocs/support/faqbrowse.bml-190-                      summary => \$summary, display_summary => \$display_summary,
--
dw-free/htdocs/support/faqbrowse.bml-225-
dw-free/htdocs/support/faqbrowse.bml-226-        my $lastmodwho = LJ::get_username($f->lastmoduserid);
dw-free/htdocs/support/faqbrowse.bml-227-        if ($lastmodwho) {
dw-free/htdocs/support/faqbrowse.bml:228:            # FIXME: lastmodtime and lastmodwho should be vars in .lastupdated
dw-free/htdocs/support/faqbrowse.bml-229-            $$body .= "<p align=\"right\"><b>$ML{'.lastupdated'}</b><br />"
dw-free/htdocs/support/faqbrowse.bml-230-                . $f->lastmodtime . " ($lastmodwho)</p>";
dw-free/htdocs/support/faqbrowse.bml-231-        }
--
dw-free/htdocs/search.bml-22-    use vars qw/ %POST %GET /;
dw-free/htdocs/search.bml-23-    use Storable;
dw-free/htdocs/search.bml-24-
dw-free/htdocs/search.bml:25:    # FIXME: english strip and make the UI a lot better :)
dw-free/htdocs/search.bml-26-
dw-free/htdocs/search.bml-27-    # if no gearman, bail
dw-free/htdocs/search.bml-28-    my $gc = LJ::gearman_client();
--
dw-free/views/dev/tests/quickreply.html-39-            <tr>
dw-free/views/dev/tests/quickreply.html-40-                <td>&nbsp;</td>
dw-free/views/dev/tests/quickreply.html-41-                <td colspan="3" align="left">
dw-free/views/dev/tests/quickreply.html:42:                    <input type="submit" name="submitpost" value="Post Comment" id="submitpost" onclick="/*if (checkLength()) {submitform();}*/"> <!-- TODO: -->
dw-free/views/dev/tests/quickreply.html-43-                    &nbsp;
dw-free/views/dev/tests/quickreply.html:44:                    <input type="submit" name="submitpview" value="Preview" id="submitpview" onclick="/*preview()*/"> <!-- TODO -->
dw-free/views/dev/tests/quickreply.html-45-                    <input type="hidden" name="submitpreview" value="0">
dw-free/views/dev/tests/quickreply.html-46-                    &nbsp;
dw-free/views/dev/tests/quickreply.html:47:                    <input type="submit" name="submitmoreopts" value="More Options..." id="submitmoreopts" onclick="/*if (moreopts()) {submitform();}*/"> <!-- TODO -->
dw-free/views/dev/tests/quickreply.html-48-                    <br><span class="de"><b>Notice!</b> This user has turned on the option that logs your IP address when posting.</span>
dw-free/views/dev/tests/quickreply.html-49-                </td>
dw-free/views/dev/tests/quickreply.html-50-            </tr>
--
dw-free/views/dev/tests/quickreply.js-289-});
dw-free/views/dev/tests/quickreply.js-290-
dw-free/views/dev/tests/quickreply.js-291-test( "submit post", 0, function() {
dw-free/views/dev/tests/quickreply.js:292:    // FIXME: add test
dw-free/views/dev/tests/quickreply.js-293-});
dw-free/views/dev/tests/quickreply.js-294-test( "submit preview", 0, function() {
dw-free/views/dev/tests/quickreply.js:295:    // FIXME: add test
dw-free/views/dev/tests/quickreply.js-296-});
dw-free/views/dev/tests/quickreply.js-297-test( "submit more options", 0, function() {
dw-free/views/dev/tests/quickreply.js:298:    // FIXME: add test
dw-free/views/dev/tests/quickreply.js-299-});
--
dw-free/views/shop/points.tt-26-
dw-free/views/shop/points.tt-27-<p id='points-about'>[% '.about2' | ml %]</p>
dw-free/views/shop/points.tt-28-
dw-free/views/shop/points.tt:29:[%# FIXME: move this to shop.js or something %]
dw-free/views/shop/points.tt-30-<script type='text/javascript'>
dw-free/views/shop/points.tt-31-    jQuery( function($) {
dw-free/views/shop/points.tt-32-        setInterval(
--
dw-free/views/admin/stats.tt-21-
dw-free/views/admin/stats.tt-22-[%#
dw-free/views/admin/stats.tt-23-
dw-free/views/admin/stats.tt:24:FIXME: remove this when you have implemented them all 
dw-free/views/admin/stats.tt-25-
dw-free/views/admin/stats.tt-26-* Number of accounts, total (done)
dw-free/views/admin/stats.tt-27-* Number of accounts active (done)
--
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-91-    my $uids = DW::Pay::get_current_paid_userids( limit => $max_nusers,
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-92-                                                  @$search_arg );
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-93-
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm:94:    # TODO: Allow nonvalidated email addresses? We need to deal with users who
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-95-    # shouldn't be send email for some reason anyway (eg because they opted out
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-96-    # of mass mailings) by putting the notice in their inbox instead (or in
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-97-    # addition) or discarding it altogether, so might as well handle
--
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-129-    return ($max_nusers <= scalar @uids) ? \@uids : _filter_pav( \@uids );
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-130-}
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-131-
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm:132:# TODO: refactor into DW::InviteCodes
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-133-# Search "acctcode" (unclustered) for users with no invite left
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-134-sub _search_noinvleft {
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-135-    my ($uckey, $max_nusers) = @_;
--
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-150-    return $uids;
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-151-}
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-152-
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm:153:# TODO: refactor into DW::InviteCodes
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-154-# Search "acctcode" (unclustered) for users with no invite left, then restrict
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-155-# to those having at least one active or paid invitee
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-156-sub _search_noinvleft_apinvitee {
--
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-195-    my ($in_uids) = @_;
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-196-    my @out_uids;
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-197-
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm:198:    # TODO: make magic number configurable.
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm:199:    # TODO: use splice() # perldoc -f splice
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-200-    for (my $start = 0; $start < @$in_uids; $start += 1000) {
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-201-        my $end = ($start + 999 <= $#$in_uids) ? $start + 999 : $#$in_uids;
dw-nonfree/cgi-bin/DW/BusinessRules/InviteCodes/DWS.pm-202-        my $uhash = LJ::load_userids( @{$in_uids}[$start..$end] );
Binary file dw-nonfree/htdocs/img/mood/dreamy_ds/working.gif matches
Binary file dw-nonfree/htdocs/img/mood/dreamy_ds/blank.gif matches
Binary file dw-nonfree/htdocs/img/mood/dreamy_ds/bored.gif matches
Binary file dw-nonfree/htdocs/img/customize/previews/sundaymorning/greenswirls.png matches
Binary file dw-nonfree/htdocs/img/customize/previews/sundaymorning/purpleswirls.png matches
Binary file dw-nonfree/htdocs/img/customize/previews/sundaymorning/yellowsquiggle.png matches
Binary file dw-nonfree/htdocs/img/customize/previews/colorside/nadeshiko.png matches
Binary file dw-nonfree/htdocs/img/customize/previews/transmogrified/shallowestdepths.png matches
Binary file dw-nonfree/htdocs/img/customize/previews/transmogrified/basic.png matches
Binary file dw-nonfree/htdocs/img/gradation/dw_logo_gradation_beta.png matches
Binary file dw-nonfree/htdocs/img/gradation/dw_logo_gradation.png matches
