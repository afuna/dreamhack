<html><head><title>DW::InviteCodeRequests</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw " type="text/css" href="../blkbluw_.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk " type="text/css" href="../whtpurk_.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng " type="text/css" href="../whtgrng_.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw " type="text/css" href="../grygrnw_.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.13,
  using Pod::Simple::PullParser v3.13,
  under Perl v5.010001 at Tue Oct 25 14:03:59 2011 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#API'>API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24class-%3Enew(_reqid_%3D%3E_%24reqid_)'>$class-&#62;new( reqid =&#62; $reqid )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eby_user(_userid_%3D%3E_%24userid_)'>$class-&#62;by_user( userid =&#62; $userid )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Ecreate(_userid_%3D%3E_%24userid%2C_reason_%3D%3E_%24reason_)'>$class-&#62;create( userid =&#62; $userid, reason =&#62; $reason )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eoutstanding_count(_userid_%3D%3E_%24userid_)'>$class-&#62;outstanding_count( userid =&#62; $userid )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eoutstanding'>$class-&#62;outstanding</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Einvite_sysbanned(_user_%3D%3E_%24u_)'>$class-&#62;invite_sysbanned( user =&#62; $u )</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Eaccept(_%5Bnum_invites_%3D%3E_%24num_invites_%5D_)'>$object-&#62;accept( [num_invites =&#62; $num_invites ] )</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Ereject'>$object-&#62;reject</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Echange_status(_status_%3D%3E_%24status_)'>$object-&#62;change_status( status =&#62; $status )</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Eid'>$object-&#62;id</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Euserid'>$object-&#62;userid</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Estatus'>$object-&#62;status</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Ereason'>$object-&#62;reason</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Etimegenerate'>$object-&#62;timegenerate</a>
    <li class='indexItem indexItem2'><a href='#%24object-%3Etimeprocessed'>$object-&#62;timeprocessed</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#BUGS'>BUGS</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DW::InviteCodeRequests - Invite code request backend for Dreamwidth</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>  use DW::InviteCodeRequests;

  ## aggregate information
  # list all outstanding requests, by all users
  my @all_outstanding = DW::InviteCodeRequests-&#62;outstanding;


  ## per-user information, and request creation
  # list all of the invite code requests a user has made
  my @user_requests = DW::InviteCodeRequests-&#62;by_user( userid =&#62; $userid );

  # find out how many invite code requests a user has outstanding
  my $outstanding_count = DW::InviteCodeRequests-&#62;outstanding_count( userid =&#62; $userid );

  # create a new request for this user if they don&#39;t have outstanding requests
  my $new_request = DW::InviteCodeRequests-&#62;create( userid =&#62; $userid, reason =&#62; $reason )
    if ! $outstanding_count;

  ## request processing
  # load a request object
  my $request = DW::InviteCodeRequests-&#62;new( reqid =&#62; $reqid )
  
  # accept or reject the request
  $request-&#62;accept( num_invites =&#62; $num_invites );
  $request-&#62;reject;
  
  ## request data
  my $id = $request-&#62;id;
  my $userid = $request-&#62;userid; 
  my $status = $request-&#62;status;    # accepted, rejected, outstanding
  my $reason = $request-&#62;reason;
  my $timegenerate = $request-&#62;timegenerate;   # unix timestamp
  my $timeprocessed = $request-&#62;timeprocessed; # unix timestamp</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="API"
>API</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;new(_reqid_=&#62;_$reqid_)"
><code>$class-&#62;new( reqid =&#62; $reqid )</code></a></h2>

<p>Returns object for invite code request, or undef if none exists</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;by_user(_userid_=&#62;_$userid_)"
><code>$class-&#62;by_user( userid =&#62; $userid )</code></a></h2>

<p>Returns an array of all the requests the user has made.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;create(_userid_=&#62;_$userid,_reason_=&#62;_$reason_)"
><code>$class-&#62;create( userid =&#62; $userid, reason =&#62; $reason )</code></a></h2>

<p>Create and return a request for additional invite codes, which will be put into a queue for admin review. Returns undef on failure.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;outstanding_count(_userid_=&#62;_$userid_)"
><code>$class-&#62;outstanding_count( userid =&#62; $userid )</code></a></h2>

<p>Returns how many outstanding invite code requests a user has.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;outstanding"
><code>$class-&#62;outstanding</code></a></h2>

<p>Return a list of all outstanding invite code requests.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;invite_sysbanned(_user_=&#62;_$u_)"
><code>$class-&#62;invite_sysbanned( user =&#62; $u )</code></a></h2>

<p>Return whether this user is sysbanned from the invite codes system. Accepts a user object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;accept(_[num_invites_=&#62;_$num_invites_]_)"
><code>$object-&#62;accept( [num_invites =&#62; $num_invites ] )</code></a></h2>

<p>Accept this request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;reject"
><code>$object-&#62;reject</code></a></h2>

<pre> Reject this request.</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;change_status(_status_=&#62;_$status_)"
><code>$object-&#62;change_status( status =&#62; $status )</code></a></h2>

<p>Internal. Accepts or rejects a request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;id"
><code>$object-&#62;id</code></a></h2>

<p>Returns the id of this object.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;userid"
><code>$object-&#62;userid</code></a></h2>

<p>Returns the userid of the user who made the request.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;status"
><code>$object-&#62;status</code></a></h2>

<p>Returns the status of the request. Values can be one of &#34;accepted&#34;, &#34;rejected&#34;, &#34;outstanding&#34;.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;reason"
><code>$object-&#62;reason</code></a></h2>

<p>Returns the user-provided reason for requesting more invite codes.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;timegenerate"
><code>$object-&#62;timegenerate</code></a></h2>

<p>Returns the time the request was made as a unix timestamp.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$object-&#62;timeprocessed"
><code>$object-&#62;timeprocessed</code></a></h2>

<p>Returns the time the request was accepted or rejected as a unix timestamp.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="BUGS"
>BUGS</a></h1>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<p>Afuna &#60;coder.dw@afunamatata.com&#62; Pau Amma &#60;pauamma@dreamwidth.org&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright (c) 2009 by Dreamwidth Studios, LLC.</p>

<p>This program is free software; you may redistribute it and/or modify it under the same terms as Perl itself. For a copy of the license, please reference &#39;perldoc perlartistic&#39; or &#39;perldoc perlgpl&#39;.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
