<html><head><title>DW::Worker::ContentImporter</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw " type="text/css" href="../../blkbluw_.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk " type="text/css" href="../../whtpurk_.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng " type="text/css" href="../../whtgrng_.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw " type="text/css" href="../../grygrnw_.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.13,
  using Pod::Simple::PullParser v3.13,
  under Perl v5.010001 at Tue Oct 25 14:04:00 2011 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#Saving_API'>Saving API</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24class-%3Emerge_trust(_%24user%2C_%24hashref%2C_%24friends_)'>$class-&#62;merge_trust( $user, $hashref, $friends )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Emerge_watch(_%24user%2C_%24hashref%2C_%24friends_)'>$class-&#62;merge_watch( $user, $hashref, $friends )</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Helper_Functions'>Helper Functions</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eimport_data(_%24userid%2C_%24import_data_id_)'>$class-&#62;import_data( $userid, $import_data_id )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Efail(_%24import_data%2C_%24item%2C_%24job%2C_%22text%22%2C_%5Barguments%2C_...%5D_)'>$class-&#62;fail( $import_data, $item, $job, &#34;text&#34;, [arguments, ...] )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Etemp_fail(_%24job%2C_%22text%22%2C_%5Barguments%2C_...%5D_)'>$class-&#62;temp_fail( $job, &#34;text&#34;, [arguments, ...] )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eok(_%24import_data%2C_%24item%2C_%24job%2C_%24show_)'>$class-&#62;ok( $import_data, $item, $job, $show )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Edecline(_%24job%2C_%25opts_)'>$class-&#62;decline( $job, %opts )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Eenabled(_%24data_)'>$class-&#62;enabled( $data )</a>
    <li class='indexItem indexItem2'><a href='#%24class-%3Estatus(_%24import_data%2C_%24item%2C_%24args_)'>$class-&#62;status( $import_data, $item, $args )</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>DW::Worker::ContentImporter - Generic helper functions for Content Importers</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Saving_API"
>Saving API</a></h1>

<p>All Saving API functions take as the first two options the target user option,
followed by a consistent hashref passed to every function.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;merge_trust(_$user,_$hashref,_$friends_)"
><code>$class-&#62;merge_trust( $user,
$hashref,
$friends )</code></a></h2>

<p>$friends is a reference to an array of hashrefs,
with each hashref with the following format:</p>

<pre>  {
      userid =&#62; ...,        # local userid of the friend
      groupmask =&#62; 1,       # groupmask
  }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;merge_watch(_$user,_$hashref,_$friends_)"
><code>$class-&#62;merge_watch( $user, $hashref, $friends )</code></a></h2>

<p>$friends is a reference to an array of hashrefs, with each hashref with the following format:</p>

<pre>  {
      userid =&#62; ...,        # local userid of the friend
      fgcolor =&#62; &#39;#ff0000&#39;, # foreground color
      bgcolor =&#62; &#39;#00ff00&#39;, # background color
  }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Helper_Functions"
>Helper Functions</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;import_data(_$userid,_$import_data_id_)"
><code>$class-&#62;import_data( $userid, $import_data_id )</code></a></h2>

<p>Returns a hash of the data we&#39;re using as source.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;fail(_$import_data,_$item,_$job,_&#34;text&#34;,_[arguments,_...]_)"
><code>$class-&#62;fail( $import_data, $item, $job, &#34;text&#34;, [arguments, ...] )</code></a></h2>

<p>Permanently fail this import job.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;temp_fail(_$job,_&#34;text&#34;,_[arguments,_...]_)"
><code>$class-&#62;temp_fail( $job, &#34;text&#34;, [arguments, ...] )</code></a></h2>

<p>Temporarily fail this import job, it will get retried if it hasn&#39;t failed too many times.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;ok(_$import_data,_$item,_$job,_$show_)"
><code>$class-&#62;ok( $import_data, $item, $job, $show )</code></a></h2>

<p>Successfully end this import job.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;decline(_$job,_%opts_)"
><code>$class-&#62;decline( $job, %opts )</code></a></h2>

<p>Decline to process the job for now. Will retry again later. (Does not count against the maximum number of retries)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;enabled(_$data_)"
><code>$class-&#62;enabled( $data )</code></a></h2>

<p>Check whether this import source is enabled.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$class-&#62;status(_$import_data,_$item,_$args_)"
><code>$class-&#62;status( $import_data, $item, $args )</code></a></h2>

<p>This creates an LJ::Event::ImportStatus item for the user to look at. Note that $args is a hashref that is passed straight through in the item.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
