<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>Branch Coverage: cgi-bin/ljdb.pl</title>
</head>
<body>
<h1>Branch Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">cgi-bin/ljdb.pl</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">25.8%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>%</th><th colspan="2">coverage</th><th>branch</th></tr>
<tr><td class="h"><a id="L52">52</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $table = delete $args{&#39;table&#39;}</td></tr>
<tr><td class="h"><a id="L53">53</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $idcol = delete $args{&#39;idcol&#39;}</td></tr>
<tr><td class="h"><a id="L54">54</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $timecol = delete $args{&#39;timecol&#39;}</td></tr>
<tr><td class="h"><a id="L55">55</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $starttime = delete $args{&#39;starttime&#39;}</td></tr>
<tr><td class="h"><a id="L56">56</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $endtime = delete $args{&#39;endtime&#39;}</td></tr>
<tr><td class="h"><a id="L58">58</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (ref $roles eq &#39;ARRAY&#39; and @$roles)</td></tr>
<tr><td class="h"><a id="L61">61</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if %args</td></tr>
<tr><td class="h"><a id="L64">64</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $db = LJ::get_dbh(@$roles)</td></tr>
<tr><td class="h"><a id="L69">69</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $db-&gt;err</td></tr>
<tr><td class="h"><a id="L70">70</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $db_max_id &lt; $db_min_id</td></tr>
<tr><td class="h"><a id="L87">87</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ct &gt; 100</td></tr>
<tr><td class="h"><a id="L97">97</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $db-&gt;err</td></tr>
<tr><td class="h"><a id="L103">103</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($curr_time == $want_time or $curr_time == $last_time)</td></tr>
<tr><td class="h"><a id="L108">108</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($max_id == $db_max_id and $curr_time &lt;= $want_time) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($min_id == $db_min_id and $curr_time &gt;= $want_time) { }</td></tr>
<tr><td class="h"><a id="L122">122</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($curr_time &lt; $want_time)</td></tr>
<tr><td class="h"><a id="L128">128</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($curr_time &gt; $want_time)</td></tr>
<tr><td class="h"><a id="L144">144</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $dbh = dbh_by_role(&#39;master&#39;)</td></tr>
<tr><td class="h"><a id="L148">148</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $fdsn</td></tr>
<tr><td class="h"><a id="L156">156</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $dbh = dbh_by_role(&#39;master&#39;)</td></tr>
<tr><td class="h"><a id="L160">160</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $fdsn</td></tr>
<tr><td class="h"><a id="L167">167</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $dbh = dbh_by_role(&#39;master&#39;)</td></tr>
<tr><td class="h"><a id="L172">172</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($cid)</td></tr>
<tr><td class="h"><a id="L173">173</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $active_ab = $LJ::CLUSTER_PAIR_ACTIVE{$cid}</td></tr>
<tr><td class="h"><a id="L175">175</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $active_ab =~ /^[ab]$/</td></tr>
<tr><td class="h"><a id="L180">180</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $active_ab eq $is_a_or_b</td></tr>
<tr><td class="h"><a id="L184">184</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $fdsn</td></tr>
<tr><td class="h"><a id="L185">185</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $fdsn =~ /\bhost=([\w\.\-]+)/</td></tr>
<tr><td class="h"><a id="L188">188</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless eval &#39;use IO::Socket::INET; 1;&#39;</td></tr>
<tr><td class="h"><a id="L189">189</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $sock = &#39;IO::Socket::INET&#39;-&gt;new(&#39;PeerAddr&#39;, &quot;${host}:7602&quot;)</td></tr>
<tr><td class="h"><a id="L198">198</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless my $dbh = dbh_by_role(&#39;master&#39;)</td></tr>
<tr><td class="h"><a id="L202">202</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $role and $role =~ /^cluster(\d+)([ab])$/</td></tr>
<tr><td class="h"><a id="L217">217</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ref $callback eq &#39;CODE&#39;</td></tr>
<tr><td class="h"><a id="L233">233</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $cond</td></tr>
<tr><td class="h"><a id="L253">253</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">ref $_[0] eq &#39;HASH&#39; ? :</td></tr>
<tr><td class="h"><a id="L255">255</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless (exists $$opts{&#39;max_repl_lag&#39;})</td></tr>
<tr><td class="h"><a id="L257">257</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($_[0] =~ /slave$/)</td></tr>
<tr><td class="h"><a id="L262">262</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($DEBUG{&#39;get_dbh&#39;} and $_[0] ne &#39;logs&#39;)</td></tr>
<tr><td class="h"><a id="L266">266</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $i &gt; 3</td></tr>
<tr><td class="h"><a id="L282">282</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $DISABLE_MASTER and $role eq &#39;master&#39;</td></tr>
<tr><td class="h"><a id="L284">284</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $db</td></tr>
<tr><td class="h"><a id="L290">290</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $_PRAGMA_FORCE_MASTER</td></tr>
<tr><td class="h"><a id="L310">310</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">isu($arg) ? :</td></tr>
<tr><td class="h"><a id="L312">312</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $ab = $CLUSTER_PAIR_ACTIVE{$id})</td></tr>
<tr><td class="h"><a id="L315">315</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ab eq &#39;a&#39; or $ab eq &#39;b&#39;</td></tr>
<tr><td class="h"><a id="L332">332</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">scalar @_ == 2 ? :</td></tr>
<tr><td class="h"><a id="L334">334</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">isu($arg) ? :</td></tr>
<tr><td class="h"><a id="L335">335</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $DEF_READER_ACTUALLY_SLAVE{$id}</td></tr>
<tr><td class="h"><a id="L351">351</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">scalar @_ == 2 ? :</td></tr>
<tr><td class="h"><a id="L353">353</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">isu($arg) ? :</td></tr>
<tr><td class="h"><a id="L354">354</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $READONLY_CLUSTER{$id}</td></tr>
<tr><td class="h"><a id="L362">362</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $ab = $CLUSTER_PAIR_ACTIVE{$id})</td></tr>
<tr><td class="h"><a id="L365">365</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ab eq &#39;a&#39; or $ab eq &#39;b&#39;</td></tr>
<tr><td class="h"><a id="L382">382</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless my $dbh = $DBIRole-&gt;get_dbh(@_)</td></tr>
<tr><td class="h"><a id="L384">384</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($DB_LOG_HOST and $HAVE_DBI_PROFILE)</td></tr>
<tr><td class="h"><a id="L409">409</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $db and $lockname</td></tr>
<tr><td class="h"><a id="L410">410</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $dbrole eq &#39;global&#39; or $dbrole eq &#39;user&#39;</td></tr>
<tr><td class="h"><a id="L415">415</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if exists $LOCK_OUT{$dbrole}</td></tr>
<tr><td class="h"><a id="L420">420</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $db-&gt;do(&#39;SELECT GET_LOCK(?,?)&#39;, undef, $lockname, $wait_time)</td></tr>
<tr><td class="h"><a id="L439">439</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $db and $lockname</td></tr>
<tr><td class="h"><a id="L440">440</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $dbrole eq &#39;global&#39; or $dbrole eq &#39;user&#39;</td></tr>
<tr><td class="h"><a id="L476">476</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ref $_[0] eq &#39;LJ::DBSet&#39; or ref $_[0] eq &#39;DBI::db&#39; or ref $_[0] eq &#39;Apache::DBI::db&#39;</td></tr>
<tr><td class="h"><a id="L484">484</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($diff &gt; 2)</td></tr>
<tr><td class="h"><a id="L499">499</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $@</td></tr>
<tr><td class="h"><a id="L502">502</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$IS_DEV_SERVER ? :</td></tr>
<tr><td class="h"><a id="L522">522</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$ct == 1 ? :</td></tr>
</table>
</body>
</html>
