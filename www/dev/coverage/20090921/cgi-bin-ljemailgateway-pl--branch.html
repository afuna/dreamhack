<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>Branch Coverage: cgi-bin/ljemailgateway.pl</title>
</head>
<body>
<h1>Branch Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">cgi-bin/ljemailgateway.pl</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">24.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>%</th><th colspan="2">coverage</th><th>branch</th></tr>
<tr><td class="h"><a id="L12">12</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($LJ::USE_PGP)</td></tr>
<tr><td class="h"><a id="L14">14</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $@</td></tr>
<tr><td class="h"><a id="L57">57</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $user =~ /\./</td></tr>
<tr><td class="h"><a id="L59">59</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $u and $u-&gt;is_visible</td></tr>
<tr><td class="h"><a id="L61">61</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless lc $pin eq &#39;pgp&#39; and $LJ::USE_PGP</td></tr>
<tr><td class="h"><a id="L65">65</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless (&#39;Mail::Address&#39;-&gt;parse($head-&gt;get(&#39;From:&#39;)))[0]</td></tr>
<tr><td class="h"><a id="L66">66</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $from</td></tr>
<tr><td class="h"><a id="L69">69</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (lc $from eq lc $_ and $$addrlist{$_}{&#39;get_errors&#39;})</td></tr>
<tr><td class="h"><a id="L82">82</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($body)</td></tr>
<tr><td class="h"><a id="L88">88</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not $$opt{&#39;nomail&#39;} and not $$opt{&#39;retry&#39;} and $err_addr and LJ::MemCache::add(&quot;rate_eperr:$err_addr&quot;, 5, 300))</td></tr>
<tr><td class="h"><a id="L98">98</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $$opt{&#39;retry&#39;}</td></tr>
<tr><td class="h"><a id="L103">103</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless $$opt{&#39;nolog&#39;}</td></tr>
<tr><td class="h"><a id="L109">109</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless (&#39;Mail::Address&#39;-&gt;parse($head-&gt;get(&#39;Return-Path&#39;)))[0]</td></tr>
<tr><td class="h"><a id="L113">113</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $tent</td></tr>
<tr><td class="h"><a id="L115">115</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">$tent ? :</td></tr>
<tr><td class="h"><a id="L121">121</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $content_type =~ /\bcharset=[&#39;&quot;]?(\S+?)[&#39;&quot;]?[\s;]/i</td></tr>
<tr><td class="h"><a id="L122">122</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $content_type =~ /\bformat=[&#39;&quot;]?(\S+?)[&#39;&quot;]?[\s;]/i</td></tr>
<tr><td class="h"><a id="L123">123</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $content_type =~ /\bdelsp=[&#39;&quot;]?(\w+?)[&#39;&quot;]?[\s;]/i</td></tr>
<tr><td class="h"><a id="L125">125</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (defined $charset and not $charset =~ /^UTF-?8$/i)</td></tr>
<tr><td class="h"><a id="L126">126</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless Unicode::MapUTF8::utf8_supported_charset($charset)</td></tr>
<tr><td class="h"><a id="L134">134</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($subject =~ /^=\?/)</td></tr>
<tr><td class="h"><a id="L137">137</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (@subj_data)</td></tr>
<tr><td class="h"><a id="L138">138</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($subject =~ /utf-8/i) { }</td></tr>
<tr><td class="h"><a id="L141">141</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $charset and Unicode::MapUTF8::utf8_supported_charset($charset)</td></tr>
<tr><td class="h"><a id="L153">153</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($subject =~ s/^\s*\+([a-z0-9]+)\b//i)</td></tr>
<tr><td class="h"><a id="L154">154</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless defined $pin</td></tr>
<tr><td class="h"><a id="L157">157</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($body =~ s/^\s*\+([a-z0-9]+)\b//i)</td></tr>
<tr><td class="h"><a id="L158">158</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless defined $pin</td></tr>
<tr><td class="h"><a id="L162">162</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless (lc $pin eq &#39;pgp&#39; and $LJ::USE_PGP)</td></tr>
<tr><td class="h"><a id="L163">163</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ref $addrlist and keys %$addrlist</td></tr>
<tr><td class="h"><a id="L168">168</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless grep {lc $from eq lc $_;} keys %$addrlist</td></tr>
<tr><td class="h"><a id="L170">170</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless $pin</td></tr>
<tr><td class="h"><a id="L171">171</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless lc $pin eq lc $$u{&#39;emailpost_pin&#39;}</td></tr>
<tr><td class="h"><a id="L174">174</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $LJ::T_ALLOW_EMAILPOST or LJ::get_cap($u, &#39;emailpost&#39;)</td></tr>
<tr><td class="h"><a id="L193">193</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($return_path =~ /(?:messaging|pm)\.sprint(?:pcs)?\.com/ and $content_type =~ m[^multipart/alternative]i)</td></tr>
<tr><td class="h"><a id="L198">198</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $tent</td></tr>
<tr><td class="h"><a id="L202">202</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $html =~ /&lt;!-- lsPictureMail-Share-\w+-comment\n(.+)\n--&gt;/is</td></tr>
<tr><td class="h"><a id="L203">203</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $xml_string</td></tr>
<tr><td class="h"><a id="L209">209</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if not $xml or $@</td></tr>
<tr><td class="h"><a id="L213">213</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $$xml{&#39;messageContents&#39;}{&#39;type&#39;} eq &#39;PICTURE&#39;</td></tr>
<tr><td class="h"><a id="L223">223</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $url =~ m[^http://pictures.sprintpcs.com/]</td></tr>
<tr><td class="h"><a id="L247">247</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">ref $body ? :</td></tr>
<tr><td class="h"><a id="L249">249</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($ua_rv-&gt;is_success) { }</td></tr>
<tr><td class="h"><a id="L281">281</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($return_path and $return_path =~ /tmomail\.net$/)</td></tr>
<tr><td class="h"><a id="L284">284</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $tent-&gt;effective_type eq &#39;text/html&#39;</td></tr>
<tr><td class="h"><a id="L292">292</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^dottedline(350|600).gif$/</td></tr>
<tr><td class="h"><a id="L293">293</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^audio.gif$/</td></tr>
<tr><td class="h"><a id="L294">294</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^tmobilelogo.gif$/</td></tr>
<tr><td class="h"><a id="L295">295</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^tmobilespace.gif$/</td></tr>
<tr><td class="h"><a id="L302">302</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($return_path and $return_path =~ /mms\.alltel\.net$/)</td></tr>
<tr><td class="h"><a id="L307">307</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^divider\.gif$/</td></tr>
<tr><td class="h"><a id="L308">308</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^spacer\.gif$/</td></tr>
<tr><td class="h"><a id="L309">309</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^bluebar\.gif$/</td></tr>
<tr><td class="h"><a id="L310">310</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^header\.gif$/</td></tr>
<tr><td class="h"><a id="L311">311</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^greenbar\.gif$/</td></tr>
<tr><td class="h"><a id="L312">312</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $path =~ /^alltel_logo\.jpg$/</td></tr>
<tr><td class="h"><a id="L324">324</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($return_path and $return_path =~ /vmpix\.com$/)</td></tr>
<tr><td class="h"><a id="L332">332</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($return_path and $return_path =~ /mediamessaging\.o2\.co\.uk$/)</td></tr>
<tr><td class="h"><a id="L336">336</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($path eq &#39;smil.txt&#39;)</td></tr>
<tr><td class="h"><a id="L345">345</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (lc $pin eq &#39;pgp&#39; and $LJ::USE_PGP)</td></tr>
<tr><td class="h"><a id="L354">354</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($gpgcode eq &#39;good&#39;)</td></tr>
<tr><td class="h"><a id="L356">356</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $gpgerr</td></tr>
<tr><td class="h"><a id="L369">369</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (lc $format eq &#39;flowed&#39;)</td></tr>
<tr><td class="h"><a id="L370">370</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($delsp and lc $delsp eq &#39;yes&#39;) { }</td></tr>
<tr><td class="h"><a id="L409">409</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $id = LJ::mood_id($post_headers{&#39;mood&#39;})) { }</td></tr>
<tr><td class="h"><a id="L416">416</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $post_headers{&#39;comments&#39;} =~ /off/i or $$u{&#39;emailpost_comments&#39;} =~ /off/i</td></tr>
<tr><td class="h"><a id="L419">419</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $post_headers{&#39;comments&#39;} =~ /noemail/i or $$u{&#39;emailpost_comments&#39;} =~ /noemail/i</td></tr>
<tr><td class="h"><a id="L424">424</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($post_headers{&#39;security&#39;} =~ /^(public|private|friends)$/) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($post_headers{&#39;security&#39;}) { }</td></tr>
<tr><td class="h"><a id="L425">425</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($1 eq &#39;friends&#39;)</td></tr>
<tr><td class="h"><a id="L432">432</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($group) { }</td></tr>
<tr><td class="h"><a id="L446">446</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $post_headers{&#39;imgsecurity&#39;} =~ /^(private|regusers|friends|public)$/</td></tr>
<tr><td class="h"><a id="L506">506</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $post_error</td></tr>
<tr><td class="h"><a id="L522">522</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ref $type eq &#39;HASH&#39;</td></tr>
<tr><td class="h"><a id="L530">530</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $type eq &#39;text&#39; and $mime_type eq &#39;text/plain&#39;</td></tr>
<tr><td class="h"><a id="L531">531</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $type eq &#39;html&#39; and $mime_type eq &#39;text/html&#39;</td></tr>
<tr><td class="h"><a id="L536">536</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($mime_type =~ /$mimeattach_re/)</td></tr>
<tr><td class="h"><a id="L541">541</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $type eq &#39;text&#39; and $alte-&gt;mime_type eq &#39;text/plain&#39;</td></tr>
<tr><td class="h"><a id="L542">542</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $type eq &#39;html&#39; and $alte-&gt;mime_type eq &#39;text/html&#39;</td></tr>
<tr><td class="h"><a id="L543">543</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $type eq &#39;all&#39;</td></tr>
<tr><td class="h"><a id="L545">545</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($type eq &#39;image&#39; and $alte-&gt;mime_type =~ m[^application/octet-stream])</td></tr>
<tr><td class="h"><a id="L549">549</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $filename =~ /\.(?:gif|png|tiff?|jpe?g)$/</td></tr>
<tr><td class="h"><a id="L551">551</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $alte-&gt;mime_type =~ /^$type/ and $type ne &#39;all&#39;</td></tr>
<tr><td class="h"><a id="L555">555</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($alte-&gt;mime_type =~ /$mimeattach_re/)</td></tr>
<tr><td class="h"><a id="L556">556</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($type =~ /^(?:text|html)$/) { }</td></tr>
<tr><td class="h"><a id="L558">558</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $text_entity</td></tr>
<tr><td class="h"><a id="L566">566</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $type ne &#39;text&#39; and scalar @entities</td></tr>
<tr><td class="h"><a id="L580">580</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $key</td></tr>
<tr><td class="h"><a id="L584">584</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless -e $tmpdir</td></tr>
<tr><td class="h"><a id="L601">601</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $gline =~ /($_)/</td></tr>
<tr><td class="h"><a id="L630">630</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($ret and $ret == 1 or $ret == 4)</td></tr>
<tr><td class="h"><a id="L637">637</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $txt_e</td></tr>
<tr><td class="h"><a id="L639">639</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($entity-&gt;effective_type eq &#39;multipart/signed&#39;)</td></tr>
<tr><td class="h"><a id="L655">655</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$sig_e ? :</td></tr>
<tr><td class="h"><a id="L664">664</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($ret and $ret != 6)</td></tr>
<tr><td class="h"><a id="L666">666</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ret =~ /[35]/</td></tr>
<tr><td class="h"><a id="L667">667</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ret =~ /[12]/</td></tr>
<tr><td class="h"><a id="L670">670</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $ret == 6</td></tr>
</table>
</body>
</html>
