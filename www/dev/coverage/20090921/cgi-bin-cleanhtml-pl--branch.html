<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>Branch Coverage: cgi-bin/cleanhtml.pl</title>
</head>
<body>
<h1>Branch Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">cgi-bin/cleanhtml.pl</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">49.6%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>%</th><th colspan="2">coverage</th><th>branch</th></tr>
<tr><td class="h"><a id="L98">98</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless defined $$data</td></tr>
<tr><td class="h"><a id="L125">125</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$opts{&#39;blocked_links&#39;} ? :</td></tr>
<tr><td class="h"><a id="L126">126</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$LJ::BLOCKED_LINK_SUBSTITUTE ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$opts{&#39;blocked_link_substitute&#39;} ? :</td></tr>
<tr><td class="h"><a id="L137">137</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $$opts{&#39;eat&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L140">140</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;allow&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L143">143</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;deny&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L146">146</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;remove&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L153">153</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_sizes)</td></tr>
<tr><td class="h"><a id="L160">160</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L167">167</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;cleancss&#39;})</td></tr>
<tr><td class="h"><a id="L172">172</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;nocss&#39;})</td></tr>
<tr><td class="h"><a id="L176">176</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;attrstrip&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L200">200</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $addbreaks</td></tr>
<tr><td class="h"><a id="L202">202</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($cuturl) { }</td></tr>
<tr><td class="h"><a id="L231">231</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L266">266</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if defined $tag_substitute{$$token[1]} and $type eq &#39;S&#39; || $type eq &#39;E&#39;</td></tr>
<tr><td class="h"><a id="L269">269</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($type eq &#39;S&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($type eq &#39;E&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($type eq &#39;D&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;T&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;C&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;PI&#39;) { }</td></tr>
<tr><td class="h"><a id="L276">276</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L277">277</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L278">278</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq $eatuntil[-1])</td></tr>
<tr><td class="h"><a id="L284">284</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-template&#39; and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L291">291</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$override_capture ? :</td></tr>
<tr><td class="h"><a id="L292">292</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$name =~ /^\w+$/ ? :</td></tr>
<tr><td class="h"><a id="L296">296</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$attr{&#39;/&#39;}) { }</td></tr>
<tr><td class="h"><a id="L307">307</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;object&#39; or $tag eq &#39;embed&#39;)</td></tr>
<tr><td class="h"><a id="L308">308</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (LJ::are_hooks(&#39;transform_embed&#39;) and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L311">311</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$attr{&#39;/&#39;})</td></tr>
<tr><td class="h"><a id="L326">326</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;span&#39; and lc $$attr{&#39;class&#39;} eq &#39;ljuser&#39; and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L331">331</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L335">335</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;div&#39; || $tag eq &#39;span&#39; and lc $$attr{&#39;class&#39;} eq &#39;ljvideo&#39;)</td></tr>
<tr><td class="h"><a id="L345">345</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag =~ m[(?:\@|://)])</td></tr>
<tr><td class="h"><a id="L350">350</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$form_tag{$tag})</td></tr>
<tr><td class="h"><a id="L351">351</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not $opencount{&#39;form&#39;})</td></tr>
<tr><td class="h"><a id="L356">356</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;input&#39;)</td></tr>
<tr><td class="h"><a id="L357">357</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not $$attr{&#39;type&#39;} =~ /^\w+$/ or lc $$attr{&#39;type&#39;} eq &#39;password&#39;)</td></tr>
<tr><td class="h"><a id="L365">365</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $tag =~ s[/$][]</td></tr>
<tr><td class="h"><a id="L367">367</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($tag =~ /^\w([\w\-:_]*\w)?$/)</td></tr>
<tr><td class="h"><a id="L377">377</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $action{$tag} and $action{$tag} eq &#39;eat&#39;)</td></tr>
<tr><td class="h"><a id="L391">391</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless my $code = $htmlcleaner-&gt;can($meth)</td></tr>
<tr><td class="h"><a id="L395">395</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if not $@ and not $clean_res</td></tr>
<tr><td class="h"><a id="L399">399</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($ljuser_div)</td></tr>
<tr><td class="h"><a id="L409">409</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($ljcut_div and $ljcut_disable)</td></tr>
<tr><td class="h"><a id="L420">420</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-cut&#39; or $ljcut_div) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;style&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj-raw&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag =~ /:set$/) { }</td></tr>
<tr><td class="h"><a id="L421">421</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $ljcut_disable</td></tr>
<tr><td class="h"><a id="L425">425</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$attr{&#39;text&#39;})</td></tr>
<tr><td class="h"><a id="L427">427</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($text =~ /[^\x01-\x7f]/)</td></tr>
<tr><td class="h"><a id="L435">435</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($cut) { }</td></tr>
<tr><td class="h"><a id="L438">438</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag eq &#39;div&#39;</td></tr>
<tr><td class="h"><a id="L440">440</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag eq &#39;div&#39;</td></tr>
<tr><td class="h"><a id="L441">441</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$opts{&#39;cutpreview&#39;})</td></tr>
<tr><td class="h"><a id="L446">446</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless $$opts{&#39;textonly&#39;}</td></tr>
<tr><td class="h"><a id="L447">447</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;div&#39; and not $$opts{&#39;textonly&#39;})</td></tr>
<tr><td class="h"><a id="L458">458</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (LJ::is_enabled(&#39;css_cleaner&#39;))</td></tr>
<tr><td class="h"><a id="L462">462</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($LJ::IS_DEV_SERVER)</td></tr>
<tr><td class="h"><a id="L473">473</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">exists $$attr{&#39;comm&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">exists $$attr{&#39;user&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$attr{&#39;name&#39;} ? :</td></tr>
<tr><td class="h"><a id="L479">479</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $site = $$attr{&#39;site&#39;} and $$attr{&#39;site&#39;} ne $LJ::DOMAIN) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">elsif (length $user) { }</td></tr>
<tr><td class="h"><a id="L482">482</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $ext_u = &#39;DW::External::User&#39;-&gt;new(&#39;user&#39;, $user, &#39;site&#39;, $site)) { }</td></tr>
<tr><td class="h"><a id="L485">485</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L502">502</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (my $u = LJ::load_user_or_identity($user)) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (my $username = LJ::canonical_username($user)) { }</td></tr>
<tr><td class="h"><a id="L503">503</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L535">535</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if delete $$hash{&#39;/&#39;}</td></tr>
<tr><td class="h"><a id="L539">539</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if lc $tag eq &#39;lj-embed&#39; and lc $_ eq &#39;id&#39;</td></tr>
<tr><td class="h"><a id="L543">543</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;form&#39;)</td></tr>
<tr><td class="h"><a id="L546">546</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($action =~ m[^https?://?([^/]+)]) { }</td></tr>
<tr><td class="h"><a id="L548">548</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $host =~ /[%\@\s]/ or $LJ::FORM_DOMAIN_BANNED{$host}</td></tr>
<tr><td class="h"><a id="L554">554</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $deny</td></tr>
<tr><td class="h"><a id="L560">560</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr =~ /^(?:on|dynsrc)/)</td></tr>
<tr><td class="h"><a id="L565">565</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;data&#39;)</td></tr>
<tr><td class="h"><a id="L566">566</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $tag eq &#39;object&#39;</td></tr>
<tr><td class="h"><a id="L570">570</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;href&#39; and $$hash{$attr} =~ /^data/)</td></tr>
<tr><td class="h"><a id="L575">575</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr =~ /(?:^=)|[\x0b\x0d]/)</td></tr>
<tr><td class="h"><a id="L585">585</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ($attr =~ /^[\w_:-]+$/)</td></tr>
<tr><td class="h"><a id="L586">586</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">%$hash &gt; 1 ? :</td></tr>
<tr><td class="h"><a id="L598">598</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($nowhite =~ /(?:jscript|livescript|javascript|vbscript|about):/xi)</td></tr>
<tr><td class="h"><a id="L603">603</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;style&#39;)</td></tr>
<tr><td class="h"><a id="L604">604</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;cleancss&#39;})</td></tr>
<tr><td class="h"><a id="L612">612</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$hash{&#39;style&#39;} =~ /\Q$css\E/i)</td></tr>
<tr><td class="h"><a id="L618">618</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L619">619</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$hash{&#39;style&#39;} =~ /-moz-|absolute|relative|outline|z-index|(?&lt;!-)(?:top|left|right|bottom)\s*:|filter|-webkit-/io)</td></tr>
<tr><td class="h"><a id="L626">626</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_colors)</td></tr>
<tr><td class="h"><a id="L629">629</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_sizes)</td></tr>
<tr><td class="h"><a id="L632">632</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_fonts)</td></tr>
<tr><td class="h"><a id="L635">635</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($remove_positioning)</td></tr>
<tr><td class="h"><a id="L641">641</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;clean_js_css&#39;} and LJ::is_enabled(&#39;css_cleaner&#39;))</td></tr>
<tr><td class="h"><a id="L648">648</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;class&#39; || $attr eq &#39;id&#39; and $$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L654">654</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;id&#39; and $$hash{$attr} =~ /^ljs_/i)</td></tr>
<tr><td class="h"><a id="L660">660</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_colors and $attr eq &#39;color&#39; || $attr eq &#39;bgcolor&#39; || $attr eq &#39;fgcolor&#39; || $attr eq &#39;text&#39; or $remove_sizes and $attr eq &#39;size&#39; or $remove_fonts and $attr eq &#39;face&#39;)</td></tr>
<tr><td class="h"><a id="L667">667</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (exists $$hash{&#39;href&#39;})</td></tr>
<tr><td class="h"><a id="L670">670</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($blocked_links)</td></tr>
<tr><td class="h"><a id="L672">672</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$hash{&#39;href&#39;} =~ /$re/)</td></tr>
<tr><td class="h"><a id="L679">679</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$hash{&#39;href&#39;} =~ s[^(?:lj|site):(?://)?(.*)$][ExpandLJURL($1);]ie)</td></tr>
<tr><td class="h"><a id="L684">684</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;img&#39;)</td></tr>
<tr><td class="h"><a id="L688">688</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $$opts{&#39;maximgwidth&#39;} and $$hash{&#39;width&#39;} &gt; $$opts{&#39;maximgwidth&#39;})</td></tr>
<tr><td class="h"><a id="L690">690</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $$opts{&#39;maximgheight&#39;} and $$hash{&#39;height&#39;} &gt; $$opts{&#39;maximgheight&#39;})</td></tr>
<tr><td class="h"><a id="L692">692</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not defined $$hash{&#39;width&#39;} or not defined $$hash{&#39;height&#39;})</td></tr>
<tr><td class="h"><a id="L694">694</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;extractimages&#39;})</td></tr>
<tr><td class="h"><a id="L698">698</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($img_bad)</td></tr>
<tr><td class="h"><a id="L707">707</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;a&#39; and $extractlinks)</td></tr>
<tr><td class="h"><a id="L723">723</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;xsl:attribute&#39;)</td></tr>
<tr><td class="h"><a id="L733">733</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($value =~ /(javascript|vbscript)/i) { }</td></tr>
<tr><td class="h"><a id="L747">747</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($alt_output)</td></tr>
<tr><td class="h"><a id="L750">750</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($mode eq &#39;allow&#39;) { }</td></tr>
<tr><td class="h"><a id="L752">752</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (defined $action{$tag} and $action{$tag} eq &#39;deny&#39;)</td></tr>
<tr><td class="h"><a id="L755">755</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $action{$tag} and $action{$tag} eq &#39;allow&#39;)</td></tr>
<tr><td class="h"><a id="L758">758</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $remove{$tag})</td></tr>
<tr><td class="h"><a id="L760">760</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L771">771</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:tbody|thead|tfoot|tr|td|th|caption|colgroup|col)$/ and not @tablescope or $tag =~ /^(?:td|th)$/ and not $tablescope[-1]{&#39;tr&#39;} or $tag eq &#39;table&#39; and @tablescope and not grep {$tablescope[-1]{$_};} &#39;td&#39;, &#39;th&#39;</td></tr>
<tr><td class="h"><a id="L774">774</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow) { }</td></tr>
<tr><td class="h"><a id="L780">780</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless (LJ::is_ascii($$hash{$_}))</td></tr>
<tr><td class="h"><a id="L789">789</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if exists $$hash{$_}</td></tr>
<tr><td class="h"><a id="L796">796</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($slashclose and $tag =~ /$slashclose_tags/)</td></tr>
<tr><td class="h"><a id="L799">799</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $$opts{&#39;tablecheck&#39;} and @tablescope</td></tr>
<tr><td class="h"><a id="L801">801</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow) { }</td></tr>
<tr><td class="h"><a id="L806">806</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L809">809</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;table&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif (@tablescope) { }</td></tr>
<tr><td class="h"><a id="L828">828</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $tag =~ /[^\w\-:]/</td></tr>
<tr><td class="h"><a id="L830">830</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L831">831</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L833">833</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($eatuntil[-1] eq $tag)</td></tr>
<tr><td class="h"><a id="L835">835</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $cb = $capturing_during_eat)</td></tr>
<tr><td class="h"><a id="L842">842</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if @eatuntil</td></tr>
<tr><td class="h"><a id="L845">845</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L846">846</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;span&#39;)</td></tr>
<tr><td class="h"><a id="L849">849</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L860">860</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-raw&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj-cut&#39;) { }</td></tr>
<tr><td class="h"><a id="L862">862</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $$opts{&#39;tablecheck&#39;} and @tablescope</td></tr>
<tr><td class="h"><a id="L865">865</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;cutpreview&#39;})</td></tr>
<tr><td class="h"><a id="L869">869</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($mode eq &#39;allow&#39;) { }</td></tr>
<tr><td class="h"><a id="L871">871</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (defined $action{$tag} and $action{$tag} eq &#39;deny&#39;)</td></tr>
<tr><td class="h"><a id="L874">874</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $action{$tag} and $action{$tag} eq &#39;allow&#39;)</td></tr>
<tr><td class="h"><a id="L877">877</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($extractlinks and $tag eq &#39;a&#39;)</td></tr>
<tr><td class="h"><a id="L878">878</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (@canonical_urls)</td></tr>
<tr><td class="h"><a id="L885">885</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $remove{$tag})</td></tr>
<tr><td class="h"><a id="L888">888</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L890">890</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:table|tbody|thead|tfoot|tr|td|th|caption|colgroup|col)$/ and not @tablescope or $tag =~ /^(?:td|th)$/ and not $tablescope[-1]{&#39;tr&#39;}</td></tr>
<tr><td class="h"><a id="L899">899</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $$opts{&#39;noearlyclose&#39;} &amp;&amp; !$opencount{$tag}) { }</td></tr>
<tr><td class="h"><a id="L902">902</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L905">905</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;table&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif (@tablescope) { }</td></tr>
<tr><td class="h"><a id="L933">933</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L934">934</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L938">938</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L948">948</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($auto_format and not $noautolinks and not $opencount{&#39;a&#39;} and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L951">951</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($str =~ /^(.*?)(&amp;(#39|quot|lt|gt)(;.*)?)$/) { }</td></tr>
<tr><td class="h"><a id="L969">969</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($wordlength and not $opencount{&#39;pre&#39;} and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L974">974</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($auto_format and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L976">976</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (not $opencount{&#39;a&#39;})</td></tr>
<tr><td class="h"><a id="L988">988</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$token[1] =~ /^&lt;[^!]/) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($keepcomments) { }</td></tr>
<tr><td class="h"><a id="L1013">1013</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($extractlinks and @canonical_urls)</td></tr>
<tr><td class="h"><a id="L1024">1024</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $$opts{&#39;autoclose&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L1026">1026</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:tr|td|th|tbody|thead|tfoot|li)$/</td></tr>
<tr><td class="h"><a id="L1027">1027</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($opencount{$tag})</td></tr>
<tr><td class="h"><a id="L1037">1037</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $extra_text</td></tr>
<tr><td class="h"><a id="L1039">1039</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($suspend_msg)</td></tr>
<tr><td class="h"><a id="L1043">1043</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($unsuspend_supportid) { }</td></tr>
<tr><td class="h"><a id="L1083">1083</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($type eq &#39;S&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;E&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;D&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;T&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;C&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;PI&#39;) { }</td></tr>
<tr><td class="h"><a id="L1091">1091</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $relats = $$rel_source{$tag})</td></tr>
<tr><td class="h"><a id="L1093">1093</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless defined $$hash{$k} and not $$hash{$k} =~ /^[a-z]+:/</td></tr>
<tr><td class="h"><a id="L1103">1103</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($did_mod)</td></tr>
<tr><td class="h"><a id="L1112">1112</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $tag =~ s[/$][]</td></tr>
<tr><td class="h"><a id="L1113">1113</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if delete $$hash{&#39;/&#39;}</td></tr>
<tr><td class="h"><a id="L1119">1119</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if exists $$hash{$_}</td></tr>
<tr><td class="h"><a id="L1122">1122</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $slashclose</td></tr>
<tr><td class="h"><a id="L1142">1142</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $global_did_mod</td></tr>
<tr><td class="h"><a id="L1155">1155</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($id) { }</td></tr>
<tr><td class="h"><a id="L1163">1163</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1171">1171</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1179">1179</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($id) { }</td></tr>
<tr><td class="h"><a id="L1187">1187</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if grep {/[&quot;&#39;&lt;&gt;\n&amp;]/;} @_</td></tr>
<tr><td class="h"><a id="L1190">1190</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$_[0] eq &#39;profile&#39; ? :</td></tr>
<tr><td class="h"><a id="L1194">1194</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1202">1202</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1210">1210</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$modes{$mode} ? :</td></tr>
<tr><td class="h"><a id="L1221">1221</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $$ref =~ /[&lt;&gt;]/</td></tr>
<tr><td class="h"><a id="L1239">1239</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $$ref =~ /[&lt;&gt;]/</td></tr>
<tr><td class="h"><a id="L1285">1285</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless (ref $opts eq &#39;HASH&#39;)</td></tr>
<tr><td class="h"><a id="L1289">1289</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">defined $$opts{&#39;wordlength&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1292">1292</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not $$ref =~ /&lt;|&gt;|http/ and not $$opts{&#39;preformatted&#39;} and not $$opts{&#39;suspend_msg&#39;})</td></tr>
<tr><td class="h"><a id="L1293">1293</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $wordlength</td></tr>
<tr><td class="h"><a id="L1299">1299</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;preformatted&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;extractimages&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;noexpandembedded&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;textonly&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_colors&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_sizes&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_fonts&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;transform_embed_nocheck&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;suspend_msg&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;to_external_site&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1345">1345</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (ref $opts)</td></tr>
<tr><td class="h"><a id="L1350">1350</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$ref =~ /&lt;|&gt;|http/ and not $$opts{&#39;preformatted&#39;})</td></tr>
<tr><td class="h"><a id="L1357">1357</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$$opts{&#39;preformatted&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$$opts{&#39;textonly&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1379">1379</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ref $ref</td></tr>
<tr><td class="h"><a id="L1403">1403</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless $url</td></tr>
<tr><td class="h"><a id="L1405">1405</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ($allow_all)</td></tr>
<tr><td class="h"><a id="L1408">1408</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $url =~ /^(https?|ftp|webcal):/</td></tr>
<tr><td class="h"><a id="L1413">1413</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $url</td></tr>
<tr><td class="h"><a id="L1419">1419</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($LJ::DEBUG{&#39;aol_http_to_ftp&#39;})</td></tr>
<tr><td class="h"><a id="L1421">1421</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($url =~ m[^http://(?:www\.)?(?:members|hometown|users)\.aol\.com/])</td></tr>
<tr><td class="h"><a id="L1431">1431</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $at</td></tr>
</table>
</body>
</html>
