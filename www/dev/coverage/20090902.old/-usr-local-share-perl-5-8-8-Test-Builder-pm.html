<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: /usr/local/share/perl/5.8.8/Test/Builder.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">/usr/local/share/perl/5.8.8/Test/Builder.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">51.2%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Test::Builder;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L3">85</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">use 5.006;</td></tr>
<tr><td class="h">4</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L4">85</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L5">85</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">6</td><td colspan="7"></td></tr><tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;0.92&#39;;</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$VERSION = eval $VERSION;    ## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">9</td><td colspan="7"></td></tr><tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">11</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L11">50</a></div></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L11">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $] &lt; 5.008 ) {</td></tr>
<tr><td class="h">12</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require Test::Builder::IO::Scalar;</td></tr>
<tr><td class="h">13</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">15</td><td colspan="7"></td></tr><tr><td class="h">16</td><td colspan="7"></td></tr><tr><td class="h">17</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Make Test::Builder thread-safe for ithreads.</td></tr>
<tr><td class="h">18</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">19</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L19">85</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;use Config;</td></tr>
<tr><td class="h">20</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Load threads::shared when threads are turned on.</td></tr>
<tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 5.8.0&#39;s threads are so busted we no longer support them.</td></tr>
<tr><td class="h">22</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L22">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L22">25</a></div></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L22">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt;= 5.008001 &amp;&amp; $Config{useithreads} &amp;&amp; $INC{&#39;threads.pm&#39;} ) {</td></tr>
<tr><td class="h">23</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require threads::shared;</td></tr>
<tr><td class="h">24</td><td colspan="7"></td></tr><tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Hack around YET ANOTHER threads::shared bug.  It would</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# occassionally forget the contents of the variable when sharing it.</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# So we first copy the data, then share, then put our copy back.</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*share = sub (\[$@%]) {</td></tr>
<tr><td class="h">29</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = ref $_[0];</td></tr>
<tr><td class="h">30</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data;</td></tr>
<tr><td class="h">31</td><td colspan="7"></td></tr><tr><td class="h">32</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L32">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L32">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L32">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">33</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%$data = %{ $_[0] };</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">36</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$data = @{ $_[0] };</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">39</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$data = ${ $_[0] };</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">41</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">42</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die( &quot;Unknown type: &quot; . $type );</td></tr>
<tr><td class="h">43</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">44</td><td colspan="7"></td></tr><tr><td class="h">45</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$_[0] = &amp;threads::shared::share( $_[0] );</td></tr>
<tr><td class="h">46</td><td colspan="7"></td></tr><tr><td class="h">47</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L47">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L47">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L47">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;HASH&#39; ) {</td></tr>
<tr><td class="h">48</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%{ $_[0] } = %$data;</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;ARRAY&#39; ) {</td></tr>
<tr><td class="h">51</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{ $_[0] } = @$data;</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">54</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${ $_[0] } = $$data;</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">57</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die( &quot;Unknown type: &quot; . $type );</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $_[0];</td></tr>
<tr><td class="h">61</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">63</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# 5.8.0&#39;s threads::shared is busted when threads are off</td></tr>
<tr><td class="h">64</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# and earlier Perls just don&#39;t have that module at all.</td></tr>
<tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">66</td><td><div class="c3">85</div><div class="c3">1496</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L66">1496</a></div></td><td></td><td><div>0</div><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*share = sub { return $_[0] };</td></tr>
<tr><td class="h">67</td><td><div class="c3">85</div><div class="c3">1281</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L67">1281</a></div></td><td></td><td><div>0</div><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*lock  = sub { 0 };</td></tr>
<tr><td class="h">68</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71 - 117</td><td colspan="6"></td><td class="s"><pre>=head1 NAME

Test::Builder - Backend for building test libraries

=head1 SYNOPSIS

  package My::Test::Module;
  use base &#39;Test::Builder::Module&#39;;

  my $CLASS = __PACKAGE__;

  sub ok {
      my($test, $name) = @_;
      my $tb = $CLASS-&gt;builder;

      $tb-&gt;ok($test, $name);
  }


=head1 DESCRIPTION

Test::Simple and Test::More have proven to be popular testing modules,
but they&#39;re not always flexible enough.  Test::Builder provides the a
building block upon which to write your own test libraries I&lt;which can
work together&gt;.

=head2 Construction

=over 4

=item B&lt;new&gt;

  my $Test = Test::Builder-&gt;new;

Returns a Test::Builder object representing the current state of the
test.

Since you only run one test per program C&lt;new&gt; always returns the same
Test::Builder object.  No matter how many times you call C&lt;new()&gt;, you&#39;re
getting the same object.  This is called a singleton.  This is done so that
multiple modules share such global information as the test counter and
where test output is going.

If you want a completely new Test::Builder object different from the
singleton, use C&lt;create&gt;.

=cut</pre></td></tr>
<tr><td class="h">118</td><td colspan="7"></td></tr><tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $Test = Test::Builder-&gt;new;</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new {</td></tr>
<tr><td class="h">122</td><td><div class="c3">1675</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L122">1675</a></div></td><td><div class="c3">1</div></td><td><div>16001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($class) = shift;</td></tr>
<tr><td class="h">123</td><td><div class="c3">1675</div></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L123">100</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Test ||= $class-&gt;create;</td></tr>
<tr><td class="h">124</td><td><div class="c3">1675</div></td><td></td><td></td><td></td><td></td><td><div>24004</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $Test;</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127 - 139</td><td colspan="6"></td><td class="s"><pre>=item B&lt;create&gt;

  my $Test = Test::Builder-&gt;create;

Ok, so there can be more than one Test::Builder object and this is how
you get it.  You might use this instead of C&lt;new()&gt; if you&#39;re testing
a Test::Builder based module, but otherwise you probably want C&lt;new&gt;.

B&lt;NOTE&gt;: the implementation is not complete.  C&lt;level&gt;, for example, is
still shared amongst B&lt;all&gt; Test::Builder objects, even ones created using
this method.  Also, the method name may change in the future.

=cut</pre></td></tr>
<tr><td class="h">140</td><td colspan="7"></td></tr><tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub create {</td></tr>
<tr><td class="h">142</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L142">85</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = shift;</td></tr>
<tr><td class="h">143</td><td colspan="7"></td></tr><tr><td class="h">144</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = bless {}, $class;</td></tr>
<tr><td class="h">145</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;reset;</td></tr>
<tr><td class="h">146</td><td colspan="7"></td></tr><tr><td class="h">147</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">149</td><td colspan="7"></td></tr><tr><td class="h">150 - 158</td><td colspan="6"></td><td class="s"><pre>=item B&lt;reset&gt;

  $Test-&gt;reset;

Reinitializes the Test::Builder singleton to its original state.
Mostly useful for tests run in persistent environments where the same
test might be run multiple times in the same process.

=cut</pre></td></tr>
<tr><td class="h">159</td><td colspan="7"></td></tr><tr><td class="h">160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $Level;</td></tr>
<tr><td class="h">161</td><td colspan="7"></td></tr><tr><td class="h">162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub reset {    ## no critic (Subroutines::ProhibitBuiltinHomonyms)</td></tr>
<tr><td class="h">163</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L163">85</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self) = @_;</td></tr>
<tr><td class="h">164</td><td colspan="7"></td></tr><tr><td class="h">165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We leave this a global because it has to be localized and localizing</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# hash keys is just asking for pain.  Also, it was documented.</td></tr>
<tr><td class="h">167</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Level = 1;</td></tr>
<tr><td class="h">168</td><td colspan="7"></td></tr><tr><td class="h">169</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan}    = 0;</td></tr>
<tr><td class="h">170</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan}      = 0;</td></tr>
<tr><td class="h">171</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Output_Plan} = 0;</td></tr>
<tr><td class="h">172</td><td colspan="7"></td></tr><tr><td class="h">173</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Original_Pid} = $$;</td></tr>
<tr><td class="h">174</td><td colspan="7"></td></tr><tr><td class="h">175</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;share( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">176</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test} = 0;</td></tr>
<tr><td class="h">177</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results} = &amp;share( [] );</td></tr>
<tr><td class="h">178</td><td colspan="7"></td></tr><tr><td class="h">179</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Exported_To}    = undef;</td></tr>
<tr><td class="h">180</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = 0;</td></tr>
<tr><td class="h">181</td><td colspan="7"></td></tr><tr><td class="h">182</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Skip_All} = 0;</td></tr>
<tr><td class="h">183</td><td colspan="7"></td></tr><tr><td class="h">184</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Use_Nums} = 1;</td></tr>
<tr><td class="h">185</td><td colspan="7"></td></tr><tr><td class="h">186</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Header} = 0;</td></tr>
<tr><td class="h">187</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Ending} = 0;</td></tr>
<tr><td class="h">188</td><td colspan="7"></td></tr><tr><td class="h">189</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo}       = undef;</td></tr>
<tr><td class="h">190</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo_Stack} = [];</td></tr>
<tr><td class="h">191</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo} = 0;</td></tr>
<tr><td class="h">192</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Opened_Testhandles} = 0;</td></tr>
<tr><td class="h">193</td><td colspan="7"></td></tr><tr><td class="h">194</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dup_stdhandles;</td></tr>
<tr><td class="h">195</td><td colspan="7"></td></tr><tr><td class="h">196</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">198</td><td colspan="7"></td></tr><tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">200</td><td colspan="7"></td></tr><tr><td class="h">201 - 219</td><td colspan="6"></td><td class="s"><pre>=head2 Setting up tests

These methods are for setting up tests and declaring how many there
are.  You usually only want to call one of these methods.

=over 4

=item B&lt;plan&gt;

  $Test-&gt;plan(&#39;no_plan&#39;);
  $Test-&gt;plan( skip_all =&gt; $reason );
  $Test-&gt;plan( tests =&gt; $num_tests );

A convenient way to set up your tests.  Call this and Test::Builder
will print the appropriate headers and take the appropriate actions.

If you call C&lt;plan()&gt;, don&#39;t call any of the other methods below.

=cut</pre></td></tr>
<tr><td class="h">220</td><td colspan="7"></td></tr><tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %plan_cmds = (</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no_plan     =&gt; \&amp;no_plan,</td></tr>
<tr><td class="h">223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;skip_all    =&gt; \&amp;skip_all,</td></tr>
<tr><td class="h">224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;tests       =&gt; \&amp;_plan_tests,</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">226</td><td colspan="7"></td></tr><tr><td class="h">227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub plan {</td></tr>
<tr><td class="h">228</td><td><div class="c3">131</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L228">131</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $cmd, $arg ) = @_;</td></tr>
<tr><td class="h">229</td><td colspan="7"></td></tr><tr><td class="h">230</td><td><div class="c3">131</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L230">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $cmd;</td></tr>
<tr><td class="h">231</td><td colspan="7"></td></tr><tr><td class="h">232</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">233</td><td colspan="7"></td></tr><tr><td class="h">234</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L234">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;You tried to plan twice&quot;) if $self-&gt;{Have_Plan};</td></tr>
<tr><td class="h">235</td><td colspan="7"></td></tr><tr><td class="h">236</td><td><div class="c3">85</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L236">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $method = $plan_cmds{$cmd} ) {</td></tr>
<tr><td class="h">237</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">238</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$method($arg);</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">241</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @args = grep { defined } ( $cmd, $arg );</td></tr>
<tr><td class="h">242</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;plan() doesn&#39;t understand @args&quot;);</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">244</td><td colspan="7"></td></tr><tr><td class="h">245</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">247</td><td colspan="7"></td></tr><tr><td class="h">248</td><td colspan="7"></td></tr><tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _plan_tests {</td></tr>
<tr><td class="h">250</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L250">17</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $arg) = @_;</td></tr>
<tr><td class="h">251</td><td colspan="7"></td></tr><tr><td class="h">252</td><td><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L252">50</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L252">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($arg) {</td></tr>
<tr><td class="h">253</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">254</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;expected_tests($arg);</td></tr>
<tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( !defined $arg ) {</td></tr>
<tr><td class="h">257</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Got an undefined number of tests&quot;);</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">260</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;You said to run 0 tests&quot;);</td></tr>
<tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">262</td><td colspan="7"></td></tr><tr><td class="h">263</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">265</td><td colspan="7"></td></tr><tr><td class="h">266</td><td colspan="7"></td></tr><tr><td class="h">267 - 275</td><td colspan="6"></td><td class="s"><pre>=item B&lt;expected_tests&gt;

    my $max = $Test-&gt;expected_tests;
    $Test-&gt;expected_tests($max);

Gets/sets the number of tests we expect this test to run and prints out
the appropriate headers.

=cut</pre></td></tr>
<tr><td class="h">276</td><td colspan="7"></td></tr><tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub expected_tests {</td></tr>
<tr><td class="h">278</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L278">17</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">279</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($max) = @_;</td></tr>
<tr><td class="h">280</td><td colspan="7"></td></tr><tr><td class="h">281</td><td><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L281">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@_) {</td></tr>
<tr><td class="h">282</td><td><div class="c3">17</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L282">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&quot;Number of tests must be a positive integer.  You gave it &#39;$max&#39;&quot;)</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $max =~ /^\+?\d+$/;</td></tr>
<tr><td class="h">284</td><td colspan="7"></td></tr><tr><td class="h">285</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $max;</td></tr>
<tr><td class="h">286</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan}      = 1;</td></tr>
<tr><td class="h">287</td><td colspan="7"></td></tr><tr><td class="h">288</td><td><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L288">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($max) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">290</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">292</td><td colspan="7"></td></tr><tr><td class="h">293 - 299</td><td colspan="6"></td><td class="s"><pre>=item B&lt;no_plan&gt;

  $Test-&gt;no_plan;

Declares that this test will run an indeterminate number of tests.

=cut</pre></td></tr>
<tr><td class="h">300</td><td colspan="7"></td></tr><tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub no_plan {</td></tr>
<tr><td class="h">302</td><td><div class="c3">28</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L302">28</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $arg) = @_;</td></tr>
<tr><td class="h">303</td><td colspan="7"></td></tr><tr><td class="h">304</td><td><div class="c3">28</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L304">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;carp(&quot;no_plan takes no arguments&quot;) if $arg;</td></tr>
<tr><td class="h">305</td><td colspan="7"></td></tr><tr><td class="h">306</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan}   = 1;</td></tr>
<tr><td class="h">307</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan} = 1;</td></tr>
<tr><td class="h">308</td><td colspan="7"></td></tr><tr><td class="h">309</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">311</td><td colspan="7"></td></tr><tr><td class="h">312</td><td colspan="7"></td></tr><tr><td class="h">313 - 333</td><td colspan="6"></td><td class="s"><pre>=begin private

=item B&lt;_output_plan&gt;

  $tb-&gt;_output_plan($max);
  $tb-&gt;_output_plan($max, $directive);
  $tb-&gt;_output_plan($max, $directive =&gt; $reason);

Handles displaying the test plan.

If a C&lt;$directive&gt; and/or C&lt;$reason&gt; are given they will be output with the
plan.  So here&#39;s what skipping all tests looks like:

    $tb-&gt;_output_plan(0, &quot;SKIP&quot;, &quot;Because I said so&quot;);

It sets C&lt;&lt; $tb-&gt;{Have_Output_Plan} &gt;&gt; and will croak if the plan was already
output.

=end private

=cut</pre></td></tr>
<tr><td class="h">334</td><td colspan="7"></td></tr><tr><td class="h">335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _output_plan {</td></tr>
<tr><td class="h">336</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L336">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $max, $directive, $reason) = @_;</td></tr>
<tr><td class="h">337</td><td colspan="7"></td></tr><tr><td class="h">338</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L338">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;carp(&quot;The plan was already output&quot;) if $self-&gt;{Have_Output_Plan};</td></tr>
<tr><td class="h">339</td><td colspan="7"></td></tr><tr><td class="h">340</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $plan = &quot;1..$max&quot;;</td></tr>
<tr><td class="h">341</td><td><div class="c3">85</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L341">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$plan .= &quot; # $directive&quot; if defined $directive;</td></tr>
<tr><td class="h">342</td><td><div class="c3">85</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L342">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$plan .= &quot; $reason&quot;      if defined $reason;</td></tr>
<tr><td class="h">343</td><td colspan="7"></td></tr><tr><td class="h">344</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print(&quot;$plan\n&quot;);</td></tr>
<tr><td class="h">345</td><td colspan="7"></td></tr><tr><td class="h">346</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Output_Plan} = 1;</td></tr>
<tr><td class="h">347</td><td colspan="7"></td></tr><tr><td class="h">348</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">350</td><td colspan="7"></td></tr><tr><td class="h">351 - 384</td><td colspan="6"></td><td class="s"><pre>=item B&lt;done_testing&gt;

  $Test-&gt;done_testing();
  $Test-&gt;done_testing($num_tests);

Declares that you are done testing, no more tests will be run after this point.

If a plan has not yet been output, it will do so.

$num_tests is the number of tests you planned to run.  If a numbered
plan was already declared, and if this contradicts, a failing test
will be run to reflect the planning mistake.  If C&lt;no_plan&gt; was declared,
this will override.

If C&lt;done_testing()&gt; is called twice, the second call will issue a
failing test.

If C&lt;$num_tests&gt; is omitted, the number of tests run will be used, like
no_plan.

C&lt;done_testing()&gt; is, in effect, used when you&#39;d want to use C&lt;no_plan&gt;, but
safer. You&#39;d use it like so:

    $Test-&gt;ok($a == $b);
    $Test-&gt;done_testing();

Or to plan a variable number of tests:

    for my $test (@tests) {
        $Test-&gt;ok($test);
    }
    $Test-&gt;done_testing(@tests);

=cut</pre></td></tr>
<tr><td class="h">385</td><td colspan="7"></td></tr><tr><td class="h">386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub done_testing {</td></tr>
<tr><td class="h">387</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L387">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self, $num_tests) = @_;</td></tr>
<tr><td class="h">388</td><td colspan="7"></td></tr><tr><td class="h">389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# If done_testing() specified the number of tests, shut off no_plan.</td></tr>
<tr><td class="h">390</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L390">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $num_tests ) {</td></tr>
<tr><td class="h">391</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{No_Plan} = 0;</td></tr>
<tr><td class="h">392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">394</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$num_tests = $self-&gt;current_test;</td></tr>
<tr><td class="h">395</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">396</td><td colspan="7"></td></tr><tr><td class="h">397</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L397">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Done_Testing} ) {</td></tr>
<tr><td class="h">398</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($file, $line) = @{$self-&gt;{Done_Testing}}[1,2];</td></tr>
<tr><td class="h">399</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok(0, &quot;done_testing() was already called at $file line $line&quot;);</td></tr>
<tr><td class="h">400</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">402</td><td colspan="7"></td></tr><tr><td class="h">403</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Done_Testing} = [caller];</td></tr>
<tr><td class="h">404</td><td colspan="7"></td></tr><tr><td class="h">405</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L405">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L405">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;expected_tests &amp;&amp; $num_tests != $self-&gt;expected_tests ) {</td></tr>
<tr><td class="h">406</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok(0, &quot;planned to run @{[ $self-&gt;expected_tests ]} &quot;.</td></tr>
<tr><td class="h">407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;but done_testing() expects $num_tests&quot;);</td></tr>
<tr><td class="h">408</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">410</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $num_tests;</td></tr>
<tr><td class="h">411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">412</td><td colspan="7"></td></tr><tr><td class="h">413</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L413">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($num_tests) unless $self-&gt;{Have_Output_Plan};</td></tr>
<tr><td class="h">414</td><td colspan="7"></td></tr><tr><td class="h">415</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Have_Plan} = 1;</td></tr>
<tr><td class="h">416</td><td colspan="7"></td></tr><tr><td class="h">417</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">418</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">419</td><td colspan="7"></td></tr><tr><td class="h">420</td><td colspan="7"></td></tr><tr><td class="h">421 - 429</td><td colspan="6"></td><td class="s"><pre>=item B&lt;has_plan&gt;

  $plan = $Test-&gt;has_plan

Find out whether a plan has been defined. C&lt;$plan&gt; is either C&lt;undef&gt; (no plan
has been set), C&lt;no_plan&gt; (indeterminate # of tests) or an integer (the number
of expected tests).

=cut</pre></td></tr>
<tr><td class="h">430</td><td colspan="7"></td></tr><tr><td class="h">431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub has_plan {</td></tr>
<tr><td class="h">432</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L432">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">433</td><td colspan="7"></td></tr><tr><td class="h">434</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L434">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( $self-&gt;{Expected_Tests} ) if $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">435</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L435">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return(&#39;no_plan&#39;) if $self-&gt;{No_Plan};</td></tr>
<tr><td class="h">436</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return(undef);</td></tr>
<tr><td class="h">437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">438</td><td colspan="7"></td></tr><tr><td class="h">439 - 446</td><td colspan="6"></td><td class="s"><pre>=item B&lt;skip_all&gt;

  $Test-&gt;skip_all;
  $Test-&gt;skip_all($reason);

Skips all the tests, using the given C&lt;$reason&gt;.  Exits immediately with 0.

=cut</pre></td></tr>
<tr><td class="h">447</td><td colspan="7"></td></tr><tr><td class="h">448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub skip_all {</td></tr>
<tr><td class="h">449</td><td><div class="c3">40</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L449">40</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $reason ) = @_;</td></tr>
<tr><td class="h">450</td><td colspan="7"></td></tr><tr><td class="h">451</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Skip_All} = 1;</td></tr>
<tr><td class="h">452</td><td colspan="7"></td></tr><tr><td class="h">453</td><td><div class="c3">40</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L453">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan(0, &quot;SKIP&quot;, $reason) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">454</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;exit(0);</td></tr>
<tr><td class="h">455</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">456</td><td colspan="7"></td></tr><tr><td class="h">457 - 468</td><td colspan="6"></td><td class="s"><pre>=item B&lt;exported_to&gt;

  my $pack = $Test-&gt;exported_to;
  $Test-&gt;exported_to($pack);

Tells Test::Builder what package you exported your functions to.

This method isn&#39;t terribly useful since modules which share the same
Test::Builder object might get exported to different packages and only
the last one will be honored.

=cut</pre></td></tr>
<tr><td class="h">469</td><td colspan="7"></td></tr><tr><td class="h">470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub exported_to {</td></tr>
<tr><td class="h">471</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L471">85</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack ) = @_;</td></tr>
<tr><td class="h">472</td><td colspan="7"></td></tr><tr><td class="h">473</td><td><div class="c3">85</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L473">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $pack ) {</td></tr>
<tr><td class="h">474</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Exported_To} = $pack;</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">476</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Exported_To};</td></tr>
<tr><td class="h">477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">478</td><td colspan="7"></td></tr><tr><td class="h">479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">480</td><td colspan="7"></td></tr><tr><td class="h">481 - 498</td><td colspan="6"></td><td class="s"><pre>=head2 Running tests

These actually run the tests, analogous to the functions in Test::More.

They all return true if the test passed, false if the test failed.

C&lt;$name&gt; is always optional.

=over 4

=item B&lt;ok&gt;

  $Test-&gt;ok($test, $name);

Your basic test.  Pass if C&lt;$test&gt; is true, fail if $test is false.  Just
like Test::Simple&#39;s C&lt;ok()&gt;.

=cut</pre></td></tr>
<tr><td class="h">499</td><td colspan="7"></td></tr><tr><td class="h">500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ok {</td></tr>
<tr><td class="h">501</td><td><div class="c3">1281</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L501">1281</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $test, $name ) = @_;</td></tr>
<tr><td class="h">502</td><td colspan="7"></td></tr><tr><td class="h">503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $test might contain an object which we don&#39;t want to accidentally</td></tr>
<tr><td class="h">504</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# store, so we turn it into a boolean.</td></tr>
<tr><td class="h">505</td><td><div class="c3">1281</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L505">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$test = $test ? 1 : 0;</td></tr>
<tr><td class="h">506</td><td colspan="7"></td></tr><tr><td class="h">507</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">508</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">509</td><td colspan="7"></td></tr><tr><td class="h">510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# In case $name is a string overloaded object, force it to stringify.</td></tr>
<tr><td class="h">511</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>20000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$name );</td></tr>
<tr><td class="h">512</td><td colspan="7"></td></tr><tr><td class="h">513</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L513">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L513">67</a></div></td><td></td><td></td><td><div>20000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;ERR&quot;) if defined $name and $name =~ /^[\d\s]+$/;</td></tr>
<tr><td class="h">514</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;You named your test &#39;$name&#39;.  You shouldn&#39;t use numbers for your test names.</td></tr>
<tr><td class="h">515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Very confusing.</td></tr>
<tr><td class="h">516</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">ERR</td></tr>
<tr><td class="h">517</td><td colspan="7"></td></tr><tr><td class="h">518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Capture the value of $TODO for the rest of this ok() call</td></tr>
<tr><td class="h">519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# so it can more easily be found by other routines.</td></tr>
<tr><td class="h">520</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $todo    = $self-&gt;todo();</td></tr>
<tr><td class="h">521</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $in_todo = $self-&gt;in_todo;</td></tr>
<tr><td class="h">522</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L522">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $self-&gt;{Todo} = $todo if $in_todo;</td></tr>
<tr><td class="h">523</td><td colspan="7"></td></tr><tr><td class="h">524</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$todo );</td></tr>
<tr><td class="h">525</td><td colspan="7"></td></tr><tr><td class="h">526</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out;</td></tr>
<tr><td class="h">527</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $result = &amp;share( {} );</td></tr>
<tr><td class="h">528</td><td colspan="7"></td></tr><tr><td class="h">529</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L529">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($test) {</td></tr>
<tr><td class="h">530</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;not &quot;;</td></tr>
<tr><td class="h">531</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L531">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$result{ &#39;ok&#39;, &#39;actual_ok&#39; } = ( ( $self-&gt;in_todo ? 1 : 0 ), 0 );</td></tr>
<tr><td class="h">532</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">533</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">534</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$result{ &#39;ok&#39;, &#39;actual_ok&#39; } = ( 1, $test );</td></tr>
<tr><td class="h">535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">536</td><td colspan="7"></td></tr><tr><td class="h">537</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>16000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;ok&quot;;</td></tr>
<tr><td class="h">538</td><td><div class="c3">1281</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L538">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">539</td><td colspan="7"></td></tr><tr><td class="h">540</td><td><div class="c3">1281</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L540">100</a></div></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $name ) {</td></tr>
<tr><td class="h">541</td><td><div class="c3">1172</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$name =~ s|#|\\#|g;    # # in a name can confuse Test::Harness.</td></tr>
<tr><td class="h">542</td><td><div class="c3">1172</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; - $name&quot;;</td></tr>
<tr><td class="h">543</td><td><div class="c3">1172</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{name} = $name;</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">546</td><td><div class="c3">109</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{name} = &#39;&#39;;</td></tr>
<tr><td class="h">547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">548</td><td colspan="7"></td></tr><tr><td class="h">549</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L549">50</a></div></td><td></td><td></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;in_todo ) {</td></tr>
<tr><td class="h">550</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # TODO $todo&quot;;</td></tr>
<tr><td class="h">551</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{reason} = $todo;</td></tr>
<tr><td class="h">552</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{type}   = &#39;todo&#39;;</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">555</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{reason} = &#39;&#39;;</td></tr>
<tr><td class="h">556</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result-&gt;{type}   = &#39;&#39;;</td></tr>
<tr><td class="h">557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">558</td><td colspan="7"></td></tr><tr><td class="h">559</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>12002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = $result;</td></tr>
<tr><td class="h">560</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;\n&quot;;</td></tr>
<tr><td class="h">561</td><td colspan="7"></td></tr><tr><td class="h">562</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">563</td><td colspan="7"></td></tr><tr><td class="h">564</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L564">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($test) {</td></tr>
<tr><td class="h">565</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L565">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $msg = $self-&gt;in_todo ? &quot;Failed (TODO)&quot; : &quot;Failed&quot;;</td></tr>
<tr><td class="h">566</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L566">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_to_fh( $self-&gt;_diag_fh, &quot;\n&quot; ) if $ENV{HARNESS_ACTIVE};</td></tr>
<tr><td class="h">567</td><td colspan="7"></td></tr><tr><td class="h">568</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( undef, $file, $line ) = $self-&gt;caller;</td></tr>
<tr><td class="h">569</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L569">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $name ) {</td></tr>
<tr><td class="h">570</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[  $msg test &#39;$name&#39;\n]);</td></tr>
<tr><td class="h">571</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[  at $file line $line.\n]);</td></tr>
<tr><td class="h">572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">574</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(qq[  $msg test at $file line $line.\n]);</td></tr>
<tr><td class="h">575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">577</td><td colspan="7"></td></tr><tr><td class="h">578</td><td><div class="c3">1281</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L578">50</a></div></td><td></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $test ? 1 : 0;</td></tr>
<tr><td class="h">579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">580</td><td colspan="7"></td></tr><tr><td class="h">581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload {</td></tr>
<tr><td class="h">582</td><td><div class="c3">3341</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L582">3341</a></div></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">583</td><td><div class="c3">3341</div></td><td></td><td></td><td></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $type = shift;</td></tr>
<tr><td class="h">584</td><td colspan="7"></td></tr><tr><td class="h">585</td><td><div class="c3">3341</div><div class="c3">3341</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L585">3341</a></div></td><td></td><td><div>20002</div><div>40002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(sub { require overload; }, die_on_fail =&gt; 1);</td></tr>
<tr><td class="h">586</td><td colspan="7"></td></tr><tr><td class="h">587</td><td><div class="c3">3341</div></td><td></td><td></td><td></td><td></td><td><div>24001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $thing (@_) {</td></tr>
<tr><td class="h">588</td><td><div class="c3">4120</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L588">100</a></div></td><td></td><td></td><td></td><td><div>8001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;_is_object($$thing) ) {</td></tr>
<tr><td class="h">589</td><td><div class="c3">154</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L589">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $string_meth = overload::Method( $$thing, $type ) ) {</td></tr>
<tr><td class="h">590</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$thing = $$thing-&gt;$string_meth();</td></tr>
<tr><td class="h">591</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">593</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">594</td><td colspan="7"></td></tr><tr><td class="h">595</td><td><div class="c3">3341</div></td><td></td><td></td><td></td><td></td><td><div>16000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">597</td><td colspan="7"></td></tr><tr><td class="h">598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_object {</td></tr>
<tr><td class="h">599</td><td><div class="c3">4120</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L599">4120</a></div></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $thing ) = @_;</td></tr>
<tr><td class="h">600</td><td colspan="7"></td></tr><tr><td class="h">601</td><td><div class="c3">4120</div><div class="c3">4120</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L601">100</a></div><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L601">100</a></div></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L601">4120</a></div></td><td></td><td><div>52004</div><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_try( sub { ref $thing &amp;&amp; $thing-&gt;isa(&#39;UNIVERSAL&#39;) } ) ? 1 : 0;</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">603</td><td colspan="7"></td></tr><tr><td class="h">604</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload_str {</td></tr>
<tr><td class="h">605</td><td><div class="c3">3341</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L605">3341</a></div></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">606</td><td colspan="7"></td></tr><tr><td class="h">607</td><td><div class="c3">3341</div></td><td></td><td></td><td></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_unoverload( q[&quot;&quot;], @_ );</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">609</td><td colspan="7"></td></tr><tr><td class="h">610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unoverload_num {</td></tr>
<tr><td class="h">611</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L611">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">612</td><td colspan="7"></td></tr><tr><td class="h">613</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload( &#39;0+&#39;, @_ );</td></tr>
<tr><td class="h">614</td><td colspan="7"></td></tr><tr><td class="h">615</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $val (@_) {</td></tr>
<tr><td class="h">616</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L616">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next unless $self-&gt;_is_dualvar($$val);</td></tr>
<tr><td class="h">617</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = $$val + 0;</td></tr>
<tr><td class="h">618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">619</td><td colspan="7"></td></tr><tr><td class="h">620</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">622</td><td colspan="7"></td></tr><tr><td class="h">623</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is a hack to detect a dualvar such as $!</td></tr>
<tr><td class="h">624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_dualvar {</td></tr>
<tr><td class="h">625</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L625">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $val ) = @_;</td></tr>
<tr><td class="h">626</td><td colspan="7"></td></tr><tr><td class="h">627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Objects are not dualvars.</td></tr>
<tr><td class="h">628</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L628">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 if ref $val;</td></tr>
<tr><td class="h">629</td><td colspan="7"></td></tr><tr><td class="h">630</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L630">85</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;numeric&#39;;</td></tr>
<tr><td class="h">631</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $numval = $val + 0;</td></tr>
<tr><td class="h">632</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L632">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L632">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $numval != 0 and $numval ne $val ? 1 : 0;</td></tr>
<tr><td class="h">633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">634</td><td colspan="7"></td></tr><tr><td class="h">635 - 649</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is_eq&gt;

  $Test-&gt;is_eq($got, $expected, $name);

Like Test::More&#39;s C&lt;is()&gt;.  Checks if C&lt;$got eq $expected&gt;.  This is the
string version.

=item B&lt;is_num&gt;

  $Test-&gt;is_num($got, $expected, $name);

Like Test::More&#39;s C&lt;is()&gt;.  Checks if C&lt;$got == $expected&gt;.  This is the
numeric version.

=cut</pre></td></tr>
<tr><td class="h">650</td><td colspan="7"></td></tr><tr><td class="h">651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_eq {</td></tr>
<tr><td class="h">652</td><td><div class="c3">598</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L652">598</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $expect, $name ) = @_;</td></tr>
<tr><td class="h">653</td><td><div class="c3">598</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">654</td><td colspan="7"></td></tr><tr><td class="h">655</td><td><div class="c3">598</div></td><td></td><td></td><td></td><td></td><td><div>8001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$got, \$expect );</td></tr>
<tr><td class="h">656</td><td colspan="7"></td></tr><tr><td class="h">657</td><td><div class="c3">598</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L657">100</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L657">67</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $expect ) {</td></tr>
<tr><td class="h">658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">659</td><td><div class="c3">9</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L659">33</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = !defined $got &amp;&amp; !defined $expect;</td></tr>
<tr><td class="h">660</td><td colspan="7"></td></tr><tr><td class="h">661</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">662</td><td><div class="c3">9</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L662">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, &#39;eq&#39;, $expect ) unless $test;</td></tr>
<tr><td class="h">663</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">665</td><td colspan="7"></td></tr><tr><td class="h">666</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;eq&#39;, $expect, $name );</td></tr>
<tr><td class="h">667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">668</td><td colspan="7"></td></tr><tr><td class="h">669</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_num {</td></tr>
<tr><td class="h">670</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L670">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $expect, $name ) = @_;</td></tr>
<tr><td class="h">671</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">672</td><td colspan="7"></td></tr><tr><td class="h">673</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_num( \$got, \$expect );</td></tr>
<tr><td class="h">674</td><td colspan="7"></td></tr><tr><td class="h">675</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L675">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L675">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $expect ) {</td></tr>
<tr><td class="h">676</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">677</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L677">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = !defined $got &amp;&amp; !defined $expect;</td></tr>
<tr><td class="h">678</td><td colspan="7"></td></tr><tr><td class="h">679</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">680</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L680">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, &#39;==&#39;, $expect ) unless $test;</td></tr>
<tr><td class="h">681</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">683</td><td colspan="7"></td></tr><tr><td class="h">684</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;==&#39;, $expect, $name );</td></tr>
<tr><td class="h">685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">686</td><td colspan="7"></td></tr><tr><td class="h">687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _diag_fmt {</td></tr>
<tr><td class="h">688</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L688">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $type, $val ) = @_;</td></tr>
<tr><td class="h">689</td><td colspan="7"></td></tr><tr><td class="h">690</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L690">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $$val ) {</td></tr>
<tr><td class="h">691</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L691">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L691">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type eq &#39;eq&#39; or $type eq &#39;ne&#39; ) {</td></tr>
<tr><td class="h">692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# quote and force string context</td></tr>
<tr><td class="h">693</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = &quot;&#39;$$val&#39;&quot;;</td></tr>
<tr><td class="h">694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">696</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# force numeric context</td></tr>
<tr><td class="h">697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_num($val);</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">700</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">701</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$val = &#39;undef&#39;;</td></tr>
<tr><td class="h">702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">703</td><td colspan="7"></td></tr><tr><td class="h">704</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">705</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">706</td><td colspan="7"></td></tr><tr><td class="h">707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_diag {</td></tr>
<tr><td class="h">708</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L708">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect ) = @_;</td></tr>
<tr><td class="h">709</td><td colspan="7"></td></tr><tr><td class="h">710</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_diag_fmt( $type, $_ ) for \$got, \$expect;</td></tr>
<tr><td class="h">711</td><td colspan="7"></td></tr><tr><td class="h">712</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">713</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got: $got</td></tr>
<tr><td class="h">715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;expected: $expect</td></tr>
<tr><td class="h">716</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">717</td><td colspan="7"></td></tr><tr><td class="h">718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">719</td><td colspan="7"></td></tr><tr><td class="h">720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _isnt_diag {</td></tr>
<tr><td class="h">721</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L721">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type ) = @_;</td></tr>
<tr><td class="h">722</td><td colspan="7"></td></tr><tr><td class="h">723</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_diag_fmt( $type, \$got );</td></tr>
<tr><td class="h">724</td><td colspan="7"></td></tr><tr><td class="h">725</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">726</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">727</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got: $got</td></tr>
<tr><td class="h">728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;expected: anything else</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">731</td><td colspan="7"></td></tr><tr><td class="h">732 - 746</td><td colspan="6"></td><td class="s"><pre>=item B&lt;isnt_eq&gt;

  $Test-&gt;isnt_eq($got, $dont_expect, $name);

Like Test::More&#39;s C&lt;isnt()&gt;.  Checks if C&lt;$got ne $dont_expect&gt;.  This is
the string version.

=item B&lt;isnt_num&gt;

  $Test-&gt;isnt_num($got, $dont_expect, $name);

Like Test::More&#39;s C&lt;isnt()&gt;.  Checks if C&lt;$got ne $dont_expect&gt;.  This is
the numeric version.

=cut</pre></td></tr>
<tr><td class="h">747</td><td colspan="7"></td></tr><tr><td class="h">748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isnt_eq {</td></tr>
<tr><td class="h">749</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L749">3</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $dont_expect, $name ) = @_;</td></tr>
<tr><td class="h">750</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">751</td><td colspan="7"></td></tr><tr><td class="h">752</td><td><div class="c3">3</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L752">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L752">33</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $dont_expect ) {</td></tr>
<tr><td class="h">753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">754</td><td><div class="c3">3</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L754">33</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = defined $got || defined $dont_expect;</td></tr>
<tr><td class="h">755</td><td colspan="7"></td></tr><tr><td class="h">756</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">757</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L757">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, &#39;ne&#39; ) unless $test;</td></tr>
<tr><td class="h">758</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">759</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">760</td><td colspan="7"></td></tr><tr><td class="h">761</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;ne&#39;, $dont_expect, $name );</td></tr>
<tr><td class="h">762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">763</td><td colspan="7"></td></tr><tr><td class="h">764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub isnt_num {</td></tr>
<tr><td class="h">765</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L765">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $dont_expect, $name ) = @_;</td></tr>
<tr><td class="h">766</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">767</td><td colspan="7"></td></tr><tr><td class="h">768</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L768">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L768">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $got || !defined $dont_expect ) {</td></tr>
<tr><td class="h">769</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# undef only matches undef and nothing else</td></tr>
<tr><td class="h">770</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L770">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test = defined $got || defined $dont_expect;</td></tr>
<tr><td class="h">771</td><td colspan="7"></td></tr><tr><td class="h">772</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">773</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L773">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, &#39;!=&#39; ) unless $test;</td></tr>
<tr><td class="h">774</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $test;</td></tr>
<tr><td class="h">775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">776</td><td colspan="7"></td></tr><tr><td class="h">777</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;cmp_ok( $got, &#39;!=&#39;, $dont_expect, $name );</td></tr>
<tr><td class="h">778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">779</td><td colspan="7"></td></tr><tr><td class="h">780 - 797</td><td colspan="6"></td><td class="s"><pre>=item B&lt;like&gt;

  $Test-&gt;like($this, qr/$regex/, $name);
  $Test-&gt;like($this, &#39;/$regex/&#39;, $name);

Like Test::More&#39;s C&lt;like()&gt;.  Checks if $this matches the given C&lt;$regex&gt;.

You&#39;ll want to avoid C&lt;qr//&gt; if you want your tests to work before 5.005.

=item B&lt;unlike&gt;

  $Test-&gt;unlike($this, qr/$regex/, $name);
  $Test-&gt;unlike($this, &#39;/$regex/&#39;, $name);

Like Test::More&#39;s C&lt;unlike()&gt;.  Checks if $this B&lt;does not match&gt; the
given C&lt;$regex&gt;.

=cut</pre></td></tr>
<tr><td class="h">798</td><td colspan="7"></td></tr><tr><td class="h">799</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub like {</td></tr>
<tr><td class="h">800</td><td><div class="c3">57</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L800">57</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $this, $regex, $name ) = @_;</td></tr>
<tr><td class="h">801</td><td colspan="7"></td></tr><tr><td class="h">802</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">803</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_regex_ok( $this, $regex, &#39;=~&#39;, $name );</td></tr>
<tr><td class="h">804</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">805</td><td colspan="7"></td></tr><tr><td class="h">806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unlike {</td></tr>
<tr><td class="h">807</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L807">1</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $this, $regex, $name ) = @_;</td></tr>
<tr><td class="h">808</td><td colspan="7"></td></tr><tr><td class="h">809</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">810</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_regex_ok( $this, $regex, &#39;!~&#39;, $name );</td></tr>
<tr><td class="h">811</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">812</td><td colspan="7"></td></tr><tr><td class="h">813 - 821</td><td colspan="6"></td><td class="s"><pre>=item B&lt;cmp_ok&gt;

  $Test-&gt;cmp_ok($this, $type, $that, $name);

Works just like Test::More&#39;s C&lt;cmp_ok()&gt;.

    $Test-&gt;cmp_ok($big_num, &#39;!=&#39;, $other_big_num);

=cut</pre></td></tr>
<tr><td class="h">822</td><td colspan="7"></td></tr><tr><td class="h">823</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %numeric_cmps = map { ( $_, 1 ) } ( &quot;&lt;&quot;, &quot;&lt;=&quot;, &quot;&gt;&quot;, &quot;&gt;=&quot;, &quot;==&quot;, &quot;!=&quot;, &quot;&lt;=&gt;&quot; );</td></tr>
<tr><td class="h">824</td><td colspan="7"></td></tr><tr><td class="h">825</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cmp_ok {</td></tr>
<tr><td class="h">826</td><td><div class="c3">589</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L826">589</a></div></td><td><div class="c3">1</div></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect, $name ) = @_;</td></tr>
<tr><td class="h">827</td><td colspan="7"></td></tr><tr><td class="h">828</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test;</td></tr>
<tr><td class="h">829</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $error;</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">831</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">832</td><td colspan="7"></td></tr><tr><td class="h">833</td><td><div class="c3">589</div><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local( $@, $!, $SIG{__DIE__} );    # isolate eval</td></tr>
<tr><td class="h">834</td><td colspan="7"></td></tr><tr><td class="h">835</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($pack, $file, $line) = $self-&gt;caller();</td></tr>
<tr><td class="h">836</td><td colspan="7"></td></tr><tr><td class="h">837</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>40003</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = eval qq[</td></tr>
<tr><td class="h">838</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#line 1 &quot;cmp_ok [from $file line $line]&quot;</td></tr>
<tr><td class="h">839</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">\$got $type \$expect;</td></tr>
<tr><td class="h">840</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">];</td></tr>
<tr><td class="h">841</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$error = $@;</td></tr>
<tr><td class="h">842</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">843</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">844</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok = $self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">845</td><td colspan="7"></td></tr><tr><td class="h">846</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Treat overloaded objects as numbers if we&#39;re asked to do a</td></tr>
<tr><td class="h">847</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# numeric comparison.</td></tr>
<tr><td class="h">848</td><td><div class="c3">589</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L848">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $unoverload</td></tr>
<tr><td class="h">849</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $numeric_cmps{$type}</td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? &#39;_unoverload_num&#39;</td></tr>
<tr><td class="h">851</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;_unoverload_str&#39;;</td></tr>
<tr><td class="h">852</td><td colspan="7"></td></tr><tr><td class="h">853</td><td><div class="c3">589</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L853">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;END&quot;) if $error;</td></tr>
<tr><td class="h">854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">An error occurred while using $type:</td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">------------------------------------</td></tr>
<tr><td class="h">856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$error</td></tr>
<tr><td class="h">857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">------------------------------------</td></tr>
<tr><td class="h">858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">END</td></tr>
<tr><td class="h">859</td><td colspan="7"></td></tr><tr><td class="h">860</td><td><div class="c3">589</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L860">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">861</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$unoverload( \$got, \$expect );</td></tr>
<tr><td class="h">862</td><td colspan="7"></td></tr><tr><td class="h">863</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L863">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L863">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $type =~ /^(eq|==)$/ ) {</td></tr>
<tr><td class="h">864</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_diag( $got, $type, $expect );</td></tr>
<tr><td class="h">865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $type =~ /^(ne|!=)$/ ) {</td></tr>
<tr><td class="h">867</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_isnt_diag( $got, $type );</td></tr>
<tr><td class="h">868</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">870</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_cmp_diag( $got, $type, $expect );</td></tr>
<tr><td class="h">871</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">873</td><td><div class="c3">589</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">875</td><td colspan="7"></td></tr><tr><td class="h">876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _cmp_diag {</td></tr>
<tr><td class="h">877</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L877">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $got, $type, $expect ) = @_;</td></tr>
<tr><td class="h">878</td><td colspan="7"></td></tr><tr><td class="h">879</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L879">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$got    = defined $got    ? &quot;&#39;$got&#39;&quot;    : &#39;undef&#39;;</td></tr>
<tr><td class="h">880</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L880">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$expect = defined $expect ? &quot;&#39;$expect&#39;&quot; : &#39;undef&#39;;</td></tr>
<tr><td class="h">881</td><td colspan="7"></td></tr><tr><td class="h">882</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">883</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;diag(&lt;&lt;&quot;DIAGNOSTIC&quot;);</td></tr>
<tr><td class="h">884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$got</td></tr>
<tr><td class="h">885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type</td></tr>
<tr><td class="h">886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$expect</td></tr>
<tr><td class="h">887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">888</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">889</td><td colspan="7"></td></tr><tr><td class="h">890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _caller_context {</td></tr>
<tr><td class="h">891</td><td><div class="c3">58</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L891">58</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">892</td><td colspan="7"></td></tr><tr><td class="h">893</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $pack, $file, $line ) = $self-&gt;caller(1);</td></tr>
<tr><td class="h">894</td><td colspan="7"></td></tr><tr><td class="h">895</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code = &#39;&#39;;</td></tr>
<tr><td class="h">896</td><td><div class="c3">58</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L896">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L896">33</a></div></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$code .= &quot;#line $line $file\n&quot; if defined $file and defined $line;</td></tr>
<tr><td class="h">897</td><td colspan="7"></td></tr><tr><td class="h">898</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $code;</td></tr>
<tr><td class="h">899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">900</td><td colspan="7"></td></tr><tr><td class="h">901</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">902</td><td colspan="7"></td></tr><tr><td class="h">903</td><td colspan="7"></td></tr><tr><td class="h">904 - 920</td><td colspan="6"></td><td class="s"><pre>=head2 Other Testing Methods

These are methods which are used in the course of writing a test but are not themselves tests.

=over 4

=item B&lt;BAIL_OUT&gt;

    $Test-&gt;BAIL_OUT($reason);

Indicates to the Test::Harness that things are going so badly all
testing should terminate.  This includes running any additional test
scripts.

It will exit with 255.

=cut</pre></td></tr>
<tr><td class="h">921</td><td colspan="7"></td></tr><tr><td class="h">922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub BAIL_OUT {</td></tr>
<tr><td class="h">923</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L923">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $reason ) = @_;</td></tr>
<tr><td class="h">924</td><td colspan="7"></td></tr><tr><td class="h">925</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Bailed_Out} = 1;</td></tr>
<tr><td class="h">926</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print(&quot;Bail out!  $reason&quot;);</td></tr>
<tr><td class="h">927</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;exit 255;</td></tr>
<tr><td class="h">928</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">929</td><td colspan="7"></td></tr><tr><td class="h">930 - 933</td><td colspan="6"></td><td class="s"><pre>=for deprecated
BAIL_OUT() used to be BAILOUT()

=cut</pre></td></tr>
<tr><td class="h">934</td><td colspan="7"></td></tr><tr><td class="h">935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">*BAILOUT = \&amp;BAIL_OUT;</td></tr>
<tr><td class="h">936</td><td colspan="7"></td></tr><tr><td class="h">937 - 944</td><td colspan="6"></td><td class="s"><pre>=item B&lt;skip&gt;

    $Test-&gt;skip;
    $Test-&gt;skip($why);

Skips the current test, reporting C&lt;$why&gt;.

=cut</pre></td></tr>
<tr><td class="h">945</td><td colspan="7"></td></tr><tr><td class="h">946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub skip {</td></tr>
<tr><td class="h">947</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L947">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $why ) = @_;</td></tr>
<tr><td class="h">948</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L948">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$why ||= &#39;&#39;;</td></tr>
<tr><td class="h">949</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_unoverload_str( \$why );</td></tr>
<tr><td class="h">950</td><td colspan="7"></td></tr><tr><td class="h">951</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">952</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">953</td><td colspan="7"></td></tr><tr><td class="h">954</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = &amp;share(</td></tr>
<tr><td class="h">955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">956</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;      =&gt; 1,</td></tr>
<tr><td class="h">957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; 1,</td></tr>
<tr><td class="h">958</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name      =&gt; &#39;&#39;,</td></tr>
<tr><td class="h">959</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type      =&gt; &#39;skip&#39;,</td></tr>
<tr><td class="h">960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason    =&gt; $why,</td></tr>
<tr><td class="h">961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">963</td><td colspan="7"></td></tr><tr><td class="h">964</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out = &quot;ok&quot;;</td></tr>
<tr><td class="h">965</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L965">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">966</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # skip&quot;;</td></tr>
<tr><td class="h">967</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L967">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $why&quot;               if length $why;</td></tr>
<tr><td class="h">968</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot;\n&quot;;</td></tr>
<tr><td class="h">969</td><td colspan="7"></td></tr><tr><td class="h">970</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">971</td><td colspan="7"></td></tr><tr><td class="h">972</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">974</td><td colspan="7"></td></tr><tr><td class="h">975 - 985</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo_skip&gt;

  $Test-&gt;todo_skip;
  $Test-&gt;todo_skip($why);

Like C&lt;skip()&gt;, only it will declare the test as failing and TODO.  Similar
to

    print &quot;not ok $tnum # TODO $why\n&quot;;

=cut</pre></td></tr>
<tr><td class="h">986</td><td colspan="7"></td></tr><tr><td class="h">987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_skip {</td></tr>
<tr><td class="h">988</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L988">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $why ) = @_;</td></tr>
<tr><td class="h">989</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L989">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$why ||= &#39;&#39;;</td></tr>
<tr><td class="h">990</td><td colspan="7"></td></tr><tr><td class="h">991</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">992</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test}++;</td></tr>
<tr><td class="h">993</td><td colspan="7"></td></tr><tr><td class="h">994</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Test_Results}[ $self-&gt;{Curr_Test} - 1 ] = &amp;share(</td></tr>
<tr><td class="h">995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;      =&gt; 1,</td></tr>
<tr><td class="h">997</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; 0,</td></tr>
<tr><td class="h">998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name      =&gt; &#39;&#39;,</td></tr>
<tr><td class="h">999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type      =&gt; &#39;todo_skip&#39;,</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason    =&gt; $why,</td></tr>
<tr><td class="h">1001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1003</td><td colspan="7"></td></tr><tr><td class="h">1004</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $out = &quot;not ok&quot;;</td></tr>
<tr><td class="h">1005</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1005">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; $self-&gt;{Curr_Test}&quot; if $self-&gt;use_numbers;</td></tr>
<tr><td class="h">1006</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$out .= &quot; # TODO &amp; SKIP $why\n&quot;;</td></tr>
<tr><td class="h">1007</td><td colspan="7"></td></tr><tr><td class="h">1008</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print($out);</td></tr>
<tr><td class="h">1009</td><td colspan="7"></td></tr><tr><td class="h">1010</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1012</td><td colspan="7"></td></tr><tr><td class="h">1013 - 1062</td><td colspan="6"></td><td class="s"><pre>=begin _unimplemented

=item B&lt;skip_rest&gt;

  $Test-&gt;skip_rest;
  $Test-&gt;skip_rest($reason);

Like C&lt;skip()&gt;, only it skips all the rest of the tests you plan to run
and terminates the test.

If you&#39;re running under C&lt;no_plan&gt;, it skips once and terminates the
test.

=end _unimplemented

=back


=head2 Test building utility methods

These methods are useful when writing your own test methods.

=over 4

=item B&lt;maybe_regex&gt;

  $Test-&gt;maybe_regex(qr/$regex/);
  $Test-&gt;maybe_regex(&#39;/$regex/&#39;);

Convenience method for building testing functions that take regular
expressions as arguments, but need to work before perl 5.005.

Takes a quoted regular expression produced by C&lt;qr//&gt;, or a string
representing a regular expression.

Returns a Perl value which may be used instead of the corresponding
regular expression, or C&lt;undef&gt; if its argument is not recognised.

For example, a version of C&lt;like()&gt;, sans the useful diagnostic messages,
could be written as:

  sub laconic_like {
      my ($self, $this, $regex, $name) = @_;
      my $usable_regex = $self-&gt;maybe_regex($regex);
      die &quot;expecting regex, found &#39;$regex&#39;\n&quot;
          unless $usable_regex;
      $self-&gt;ok($this =~ m/$usable_regex/, $name);
  }

=cut</pre></td></tr>
<tr><td class="h">1063</td><td colspan="7"></td></tr><tr><td class="h">1064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub maybe_regex {</td></tr>
<tr><td class="h">1065</td><td><div class="c3">58</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1065">58</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $regex ) = @_;</td></tr>
<tr><td class="h">1066</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $usable_regex = undef;</td></tr>
<tr><td class="h">1067</td><td colspan="7"></td></tr><tr><td class="h">1068</td><td><div class="c3">58</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1068">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $usable_regex unless defined $regex;</td></tr>
<tr><td class="h">1069</td><td colspan="7"></td></tr><tr><td class="h">1070</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $re, $opts );</td></tr>
<tr><td class="h">1071</td><td colspan="7"></td></tr><tr><td class="h">1072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check for qr/foo/</td></tr>
<tr><td class="h">1073</td><td><div class="c3">58</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1073">50</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1073">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1073">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _is_qr($regex) ) {</td></tr>
<tr><td class="h">1074</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$usable_regex = $regex;</td></tr>
<tr><td class="h">1075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1076</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Check for &#39;/foo/&#39; or &#39;m,foo,&#39;</td></tr>
<tr><td class="h">1077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif(( $re, $opts )        = $regex =~ m{^ /(.*)/ (\w*) $ }sx              or</td></tr>
<tr><td class="h">1078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( undef, $re, $opts ) = $regex =~ m,^ m([^\w\s]) (.+) \1 (\w*) $,sx</td></tr>
<tr><td class="h">1079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1081</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1081">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$usable_regex = length $opts ? &quot;(?$opts)$re&quot; : $re;</td></tr>
<tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1083</td><td colspan="7"></td></tr><tr><td class="h">1084</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $usable_regex;</td></tr>
<tr><td class="h">1085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1086</td><td colspan="7"></td></tr><tr><td class="h">1087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _is_qr {</td></tr>
<tr><td class="h">1088</td><td><div class="c3">58</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1088">58</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $regex = shift;</td></tr>
<tr><td class="h">1089</td><td colspan="7"></td></tr><tr><td class="h">1090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# is_regexp() checks for regexes in a robust manner, say if they&#39;re</td></tr>
<tr><td class="h">1091</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# blessed.</td></tr>
<tr><td class="h">1092</td><td><div class="c3">58</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1092">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return re::is_regexp($regex) if defined &amp;re::is_regexp;</td></tr>
<tr><td class="h">1093</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ref $regex eq &#39;Regexp&#39;;</td></tr>
<tr><td class="h">1094</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1095</td><td colspan="7"></td></tr><tr><td class="h">1096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _regex_ok {</td></tr>
<tr><td class="h">1097</td><td><div class="c3">58</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1097">58</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $this, $regex, $cmp, $name ) = @_;</td></tr>
<tr><td class="h">1098</td><td colspan="7"></td></tr><tr><td class="h">1099</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok           = 0;</td></tr>
<tr><td class="h">1100</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $usable_regex = $self-&gt;maybe_regex($regex);</td></tr>
<tr><td class="h">1101</td><td><div class="c3">58</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1101">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $usable_regex ) {</td></tr>
<tr><td class="h">1102</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1103</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $self-&gt;ok( 0, $name );</td></tr>
<tr><td class="h">1104</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;    &#39;$regex&#39; doesn&#39;t look much like a regex to me.&quot;);</td></tr>
<tr><td class="h">1105</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1107</td><td colspan="7"></td></tr><tr><td class="h">1108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;## no critic (BuiltinFunctions::ProhibitStringyEval)</td></tr>
<tr><td class="h">1110</td><td colspan="7"></td></tr><tr><td class="h">1111</td><td><div class="c3">58</div><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test;</td></tr>
<tr><td class="h">1112</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $code = $self-&gt;_caller_context;</td></tr>
<tr><td class="h">1113</td><td colspan="7"></td></tr><tr><td class="h">1114</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local( $@, $!, $SIG{__DIE__} );    # isolate eval</td></tr>
<tr><td class="h">1115</td><td colspan="7"></td></tr><tr><td class="h">1116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Yes, it has to look like this or 5.4.5 won&#39;t see the #line</td></tr>
<tr><td class="h">1117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# directive.</td></tr>
<tr><td class="h">1118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t ask me, man, I just work here.</td></tr>
<tr><td class="h">1119</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = eval &quot;</td></tr>
<tr><td class="h">1120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">$code&quot; . q{$test = $this =~ /$usable_regex/ ? 1 : 0};</td></tr>
<tr><td class="h">1121</td><td colspan="7"></td></tr><tr><td class="h">1122</td><td><div class="c3">58</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1122">100</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = !$test if $cmp eq &#39;!~&#39;;</td></tr>
<tr><td class="h">1123</td><td colspan="7"></td></tr><tr><td class="h">1124</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1125</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ok = $self-&gt;ok( $test, $name );</td></tr>
<tr><td class="h">1126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1127</td><td colspan="7"></td></tr><tr><td class="h">1128</td><td><div class="c3">58</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1128">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless($ok) {</td></tr>
<tr><td class="h">1129</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1129">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this = defined $this ? &quot;&#39;$this&#39;&quot; : &#39;undef&#39;;</td></tr>
<tr><td class="h">1130</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1130">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $match = $cmp eq &#39;=~&#39; ? &quot;doesn&#39;t match&quot; : &quot;matches&quot;;</td></tr>
<tr><td class="h">1131</td><td colspan="7"></td></tr><tr><td class="h">1132</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1133</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag( sprintf &lt;&lt;&#39;DIAGNOSTIC&#39;, $this, $match, $regex );</td></tr>
<tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%s</td></tr>
<tr><td class="h">1135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%13s &#39;%s&#39;</td></tr>
<tr><td class="h">1136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">DIAGNOSTIC</td></tr>
<tr><td class="h">1137</td><td colspan="7"></td></tr><tr><td class="h">1138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1139</td><td colspan="7"></td></tr><tr><td class="h">1140</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">1141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1142</td><td colspan="7"></td></tr><tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># I&#39;m not ready to publish this.  It doesn&#39;t deal with array return</td></tr>
<tr><td class="h">1144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># values from the code or context.</td></tr>
<tr><td class="h">1145</td><td colspan="7"></td></tr><tr><td class="h">1146 - 1162</td><td colspan="6"></td><td class="s"><pre>=begin private

=item B&lt;_try&gt;

    my $return_from_code          = $Test-&gt;try(sub { code });
    my($return_from_code, $error) = $Test-&gt;try(sub { code });

Works like eval BLOCK except it ensures it has no effect on the rest
of the test (ie. C&lt;$@&gt; is not set) nor is effected by outside
interference (ie. C&lt;$SIG{__DIE__}&gt;) and works around some quirks in older
Perls.

C&lt;$error&gt; is what would normally be in C&lt;$@&gt;.

It is suggested you use this in place of eval BLOCK.

=cut</pre></td></tr>
<tr><td class="h">1163</td><td colspan="7"></td></tr><tr><td class="h">1164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _try {</td></tr>
<tr><td class="h">1165</td><td><div class="c3">7461</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1165">7461</a></div></td><td></td><td><div>60002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $code, %opts ) = @_;</td></tr>
<tr><td class="h">1166</td><td colspan="7"></td></tr><tr><td class="h">1167</td><td><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $error;</td></tr>
<tr><td class="h">1168</td><td><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>24002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $return;</td></tr>
<tr><td class="h">1169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1170</td><td><div class="c3">7461</div><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>8001</div><div>28002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $!;               # eval can mess up $!</td></tr>
<tr><td class="h">1171</td><td><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $@;               # don&#39;t set $@ in the test</td></tr>
<tr><td class="h">1172</td><td><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>60005</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $SIG{__DIE__};    # don&#39;t trip an outside DIE handler.</td></tr>
<tr><td class="h">1173</td><td><div class="c3">7461</div><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>16002</div><div>36002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$return = eval { $code-&gt;() };</td></tr>
<tr><td class="h">1174</td><td><div class="c3">7461</div></td><td></td><td></td><td></td><td></td><td><div>32002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$error = $@;</td></tr>
<tr><td class="h">1175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1176</td><td colspan="7"></td></tr><tr><td class="h">1177</td><td><div class="c3">7461</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1177">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1177">67</a></div></td><td></td><td></td><td><div>44002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die $error if $error and $opts{die_on_fail};</td></tr>
<tr><td class="h">1178</td><td colspan="7"></td></tr><tr><td class="h">1179</td><td><div class="c3">7461</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1179">50</a></div></td><td></td><td></td><td></td><td><div>60004</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray ? ( $return, $error ) : $return;</td></tr>
<tr><td class="h">1180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1181</td><td colspan="7"></td></tr><tr><td class="h">1182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=end private</td></tr>
<tr><td class="h">1183</td><td colspan="7"></td></tr><tr><td class="h">1184</td><td colspan="7"></td></tr><tr><td class="h">1185 - 1191</td><td colspan="6"></td><td class="s"><pre>=item B&lt;is_fh&gt;

    my $is_fh = $Test-&gt;is_fh($thing);

Determines if the given C&lt;$thing&gt; can be used as a filehandle.

=cut</pre></td></tr>
<tr><td class="h">1192</td><td colspan="7"></td></tr><tr><td class="h">1193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_fh {</td></tr>
<tr><td class="h">1194</td><td><div class="c3">255</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1194">255</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self     = shift;</td></tr>
<tr><td class="h">1195</td><td><div class="c3">255</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $maybe_fh = shift;</td></tr>
<tr><td class="h">1196</td><td><div class="c3">255</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1196">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless defined $maybe_fh;</td></tr>
<tr><td class="h">1197</td><td colspan="7"></td></tr><tr><td class="h">1198</td><td><div class="c3">255</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1198">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if ref $maybe_fh  eq &#39;GLOB&#39;;    # its a glob ref</td></tr>
<tr><td class="h">1199</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1199">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if ref \$maybe_fh eq &#39;GLOB&#39;;    # its a glob</td></tr>
<tr><td class="h">1200</td><td colspan="7"></td></tr><tr><td class="h">1201</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return eval { $maybe_fh-&gt;isa(&quot;IO::Handle&quot;) } ||</td></tr>
<tr><td class="h">1202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 5.5.4&#39;s tied() and can() doesn&#39;t like getting undef</td></tr>
<tr><td class="h">1203</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1203">0</a></div><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1203">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval { ( tied($maybe_fh) || &#39;&#39; )-&gt;can(&#39;TIEHANDLE&#39;) };</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1205</td><td colspan="7"></td></tr><tr><td class="h">1206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1207</td><td colspan="7"></td></tr><tr><td class="h">1208</td><td colspan="7"></td></tr><tr><td class="h">1209 - 1235</td><td colspan="6"></td><td class="s"><pre>=head2 Test style


=over 4

=item B&lt;level&gt;

    $Test-&gt;level($how_high);

How far up the call stack should C&lt;$Test&gt; look when reporting where the
test failed.

Defaults to 1.

Setting L&lt;$Test::Builder::Level&gt; overrides.  This is typically useful
localized:

    sub my_ok {
        my $test = shift;

        local $Test::Builder::Level = $Test::Builder::Level + 1;
        $TB-&gt;ok($test);
    }

To be polite to other functions wrapping your own you usually want to increment C&lt;$Level&gt; rather than set it to a constant.

=cut</pre></td></tr>
<tr><td class="h">1236</td><td colspan="7"></td></tr><tr><td class="h">1237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub level {</td></tr>
<tr><td class="h">1238</td><td><div class="c3">4491</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1238">4491</a></div></td><td><div class="c3">1</div></td><td><div>8001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $level ) = @_;</td></tr>
<tr><td class="h">1239</td><td colspan="7"></td></tr><tr><td class="h">1240</td><td><div class="c3">4491</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1240">50</a></div></td><td></td><td></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $level ) {</td></tr>
<tr><td class="h">1241</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$Level = $level;</td></tr>
<tr><td class="h">1242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1243</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>24000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $Level;</td></tr>
<tr><td class="h">1244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1245</td><td colspan="7"></td></tr><tr><td class="h">1246 - 1267</td><td colspan="6"></td><td class="s"><pre>=item B&lt;use_numbers&gt;

    $Test-&gt;use_numbers($on_or_off);

Whether or not the test should output numbers.  That is, this if true:

  ok 1
  ok 2
  ok 3

or this if false

  ok
  ok
  ok

Most useful when you can&#39;t depend on the test output order, such as
when threads or forking is involved.

Defaults to on.

=cut</pre></td></tr>
<tr><td class="h">1268</td><td colspan="7"></td></tr><tr><td class="h">1269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub use_numbers {</td></tr>
<tr><td class="h">1270</td><td><div class="c3">1281</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1270">1281</a></div></td><td><div class="c3">1</div></td><td><div>8001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $use_nums ) = @_;</td></tr>
<tr><td class="h">1271</td><td colspan="7"></td></tr><tr><td class="h">1272</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1272">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $use_nums ) {</td></tr>
<tr><td class="h">1273</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Use_Nums} = $use_nums;</td></tr>
<tr><td class="h">1274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1275</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Use_Nums};</td></tr>
<tr><td class="h">1276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1277</td><td colspan="7"></td></tr><tr><td class="h">1278 - 1300</td><td colspan="6"></td><td class="s"><pre>=item B&lt;no_diag&gt;

    $Test-&gt;no_diag($no_diag);

If set true no diagnostics will be printed.  This includes calls to
C&lt;diag()&gt;.

=item B&lt;no_ending&gt;

    $Test-&gt;no_ending($no_ending);

Normally, Test::Builder does some extra diagnostics when the test
ends.  It also changes the exit code as described below.

If this is true, none of that will be done.

=item B&lt;no_header&gt;

    $Test-&gt;no_header($no_header);

If set to true, no &quot;1..N&quot; header will be printed.

=cut</pre></td></tr>
<tr><td class="h">1301</td><td colspan="7"></td></tr><tr><td class="h">1302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">foreach my $attribute (qw(No_Header No_Ending No_Diag)) {</td></tr>
<tr><td class="h">1303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $method = lc $attribute;</td></tr>
<tr><td class="h">1304</td><td colspan="7"></td></tr><tr><td class="h">1305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $code = sub {</td></tr>
<tr><td class="h">1306</td><td><div class="c3">171</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1306">171</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $no ) = @_;</td></tr>
<tr><td class="h">1307</td><td colspan="7"></td></tr><tr><td class="h">1308</td><td><div class="c3">171</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1308">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $no ) {</td></tr>
<tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{$attribute} = $no;</td></tr>
<tr><td class="h">1310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1311</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{$attribute};</td></tr>
<tr><td class="h">1312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1313</td><td colspan="7"></td></tr><tr><td class="h">1314</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1314">85</a></div></td><td></td><td><div>8001</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;    ## no critic</td></tr>
<tr><td class="h">1315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*{ __PACKAGE__ . &#39;::&#39; . $method } = $code;</td></tr>
<tr><td class="h">1316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1317</td><td colspan="7"></td></tr><tr><td class="h">1318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1319</td><td colspan="7"></td></tr><tr><td class="h">1320 - 1353</td><td colspan="6"></td><td class="s"><pre>=head2 Output

Controlling where the test output goes.

It&#39;s ok for your test to change where STDOUT and STDERR point to,
Test::Builder&#39;s default output settings will not be affected.

=over 4

=item B&lt;diag&gt;

    $Test-&gt;diag(@msgs);

Prints out the given C&lt;@msgs&gt;.  Like C&lt;print&gt;, arguments are simply
appended together.

Normally, it uses the C&lt;failure_output()&gt; handle, but if this is for a
TODO test, the C&lt;todo_output()&gt; handle is used.

Output will be indented and marked with a # so as not to interfere
with test output.  A newline will be put on the end if there isn&#39;t one
already.

We encourage using this rather than calling print directly.

Returns false.  Why?  Because C&lt;diag()&gt; is often used in conjunction with
a failing test (C&lt;ok() || diag()&gt;) it &quot;passes through&quot; the failure.

    return ok(...) || diag(...);

=for blame transfer
Mark Fowler &lt;mark@twoshortplanks.com&gt;

=cut</pre></td></tr>
<tr><td class="h">1354</td><td colspan="7"></td></tr><tr><td class="h">1355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub diag {</td></tr>
<tr><td class="h">1356</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1356">1</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1357</td><td colspan="7"></td></tr><tr><td class="h">1358</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_comment( $self-&gt;_diag_fh, @_ );</td></tr>
<tr><td class="h">1359</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1360</td><td colspan="7"></td></tr><tr><td class="h">1361 - 1368</td><td colspan="6"></td><td class="s"><pre>=item B&lt;note&gt;

    $Test-&gt;note(@msgs);

Like C&lt;diag()&gt;, but it prints to the C&lt;output()&gt; handle so it will not
normally be seen by the user except in verbose mode.

=cut</pre></td></tr>
<tr><td class="h">1369</td><td colspan="7"></td></tr><tr><td class="h">1370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub note {</td></tr>
<tr><td class="h">1371</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1371">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1372</td><td colspan="7"></td></tr><tr><td class="h">1373</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_comment( $self-&gt;output, @_ );</td></tr>
<tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1375</td><td colspan="7"></td></tr><tr><td class="h">1376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _diag_fh {</td></tr>
<tr><td class="h">1377</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1377">1</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1378</td><td colspan="7"></td></tr><tr><td class="h">1379</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1380</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1380">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;in_todo ? $self-&gt;todo_output : $self-&gt;failure_output;</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1382</td><td colspan="7"></td></tr><tr><td class="h">1383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print_comment {</td></tr>
<tr><td class="h">1384</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1384">1</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh, @msgs ) = @_;</td></tr>
<tr><td class="h">1385</td><td colspan="7"></td></tr><tr><td class="h">1386</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1386">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;no_diag;</td></tr>
<tr><td class="h">1387</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1387">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless @msgs;</td></tr>
<tr><td class="h">1388</td><td colspan="7"></td></tr><tr><td class="h">1389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Prevent printing headers when compiling (i.e. -c)</td></tr>
<tr><td class="h">1390</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1390">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $^C;</td></tr>
<tr><td class="h">1391</td><td colspan="7"></td></tr><tr><td class="h">1392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Smash args together like print does.</td></tr>
<tr><td class="h">1393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Convert undef to &#39;undef&#39; so its readable.</td></tr>
<tr><td class="h">1394</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1394">50</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $msg = join &#39;&#39;, map { defined($_) ? $_ : &#39;undef&#39; } @msgs;</td></tr>
<tr><td class="h">1395</td><td colspan="7"></td></tr><tr><td class="h">1396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Escape the beginning, _print will take care of the rest.</td></tr>
<tr><td class="h">1397</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg =~ s/^/# /;</td></tr>
<tr><td class="h">1398</td><td colspan="7"></td></tr><tr><td class="h">1399</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1400</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_print_to_fh( $fh, $msg );</td></tr>
<tr><td class="h">1401</td><td colspan="7"></td></tr><tr><td class="h">1402</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1404</td><td colspan="7"></td></tr><tr><td class="h">1405 - 1418</td><td colspan="6"></td><td class="s"><pre>=item B&lt;explain&gt;

    my @dump = $Test-&gt;explain(@msgs);

Will dump the contents of any references in a human readable format.
Handy for things like...

    is_deeply($have, $want) || diag explain $have;

or

    is_deeply($have, $want) || note explain $have;

=cut</pre></td></tr>
<tr><td class="h">1419</td><td colspan="7"></td></tr><tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub explain {</td></tr>
<tr><td class="h">1421</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1421">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1422</td><td colspan="7"></td></tr><tr><td class="h">1423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map {</td></tr>
<tr><td class="h">1424</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref $_</td></tr>
<tr><td class="h">1425</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1425">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? do {</td></tr>
<tr><td class="h">1426</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1426">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(sub { require Data::Dumper }, die_on_fail =&gt; 1);</td></tr>
<tr><td class="h">1427</td><td colspan="7"></td></tr><tr><td class="h">1428</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dumper = Data::Dumper-&gt;new( [$_] );</td></tr>
<tr><td class="h">1429</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Indent(1)-&gt;Terse(1);</td></tr>
<tr><td class="h">1430</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1430">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Sortkeys(1) if $dumper-&gt;can(&quot;Sortkeys&quot;);</td></tr>
<tr><td class="h">1431</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dumper-&gt;Dump;</td></tr>
<tr><td class="h">1432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $_</td></tr>
<tr><td class="h">1434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} @_;</td></tr>
<tr><td class="h">1435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1436</td><td colspan="7"></td></tr><tr><td class="h">1437 - 1447</td><td colspan="6"></td><td class="s"><pre>=begin _private

=item B&lt;_print&gt;

    $Test-&gt;_print(@msgs);

Prints to the C&lt;output()&gt; filehandle.

=end _private

=cut</pre></td></tr>
<tr><td class="h">1448</td><td colspan="7"></td></tr><tr><td class="h">1449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print {</td></tr>
<tr><td class="h">1450</td><td><div class="c3">1366</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1450">1366</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1451</td><td><div class="c3">1366</div></td><td></td><td></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_print_to_fh( $self-&gt;output, @_ );</td></tr>
<tr><td class="h">1452</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1453</td><td colspan="7"></td></tr><tr><td class="h">1454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _print_to_fh {</td></tr>
<tr><td class="h">1455</td><td><div class="c3">1367</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1455">1367</a></div></td><td></td><td><div>16001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh, @msgs ) = @_;</td></tr>
<tr><td class="h">1456</td><td colspan="7"></td></tr><tr><td class="h">1457</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Prevent printing headers when only compiling.  Mostly for when</td></tr>
<tr><td class="h">1458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# tests are deparsed with B::Deparse</td></tr>
<tr><td class="h">1459</td><td><div class="c3">1367</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1459">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $^C;</td></tr>
<tr><td class="h">1460</td><td colspan="7"></td></tr><tr><td class="h">1461</td><td><div class="c3">1367</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $msg = join &#39;&#39;, @msgs;</td></tr>
<tr><td class="h">1462</td><td colspan="7"></td></tr><tr><td class="h">1463</td><td><div class="c3">1367</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local( $\, $&quot;, $, ) = ( undef, &#39; &#39;, &#39;&#39; );</td></tr>
<tr><td class="h">1464</td><td colspan="7"></td></tr><tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Escape each line after the first with a # so we don&#39;t</td></tr>
<tr><td class="h">1466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# confuse Test::Harness.</td></tr>
<tr><td class="h">1467</td><td><div class="c3">1367</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg =~ s{\n(?!\z)}{\n# }sg;</td></tr>
<tr><td class="h">1468</td><td colspan="7"></td></tr><tr><td class="h">1469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Stick a newline on the end if it needs it.</td></tr>
<tr><td class="h">1470</td><td><div class="c3">1367</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1470">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$msg .= &quot;\n&quot; unless $msg =~ /\n\z/;</td></tr>
<tr><td class="h">1471</td><td colspan="7"></td></tr><tr><td class="h">1472</td><td><div class="c3">1367</div></td><td></td><td></td><td></td><td></td><td><div>428025</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return print $fh $msg;</td></tr>
<tr><td class="h">1473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1474</td><td colspan="7"></td></tr><tr><td class="h">1475 - 1506</td><td colspan="6"></td><td class="s"><pre>=item B&lt;output&gt;

=item B&lt;failure_output&gt;

=item B&lt;todo_output&gt;

    my $filehandle = $Test-&gt;output;
    $Test-&gt;output($filehandle);
    $Test-&gt;output($filename);
    $Test-&gt;output(\$scalar);

These methods control where Test::Builder will print its output.
They take either an open C&lt;$filehandle&gt;, a C&lt;$filename&gt; to open and write to
or a C&lt;$scalar&gt; reference to append to.  It will always return a C&lt;$filehandle&gt;.

B&lt;output&gt; is where normal &quot;ok/not ok&quot; test output goes.

Defaults to STDOUT.

B&lt;failure_output&gt; is where diagnostic output on test failures and
C&lt;diag()&gt; goes.  It is normally not read by Test::Harness and instead is
displayed to the user.

Defaults to STDERR.

C&lt;todo_output&gt; is used instead of C&lt;failure_output()&gt; for the
diagnostics of a failing TODO test.  These will not be seen by the
user.

Defaults to STDOUT.

=cut</pre></td></tr>
<tr><td class="h">1507</td><td colspan="7"></td></tr><tr><td class="h">1508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub output {</td></tr>
<tr><td class="h">1509</td><td><div class="c3">1451</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1509">1451</a></div></td><td><div class="c3">1</div></td><td><div>8001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1510</td><td colspan="7"></td></tr><tr><td class="h">1511</td><td><div class="c3">1451</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1511">100</a></div></td><td></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1512</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Out_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1514</td><td><div class="c3">1451</div></td><td></td><td></td><td></td><td></td><td><div>16002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Out_FH};</td></tr>
<tr><td class="h">1515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1516</td><td colspan="7"></td></tr><tr><td class="h">1517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub failure_output {</td></tr>
<tr><td class="h">1518</td><td><div class="c3">86</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1518">86</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1519</td><td colspan="7"></td></tr><tr><td class="h">1520</td><td><div class="c3">86</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1520">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1521</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Fail_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1523</td><td><div class="c3">86</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Fail_FH};</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1525</td><td colspan="7"></td></tr><tr><td class="h">1526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_output {</td></tr>
<tr><td class="h">1527</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1527">85</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $fh ) = @_;</td></tr>
<tr><td class="h">1528</td><td colspan="7"></td></tr><tr><td class="h">1529</td><td><div class="c3">85</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1529">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $fh ) {</td></tr>
<tr><td class="h">1530</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo_FH} = $self-&gt;_new_fh($fh);</td></tr>
<tr><td class="h">1531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1532</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Todo_FH};</td></tr>
<tr><td class="h">1533</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1534</td><td colspan="7"></td></tr><tr><td class="h">1535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _new_fh {</td></tr>
<tr><td class="h">1536</td><td><div class="c3">255</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1536">255</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1537</td><td><div class="c3">255</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($file_or_fh) = shift;</td></tr>
<tr><td class="h">1538</td><td colspan="7"></td></tr><tr><td class="h">1539</td><td><div class="c3">255</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh;</td></tr>
<tr><td class="h">1540</td><td><div class="c3">255</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1540">50</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1540">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;is_fh($file_or_fh) ) {</td></tr>
<tr><td class="h">1541</td><td><div class="c3">255</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fh = $file_or_fh;</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ref $file_or_fh eq &#39;SCALAR&#39; ) {</td></tr>
<tr><td class="h">1544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Scalar refs as filehandles was added in 5.8.</td></tr>
<tr><td class="h">1545</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1545">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt;= 5.008 ) {</td></tr>
<tr><td class="h">1546</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1546">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open $fh, &quot;&gt;&gt;&quot;, $file_or_fh</td></tr>
<tr><td class="h">1547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t open scalar ref $file_or_fh: $!&quot;);</td></tr>
<tr><td class="h">1548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Emulate scalar ref filehandles with a tie.</td></tr>
<tr><td class="h">1550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1551</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1551">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fh = Test::Builder::IO::Scalar-&gt;new($file_or_fh)</td></tr>
<tr><td class="h">1552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t tie scalar ref $file_or_fh&quot;);</td></tr>
<tr><td class="h">1553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1556</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1556">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;open $fh, &quot;&gt;&quot;, $file_or_fh</td></tr>
<tr><td class="h">1557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or $self-&gt;croak(&quot;Can&#39;t open test output log $file_or_fh: $!&quot;);</td></tr>
<tr><td class="h">1558</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($fh);</td></tr>
<tr><td class="h">1559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1560</td><td colspan="7"></td></tr><tr><td class="h">1561</td><td><div class="c3">255</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $fh;</td></tr>
<tr><td class="h">1562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1563</td><td colspan="7"></td></tr><tr><td class="h">1564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _autoflush {</td></tr>
<tr><td class="h">1565</td><td><div class="c3">340</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1565">340</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($fh) = shift;</td></tr>
<tr><td class="h">1566</td><td><div class="c3">340</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_fh = select $fh;</td></tr>
<tr><td class="h">1567</td><td><div class="c3">340</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$| = 1;</td></tr>
<tr><td class="h">1568</td><td><div class="c3">340</div></td><td></td><td></td><td></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $old_fh;</td></tr>
<tr><td class="h">1569</td><td colspan="7"></td></tr><tr><td class="h">1570</td><td><div class="c3">340</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1571</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1572</td><td colspan="7"></td></tr><tr><td class="h">1573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my( $Testout, $Testerr );</td></tr>
<tr><td class="h">1574</td><td colspan="7"></td></tr><tr><td class="h">1575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dup_stdhandles {</td></tr>
<tr><td class="h">1576</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1576">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1577</td><td colspan="7"></td></tr><tr><td class="h">1578</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_open_testhandles;</td></tr>
<tr><td class="h">1579</td><td colspan="7"></td></tr><tr><td class="h">1580</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Set everything to unbuffered else plain prints to STDOUT will</td></tr>
<tr><td class="h">1581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# come out in the wrong order from our own prints.</td></tr>
<tr><td class="h">1582</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($Testout);</td></tr>
<tr><td class="h">1583</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush( \*STDOUT );</td></tr>
<tr><td class="h">1584</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush($Testerr);</td></tr>
<tr><td class="h">1585</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_autoflush( \*STDERR );</td></tr>
<tr><td class="h">1586</td><td colspan="7"></td></tr><tr><td class="h">1587</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;reset_outputs;</td></tr>
<tr><td class="h">1588</td><td colspan="7"></td></tr><tr><td class="h">1589</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1591</td><td colspan="7"></td></tr><tr><td class="h">1592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _open_testhandles {</td></tr>
<tr><td class="h">1593</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1593">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1594</td><td colspan="7"></td></tr><tr><td class="h">1595</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1595">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if $self-&gt;{Opened_Testhandles};</td></tr>
<tr><td class="h">1596</td><td colspan="7"></td></tr><tr><td class="h">1597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# We dup STDOUT and STDERR so people can change them in their</td></tr>
<tr><td class="h">1598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# test suites while still getting normal test output.</td></tr>
<tr><td class="h">1599</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1599">50</a></div></td><td></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( $Testout, &quot;&gt;&amp;STDOUT&quot; ) or die &quot;Can&#39;t dup STDOUT:  $!&quot;;</td></tr>
<tr><td class="h">1600</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1600">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( $Testerr, &quot;&gt;&amp;STDERR&quot; ) or die &quot;Can&#39;t dup STDERR:  $!&quot;;</td></tr>
<tr><td class="h">1601</td><td colspan="7"></td></tr><tr><td class="h">1602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#    $self-&gt;_copy_io_layers( \*STDOUT, $Testout );</td></tr>
<tr><td class="h">1603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#    $self-&gt;_copy_io_layers( \*STDERR, $Testerr );</td></tr>
<tr><td class="h">1604</td><td colspan="7"></td></tr><tr><td class="h">1605</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Opened_Testhandles} = 1;</td></tr>
<tr><td class="h">1606</td><td colspan="7"></td></tr><tr><td class="h">1607</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1609</td><td colspan="7"></td></tr><tr><td class="h">1610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _copy_io_layers {</td></tr>
<tr><td class="h">1611</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1611">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $src, $dst ) = @_;</td></tr>
<tr><td class="h">1612</td><td colspan="7"></td></tr><tr><td class="h">1613</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_try(</td></tr>
<tr><td class="h">1614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub {</td></tr>
<tr><td class="h">1615</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1615">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require PerlIO;</td></tr>
<tr><td class="h">1616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @src_layers = PerlIO::get_layers($src);</td></tr>
<tr><td class="h">1617</td><td colspan="7"></td></tr><tr><td class="h">1618</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1618">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binmode $dst, join &quot; &quot;, map &quot;:$_&quot;, @src_layers if @src_layers;</td></tr>
<tr><td class="h">1619</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1620</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1621</td><td colspan="7"></td></tr><tr><td class="h">1622</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1623</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1624</td><td colspan="7"></td></tr><tr><td class="h">1625 - 1631</td><td colspan="6"></td><td class="s"><pre>=item reset_outputs

  $tb-&gt;reset_outputs;

Resets all the output filehandles back to their defaults.

=cut</pre></td></tr>
<tr><td class="h">1632</td><td colspan="7"></td></tr><tr><td class="h">1633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub reset_outputs {</td></tr>
<tr><td class="h">1634</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1634">85</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1635</td><td colspan="7"></td></tr><tr><td class="h">1636</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;output        ($Testout);</td></tr>
<tr><td class="h">1637</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;failure_output($Testerr);</td></tr>
<tr><td class="h">1638</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;todo_output   ($Testout);</td></tr>
<tr><td class="h">1639</td><td colspan="7"></td></tr><tr><td class="h">1640</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1642</td><td colspan="7"></td></tr><tr><td class="h">1643 - 1657</td><td colspan="6"></td><td class="s"><pre>=item carp

  $tb-&gt;carp(@message);

Warns with C&lt;@message&gt; but the message will appear to come from the
point where the original test function was called (C&lt;&lt; $tb-&gt;caller &gt;&gt;).

=item croak

  $tb-&gt;croak(@message);

Dies with C&lt;@message&gt; but the message will appear to come from the
point where the original test function was called (C&lt;&lt; $tb-&gt;caller &gt;&gt;).

=cut</pre></td></tr>
<tr><td class="h">1658</td><td colspan="7"></td></tr><tr><td class="h">1659</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _message_at_caller {</td></tr>
<tr><td class="h">1660</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1660">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1661</td><td colspan="7"></td></tr><tr><td class="h">1662</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1663</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $pack, $file, $line ) = $self-&gt;caller;</td></tr>
<tr><td class="h">1664</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join( &quot;&quot;, @_ ) . &quot; at $file line $line.\n&quot;;</td></tr>
<tr><td class="h">1665</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1666</td><td colspan="7"></td></tr><tr><td class="h">1667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub carp {</td></tr>
<tr><td class="h">1668</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1668">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1669</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return warn $self-&gt;_message_at_caller(@_);</td></tr>
<tr><td class="h">1670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1671</td><td colspan="7"></td></tr><tr><td class="h">1672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub croak {</td></tr>
<tr><td class="h">1673</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1673">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1674</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return die $self-&gt;_message_at_caller(@_);</td></tr>
<tr><td class="h">1675</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1676</td><td colspan="7"></td></tr><tr><td class="h">1677</td><td colspan="7"></td></tr><tr><td class="h">1678</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1679</td><td colspan="7"></td></tr><tr><td class="h">1680</td><td colspan="7"></td></tr><tr><td class="h">1681 - 1697</td><td colspan="6"></td><td class="s"><pre>=head2 Test Status and Info

=over 4

=item B&lt;current_test&gt;

    my $curr_test = $Test-&gt;current_test;
    $Test-&gt;current_test($num);

Gets/sets the current test number we&#39;re on.  You usually shouldn&#39;t
have to set this.

If set forward, the details of the missing tests are filled in as &#39;unknown&#39;.
if set backward, the details of the intervening tests are deleted.  You
can erase history if you really want to.

=cut</pre></td></tr>
<tr><td class="h">1698</td><td colspan="7"></td></tr><tr><td class="h">1699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub current_test {</td></tr>
<tr><td class="h">1700</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1700">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $num ) = @_;</td></tr>
<tr><td class="h">1701</td><td colspan="7"></td></tr><tr><td class="h">1702</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;lock( $self-&gt;{Curr_Test} );</td></tr>
<tr><td class="h">1703</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1703">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $num ) {</td></tr>
<tr><td class="h">1704</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Curr_Test} = $num;</td></tr>
<tr><td class="h">1705</td><td colspan="7"></td></tr><tr><td class="h">1706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If the test counter is being pushed forward fill in the details.</td></tr>
<tr><td class="h">1707</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test_results = $self-&gt;{Test_Results};</td></tr>
<tr><td class="h">1708</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1708">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1708">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $num &gt; @$test_results ) {</td></tr>
<tr><td class="h">1709</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1709">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $start = @$test_results ? @$test_results : 0;</td></tr>
<tr><td class="h">1710</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( $start .. $num - 1 ) {</td></tr>
<tr><td class="h">1711</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_results-&gt;[$_] = &amp;share(</td></tr>
<tr><td class="h">1712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1713</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ok&#39;      =&gt; 1,</td></tr>
<tr><td class="h">1714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_ok =&gt; undef,</td></tr>
<tr><td class="h">1715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reason    =&gt; &#39;incrementing test number&#39;,</td></tr>
<tr><td class="h">1716</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type      =&gt; &#39;unknown&#39;,</td></tr>
<tr><td class="h">1717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name      =&gt; undef</td></tr>
<tr><td class="h">1718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1719</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1721</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If backward, wipe history.  Its their funeral.</td></tr>
<tr><td class="h">1723</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num &lt; @$test_results ) {</td></tr>
<tr><td class="h">1724</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$#{$test_results} = $num - 1;</td></tr>
<tr><td class="h">1725</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1727</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">1728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1729</td><td colspan="7"></td></tr><tr><td class="h">1730 - 1739</td><td colspan="6"></td><td class="s"><pre>=item B&lt;summary&gt;

    my @tests = $Test-&gt;summary;

A simple summary of the tests so far.  True for pass, false for fail.
This is a logical pass/fail, so todos are passes.

Of course, test #1 is $tests[0], etc...

=cut</pre></td></tr>
<tr><td class="h">1740</td><td colspan="7"></td></tr><tr><td class="h">1741</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub summary {</td></tr>
<tr><td class="h">1742</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1742">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my($self) = shift;</td></tr>
<tr><td class="h">1743</td><td colspan="7"></td></tr><tr><td class="h">1744</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map { $_-&gt;{&#39;ok&#39;} } @{ $self-&gt;{Test_Results} };</td></tr>
<tr><td class="h">1745</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1746</td><td colspan="7"></td></tr><tr><td class="h">1747 - 1794</td><td colspan="6"></td><td class="s"><pre>=item B&lt;details&gt;

    my @tests = $Test-&gt;details;

Like C&lt;summary()&gt;, but with a lot more detail.

    $tests[$test_num - 1] = 
            { &#39;ok&#39;       =&gt; is the test considered a pass?
              actual_ok  =&gt; did it literally say &#39;ok&#39;?
              name       =&gt; name of the test (if any)
              type       =&gt; type of test (if any, see below).
              reason     =&gt; reason for the above (if any)
            };

&#39;ok&#39; is true if Test::Harness will consider the test to be a pass.

&#39;actual_ok&#39; is a reflection of whether or not the test literally
printed &#39;ok&#39; or &#39;not ok&#39;.  This is for examining the result of &#39;todo&#39;
tests.

&#39;name&#39; is the name of the test.

&#39;type&#39; indicates if it was a special test.  Normal tests have a type
of &#39;&#39;.  Type can be one of the following:

    skip        see skip()
    todo        see todo()
    todo_skip   see todo_skip()
    unknown     see below

Sometimes the Test::Builder test counter is incremented without it
printing any test output, for example, when C&lt;current_test()&gt; is changed.
In these cases, Test::Builder doesn&#39;t know the result of the test, so
its type is &#39;unknown&#39;.  These details for these tests are filled in.
They are considered ok, but the name and actual_ok is left C&lt;undef&gt;.

For example &quot;not ok 23 - hole count # TODO insufficient donuts&quot; would
result in this structure:

    $tests[22] =    # 23 - 1, since arrays start from 0.
      { ok        =&gt; 1,   # logically, the test passed since its todo
        actual_ok =&gt; 0,   # in absolute terms, it failed
        name      =&gt; &#39;hole count&#39;,
        type      =&gt; &#39;todo&#39;,
        reason    =&gt; &#39;insufficient donuts&#39;
      };

=cut</pre></td></tr>
<tr><td class="h">1795</td><td colspan="7"></td></tr><tr><td class="h">1796</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub details {</td></tr>
<tr><td class="h">1797</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1797">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1798</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @{ $self-&gt;{Test_Results} };</td></tr>
<tr><td class="h">1799</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1800</td><td colspan="7"></td></tr><tr><td class="h">1801 - 1823</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo&gt;

    my $todo_reason = $Test-&gt;todo;
    my $todo_reason = $Test-&gt;todo($pack);

If the current tests are considered &quot;TODO&quot; it will return the reason,
if any.  This reason can come from a C&lt;$TODO&gt; variable or the last call
to C&lt;todo_start()&gt;.

Since a TODO test does not need a reason, this function can return an
empty string even when inside a TODO block.  Use C&lt;&lt; $Test-&gt;in_todo &gt;&gt;
to determine if you are currently inside a TODO block.

C&lt;todo()&gt; is about finding the right package to look for C&lt;$TODO&gt; in.  It&#39;s
pretty good at guessing the right package to look at.  It first looks for
the caller based on C&lt;$Level + 1&gt;, since C&lt;todo()&gt; is usually called inside
a test function.  As a last resort it will use C&lt;exported_to()&gt;.

Sometimes there is some confusion about where todo() should be looking
for the C&lt;$TODO&gt; variable.  If you want to be sure, tell it explicitly
what $pack to use.

=cut</pre></td></tr>
<tr><td class="h">1824</td><td colspan="7"></td></tr><tr><td class="h">1825</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo {</td></tr>
<tr><td class="h">1826</td><td><div class="c3">1281</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1826">1281</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack ) = @_;</td></tr>
<tr><td class="h">1827</td><td colspan="7"></td></tr><tr><td class="h">1828</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1828">50</a></div></td><td></td><td></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{Todo} if defined $self-&gt;{Todo};</td></tr>
<tr><td class="h">1829</td><td colspan="7"></td></tr><tr><td class="h">1830</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>12002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1831</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $todo = $self-&gt;find_TODO($pack);</td></tr>
<tr><td class="h">1832</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1832">50</a></div></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $todo if defined $todo;</td></tr>
<tr><td class="h">1833</td><td colspan="7"></td></tr><tr><td class="h">1834</td><td><div class="c3">1281</div></td><td></td><td></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39;;</td></tr>
<tr><td class="h">1835</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1836</td><td colspan="7"></td></tr><tr><td class="h">1837 - 1845</td><td colspan="6"></td><td class="s"><pre>=item B&lt;find_TODO&gt;

    my $todo_reason = $Test-&gt;find_TODO();
    my $todo_reason = $Test-&gt;find_TODO($pack):

Like C&lt;todo()&gt; but only returns the value of C&lt;$TODO&gt; ignoring
C&lt;todo_start()&gt;.

=cut</pre></td></tr>
<tr><td class="h">1846</td><td colspan="7"></td></tr><tr><td class="h">1847</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub find_TODO {</td></tr>
<tr><td class="h">1848</td><td><div class="c3">3844</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1848">3844</a></div></td><td><div class="c3">1</div></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $pack ) = @_;</td></tr>
<tr><td class="h">1849</td><td colspan="7"></td></tr><tr><td class="h">1850</td><td><div class="c3">3844</div></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1850">25</a></div></td><td></td><td></td><td><div>20001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pack = $pack || $self-&gt;caller(1) || $self-&gt;exported_to;</td></tr>
<tr><td class="h">1851</td><td><div class="c3">3844</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1851">50</a></div></td><td></td><td></td><td></td><td><div>20000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless $pack;</td></tr>
<tr><td class="h">1852</td><td colspan="7"></td></tr><tr><td class="h">1853</td><td><div class="c3">85</div><div class="c3">85</div><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1853">85</a></div></td><td></td><td><div>0</div><div>4000</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;    ## no critic</td></tr>
<tr><td class="h">1854</td><td><div class="c3">3844</div><div class="c3">3844</div></td><td></td><td></td><td></td><td></td><td><div>16001</div><div>24002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ${ $pack . &#39;::TODO&#39; };</td></tr>
<tr><td class="h">1855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1856</td><td colspan="7"></td></tr><tr><td class="h">1857 - 1863</td><td colspan="6"></td><td class="s"><pre>=item B&lt;in_todo&gt;

    my $in_todo = $Test-&gt;in_todo;

Returns true if the test is currently inside a TODO block.

=cut</pre></td></tr>
<tr><td class="h">1864</td><td colspan="7"></td></tr><tr><td class="h">1865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub in_todo {</td></tr>
<tr><td class="h">1866</td><td><div class="c3">2563</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1866">2563</a></div></td><td><div class="c3">1</div></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1867</td><td colspan="7"></td></tr><tr><td class="h">1868</td><td><div class="c3">2563</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">1869</td><td><div class="c3">2563</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1869">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1869">33</a></div></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( defined $self-&gt;{Todo} || $self-&gt;find_TODO ) ? 1 : 0;</td></tr>
<tr><td class="h">1870</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1871</td><td colspan="7"></td></tr><tr><td class="h">1872 - 1913</td><td colspan="6"></td><td class="s"><pre>=item B&lt;todo_start&gt;

    $Test-&gt;todo_start();
    $Test-&gt;todo_start($message);

This method allows you declare all subsequent tests as TODO tests, up until
the C&lt;todo_end&gt; method has been called.

The C&lt;TODO:&gt; and C&lt;$TODO&gt; syntax is generally pretty good about figuring out
whether or not we&#39;re in a TODO test.  However, often we find that this is not
possible to determine (such as when we want to use C&lt;$TODO&gt; but
the tests are being executed in other packages which can&#39;t be inferred
beforehand).

Note that you can use this to nest &quot;todo&quot; tests

 $Test-&gt;todo_start(&#39;working on this&#39;);
 # lots of code
 $Test-&gt;todo_start(&#39;working on that&#39;);
 # more code
 $Test-&gt;todo_end;
 $Test-&gt;todo_end;

This is generally not recommended, but large testing systems often have weird
internal needs.

We&#39;ve tried to make this also work with the TODO: syntax, but it&#39;s not
guaranteed and its use is also discouraged:

 TODO: {
     local $TODO = &#39;We have work to do!&#39;;
     $Test-&gt;todo_start(&#39;working on this&#39;);
     # lots of code
     $Test-&gt;todo_start(&#39;working on that&#39;);
     # more code
     $Test-&gt;todo_end;
     $Test-&gt;todo_end;
 }

Pick one style or another of &quot;TODO&quot; to be on the safe side.

=cut</pre></td></tr>
<tr><td class="h">1914</td><td colspan="7"></td></tr><tr><td class="h">1915</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_start {</td></tr>
<tr><td class="h">1916</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1916">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1917</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1917">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $message = @_ ? shift : &#39;&#39;;</td></tr>
<tr><td class="h">1918</td><td colspan="7"></td></tr><tr><td class="h">1919</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo}++;</td></tr>
<tr><td class="h">1920</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1920">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;in_todo ) {</td></tr>
<tr><td class="h">1921</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{ $self-&gt;{Todo_Stack} } =&gt; $self-&gt;todo;</td></tr>
<tr><td class="h">1922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1923</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo} = $message;</td></tr>
<tr><td class="h">1924</td><td colspan="7"></td></tr><tr><td class="h">1925</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1926</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1927</td><td colspan="7"></td></tr><tr><td class="h">1928 - 1935</td><td colspan="6"></td><td class="s"><pre>=item C&lt;todo_end&gt;

 $Test-&gt;todo_end;

Stops running tests as &quot;TODO&quot; tests.  This method is fatal if called without a
preceding C&lt;todo_start&gt; method call.

=cut</pre></td></tr>
<tr><td class="h">1936</td><td colspan="7"></td></tr><tr><td class="h">1937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub todo_end {</td></tr>
<tr><td class="h">1938</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1938">0</a></div></td><td><div class="c3">1</div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1939</td><td colspan="7"></td></tr><tr><td class="h">1940</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1940">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Start_Todo} ) {</td></tr>
<tr><td class="h">1941</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&#39;todo_end() called without todo_start()&#39;);</td></tr>
<tr><td class="h">1942</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1943</td><td colspan="7"></td></tr><tr><td class="h">1944</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Start_Todo}--;</td></tr>
<tr><td class="h">1945</td><td colspan="7"></td></tr><tr><td class="h">1946</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1946">0</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1946">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Start_Todo} &amp;&amp; @{ $self-&gt;{Todo_Stack} } ) {</td></tr>
<tr><td class="h">1947</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Todo} = pop @{ $self-&gt;{Todo_Stack} };</td></tr>
<tr><td class="h">1948</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1949</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1950</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;{Todo};</td></tr>
<tr><td class="h">1951</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1952</td><td colspan="7"></td></tr><tr><td class="h">1953</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1955</td><td colspan="7"></td></tr><tr><td class="h">1956 - 1968</td><td colspan="6"></td><td class="s"><pre>=item B&lt;caller&gt;

    my $package = $Test-&gt;caller;
    my($pack, $file, $line) = $Test-&gt;caller;
    my($pack, $file, $line) = $Test-&gt;caller($height);

Like the normal C&lt;caller()&gt;, except it reports according to your C&lt;level()&gt;.

C&lt;$height&gt; will be added to the C&lt;level()&gt;.

If C&lt;caller()&gt; winds up off the top of the stack it report the highest context.

=cut</pre></td></tr>
<tr><td class="h">1969</td><td colspan="7"></td></tr><tr><td class="h">1970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub caller {    ## no critic (Subroutines::ProhibitBuiltinHomonyms)</td></tr>
<tr><td class="h">1971</td><td><div class="c3">4491</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L1971">4491</a></div></td><td><div class="c3">1</div></td><td><div>20000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $height ) = @_;</td></tr>
<tr><td class="h">1972</td><td><div class="c3">4491</div></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L1972">100</a></div></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$height ||= 0;</td></tr>
<tr><td class="h">1973</td><td colspan="7"></td></tr><tr><td class="h">1974</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $level = $self-&gt;level + $height + 1;</td></tr>
<tr><td class="h">1975</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>12001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @caller;</td></tr>
<tr><td class="h">1976</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>16000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do {</td></tr>
<tr><td class="h">1977</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>48003</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@caller = CORE::caller( $level );</td></tr>
<tr><td class="h">1978</td><td><div class="c3">4491</div></td><td></td><td></td><td></td><td></td><td><div>40002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level--;</td></tr>
<tr><td class="h">1979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} until @caller;</td></tr>
<tr><td class="h">1980</td><td><div class="c3">4491</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L1980">100</a></div></td><td></td><td></td><td></td><td><div>80003</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray ? @caller : $caller[0];</td></tr>
<tr><td class="h">1981</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1982</td><td colspan="7"></td></tr><tr><td class="h">1983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1984</td><td colspan="7"></td></tr><tr><td class="h">1985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">1986</td><td colspan="7"></td></tr><tr><td class="h">1987 - 1999</td><td colspan="6"></td><td class="s"><pre>=begin _private

=over 4

=item B&lt;_sanity_check&gt;

  $self-&gt;_sanity_check();

Runs a bunch of end of test sanity checks to make sure reality came
through ok.  If anything is wrong it will die with a fairly friendly
error message.

=cut</pre></td></tr>
<tr><td class="h">2000</td><td colspan="7"></td></tr><tr><td class="h">2001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#&#39;#</td></tr>
<tr><td class="h">2002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _sanity_check {</td></tr>
<tr><td class="h">2003</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L2003">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2004</td><td colspan="7"></td></tr><tr><td class="h">2005</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( $self-&gt;{Curr_Test} &lt; 0, &#39;Says here you ran a negative number of tests!&#39; );</td></tr>
<tr><td class="h">2006</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( $self-&gt;{Curr_Test} != @{ $self-&gt;{Test_Results} },</td></tr>
<tr><td class="h">2007</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Somehow you got a different number of results than tests ran!&#39; );</td></tr>
<tr><td class="h">2008</td><td colspan="7"></td></tr><tr><td class="h">2009</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2010</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2011</td><td colspan="7"></td></tr><tr><td class="h">2012 - 2020</td><td colspan="6"></td><td class="s"><pre>=item B&lt;_whoa&gt;

  $self-&gt;_whoa($check, $description);

A sanity check, similar to C&lt;assert()&gt;.  If the C&lt;$check&gt; is true, something
has gone horribly wrong.  It will die with the given C&lt;$description&gt; and
a note to contact the author.

=cut</pre></td></tr>
<tr><td class="h">2021</td><td colspan="7"></td></tr><tr><td class="h">2022</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _whoa {</td></tr>
<tr><td class="h">2023</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L2023">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $self, $check, $desc ) = @_;</td></tr>
<tr><td class="h">2024</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2024">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($check) {</td></tr>
<tr><td class="h">2025</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $Level = $Level + 1;</td></tr>
<tr><td class="h">2026</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;croak(&lt;&lt;&quot;WHOA&quot;);</td></tr>
<tr><td class="h">2027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA!  $desc</td></tr>
<tr><td class="h">2028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">This should never happen!  Please contact the author immediately!</td></tr>
<tr><td class="h">2029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">WHOA</td></tr>
<tr><td class="h">2030</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2031</td><td colspan="7"></td></tr><tr><td class="h">2032</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2034</td><td colspan="7"></td></tr><tr><td class="h">2035 - 2044</td><td colspan="6"></td><td class="s"><pre>=item B&lt;_my_exit&gt;

  _my_exit($exit_num);

Perl seems to have some trouble with exiting inside an C&lt;END&gt; block.  5.005_03
and 5.6.1 both seem to do odd things.  Instead, this function edits C&lt;$?&gt;
directly.  It should B&lt;only&gt; be called from inside an C&lt;END&gt; block.  It
doesn&#39;t actually exit, that&#39;s your job.

=cut</pre></td></tr>
<tr><td class="h">2045</td><td colspan="7"></td></tr><tr><td class="h">2046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _my_exit {</td></tr>
<tr><td class="h">2047</td><td><div class="c3">45</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L2047">45</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$? = $_[0];    ## no critic (Variables::RequireLocalizedPunctuationVars)</td></tr>
<tr><td class="h">2048</td><td colspan="7"></td></tr><tr><td class="h">2049</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>4001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">2050</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2051</td><td colspan="7"></td></tr><tr><td class="h">2052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">2053</td><td colspan="7"></td></tr><tr><td class="h">2054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=end _private</td></tr>
<tr><td class="h">2055</td><td colspan="7"></td></tr><tr><td class="h">2056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">2057</td><td colspan="7"></td></tr><tr><td class="h">2058</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ending {</td></tr>
<tr><td class="h">2059</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--subroutine.html#L2059">85</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">2060</td><td colspan="7"></td></tr><tr><td class="h">2061</td><td><div class="c3">85</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $real_exit_code = $?;</td></tr>
<tr><td class="h">2062</td><td colspan="7"></td></tr><tr><td class="h">2063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t bother with an ending if this is a forked copy.  Only the parent</td></tr>
<tr><td class="h">2064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# should do the ending.</td></tr>
<tr><td class="h">2065</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2065">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Original_Pid} != $$ ) {</td></tr>
<tr><td class="h">2066</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2067</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2068</td><td colspan="7"></td></tr><tr><td class="h">2069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Ran tests but never declared a plan or hit done_testing</td></tr>
<tr><td class="h">2070</td><td><div class="c3">85</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2070">50</a></div></td><td><div class="c0"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--condition.html#L2070">67</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Have_Plan} and $self-&gt;{Curr_Test} ) {</td></tr>
<tr><td class="h">2071</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;Tests were run but no plan was declared and done_testing() was not seen.&quot;);</td></tr>
<tr><td class="h">2072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2073</td><td colspan="7"></td></tr><tr><td class="h">2074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Exit if plan() was never called.  This is so &quot;require Test::Simple&quot;</td></tr>
<tr><td class="h">2075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# doesn&#39;t puke.</td></tr>
<tr><td class="h">2076</td><td><div class="c3">85</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2076">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$self-&gt;{Have_Plan} ) {</td></tr>
<tr><td class="h">2077</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>4000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2079</td><td colspan="7"></td></tr><tr><td class="h">2080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Don&#39;t do an ending if we bailed out.</td></tr>
<tr><td class="h">2081</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2081">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{Bailed_Out} ) {</td></tr>
<tr><td class="h">2082</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2084</td><td colspan="7"></td></tr><tr><td class="h">2085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Figure out if we passed or failed and print helpful messages.</td></tr>
<tr><td class="h">2086</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_results = $self-&gt;{Test_Results};</td></tr>
<tr><td class="h">2087</td><td><div class="c3">45</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2087">50</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2087">0</a></div><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2087">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(@$test_results) {</td></tr>
<tr><td class="h">2088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# The plan?  We have no plan.</td></tr>
<tr><td class="h">2089</td><td><div class="c3">45</div></td><td><div class="c3" title="T/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2089">100</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{No_Plan} ) {</td></tr>
<tr><td class="h">2090</td><td><div class="c3">28</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2090">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_output_plan($self-&gt;{Curr_Test}) unless $self-&gt;no_header;</td></tr>
<tr><td class="h">2091</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Expected_Tests} = $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">2092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2093</td><td colspan="7"></td></tr><tr><td class="h">2094</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Auto-extended arrays and elements which aren&#39;t explicitly</td></tr>
<tr><td class="h">2095</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# filled in with a shared reference will puke under 5.8.0</td></tr>
<tr><td class="h">2096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ithreads.  So we have to fill them in by hand. :(</td></tr>
<tr><td class="h">2097</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $empty_result = &amp;share( {} );</td></tr>
<tr><td class="h">2098</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $idx ( 0 .. $self-&gt;{Expected_Tests} - 1 ) {</td></tr>
<tr><td class="h">2099</td><td><div class="c3">1281</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2099">50</a></div></td><td></td><td></td><td></td><td><div>8000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test_results-&gt;[$idx] = $empty_result</td></tr>
<tr><td class="h">2100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless defined $test_results-&gt;[$idx];</td></tr>
<tr><td class="h">2101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2102</td><td colspan="7"></td></tr><tr><td class="h">2103</td><td><div class="c3">45</div><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_failed = grep !$_-&gt;{&#39;ok&#39;}, @{$test_results}[ 0 .. $self-&gt;{Curr_Test} - 1 ];</td></tr>
<tr><td class="h">2104</td><td colspan="7"></td></tr><tr><td class="h">2105</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_extra = $self-&gt;{Curr_Test} - $self-&gt;{Expected_Tests};</td></tr>
<tr><td class="h">2106</td><td colspan="7"></td></tr><tr><td class="h">2107</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2107">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $num_extra != 0 ) {</td></tr>
<tr><td class="h">2108</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2108">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s = $self-&gt;{Expected_Tests} == 1 ? &#39;&#39; : &#39;s&#39;;</td></tr>
<tr><td class="h">2109</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2110</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like you planned $self-&gt;{Expected_Tests} test$s but ran $self-&gt;{Curr_Test}.</td></tr>
<tr><td class="h">2111</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2113</td><td colspan="7"></td></tr><tr><td class="h">2114</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2114">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($num_failed) {</td></tr>
<tr><td class="h">2115</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $num_tests = $self-&gt;{Curr_Test};</td></tr>
<tr><td class="h">2116</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2116">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s = $num_failed == 1 ? &#39;&#39; : &#39;s&#39;;</td></tr>
<tr><td class="h">2117</td><td colspan="7"></td></tr><tr><td class="h">2118</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2118">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $qualifier = $num_extra == 0 ? &#39;&#39; : &#39; run&#39;;</td></tr>
<tr><td class="h">2119</td><td colspan="7"></td></tr><tr><td class="h">2120</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like you failed $num_failed test$s of $num_tests$qualifier.</td></tr>
<tr><td class="h">2122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2123</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2124</td><td colspan="7"></td></tr><tr><td class="h">2125</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2125">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($real_exit_code) {</td></tr>
<tr><td class="h">2126</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like your test exited with $real_exit_code just after $self-&gt;{Curr_Test}.</td></tr>
<tr><td class="h">2128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2129</td><td colspan="7"></td></tr><tr><td class="h">2130</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2130">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($real_exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2132</td><td colspan="7"></td></tr><tr><td class="h">2133</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $exit_code;</td></tr>
<tr><td class="h">2134</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2134">50</a></div><div class="c0" title="-/F"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2134">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($num_failed) {</td></tr>
<tr><td class="h">2135</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2135">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = $num_failed &lt;= 254 ? $num_failed : 254;</td></tr>
<tr><td class="h">2136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num_extra != 0 ) {</td></tr>
<tr><td class="h">2138</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = 255;</td></tr>
<tr><td class="h">2139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">2141</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exit_code = 0;</td></tr>
<tr><td class="h">2142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2143</td><td colspan="7"></td></tr><tr><td class="h">2144</td><td><div class="c3">45</div></td><td><div class="c0" title="T/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2144">50</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $self-&gt;{Skip_All} ) {</td></tr>
<tr><td class="h">2147</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2147">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit(0) &amp;&amp; return;</td></tr>
<tr><td class="h">2148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif($real_exit_code) {</td></tr>
<tr><td class="h">2150</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&lt;&lt;&quot;FAIL&quot;);</td></tr>
<tr><td class="h">2151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Looks like your test exited with $real_exit_code before it could output anything.</td></tr>
<tr><td class="h">2152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">FAIL</td></tr>
<tr><td class="h">2153</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2153">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit($real_exit_code) &amp;&amp; return;</td></tr>
<tr><td class="h">2154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">2156</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;diag(&quot;No tests run!\n&quot;);</td></tr>
<tr><td class="h">2157</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="-usr-local-share-perl-5-8-8-Test-Builder-pm--branch.html#L2157">0</a></div></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_my_exit(255) &amp;&amp; return;</td></tr>
<tr><td class="h">2158</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2159</td><td colspan="7"></td></tr><tr><td class="h">2160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_whoa( 1, &quot;We fell off the end of _ending()&quot; );</td></tr>
<tr><td class="h">2161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2162</td><td colspan="7"></td></tr><tr><td class="h">2163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">END {</td></tr>
<tr><td class="h">2164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Test-&gt;_ending if defined $Test and !$Test-&gt;no_ending;</td></tr>
<tr><td class="h">2165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">2166</td><td colspan="7"></td></tr><tr><td class="h">2167 - 2236</td><td colspan="6"></td><td class="s"><pre>=head1 EXIT CODES

If all your tests passed, Test::Builder will exit with zero (which is
normal).  If anything failed it will exit with how many failed.  If
you run less (or more) tests than you planned, the missing (or extras)
will be considered failures.  If no tests were ever run Test::Builder
will throw a warning and exit with 255.  If the test died, even after
having successfully completed all its tests, it will still be
considered a failure and will exit with 255.

So the exit codes are...

    0                   all tests successful
    255                 test died or all passed but wrong # of tests run
    any other number    how many failed (including missing or extras)

If you fail more than 254 tests, it will be reported as 254.

=head1 THREADS

In perl 5.8.1 and later, Test::Builder is thread-safe.  The test
number is shared amongst all threads.  This means if one thread sets
the test number using C&lt;current_test()&gt; they will all be effected.

While versions earlier than 5.8.1 had threads they contain too many
bugs to support.

Test::Builder is only thread-aware if threads.pm is loaded I&lt;before&gt;
Test::Builder.

=head1 MEMORY

An informative hash, accessable via C&lt;&lt;details()&gt;&gt;, is stored for each
test you perform.  So memory usage will scale linearly with each test
run. Although this is not a problem for most test suites, it can
become an issue if you do large (hundred thousands to million)
combinatorics tests in the same run.

In such cases, you are advised to either split the test file into smaller
ones, or use a reverse approach, doing &quot;normal&quot; (code) compares and
triggering fail() should anything go unexpected.

Future versions of Test::Builder will have a way to turn history off.


=head1 EXAMPLES

CPAN can provide the best examples.  Test::Simple, Test::More,
Test::Exception and Test::Differences all use Test::Builder.

=head1 SEE ALSO

Test::Simple, Test::More, Test::Harness

=head1 AUTHORS

Original code by chromatic, maintained by Michael G Schwern
E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt;

=head1 COPYRIGHT

Copyright 2002-2008 by chromatic E&lt;lt&gt;chromatic@wgz.orgE&lt;gt&gt; and
                       Michael G Schwern E&lt;lt&gt;schwern@pobox.comE&lt;gt&gt;.

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

See F&lt;http://www.perl.com/perl/misc/Artistic.html&gt;

=cut</pre></td></tr>
<tr><td class="h">2237</td><td colspan="7"></td></tr><tr><td class="h">2238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">2239</td><td colspan="7"></td></tr></table>
</body>
</html>
