<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.61
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>Branch Coverage: cgi-bin/cleanhtml.pl</title>
</head>
<body>
<h1>Branch Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">cgi-bin/cleanhtml.pl</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c0">49.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>%</th><th colspan="2">coverage</th><th>branch</th></tr>
<tr><td class="h"><a id="L100">100</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless defined $$data</td></tr>
<tr><td class="h"><a id="L127">127</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$opts{&#39;blocked_links&#39;} ? :</td></tr>
<tr><td class="h"><a id="L128">128</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$LJ::BLOCKED_LINK_SUBSTITUTE ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$opts{&#39;blocked_link_substitute&#39;} ? :</td></tr>
<tr><td class="h"><a id="L139">139</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $$opts{&#39;eat&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L142">142</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;allow&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L145">145</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;deny&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L148">148</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;remove&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L155">155</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_sizes)</td></tr>
<tr><td class="h"><a id="L162">162</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L169">169</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;cleancss&#39;})</td></tr>
<tr><td class="h"><a id="L174">174</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;nocss&#39;})</td></tr>
<tr><td class="h"><a id="L178">178</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (ref $$opts{&#39;attrstrip&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L201">201</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $addbreaks</td></tr>
<tr><td class="h"><a id="L225">225</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L260">260</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if defined $tag_substitute{$$token[1]} and $type eq &#39;S&#39; || $type eq &#39;E&#39;</td></tr>
<tr><td class="h"><a id="L263">263</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($type eq &#39;S&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($type eq &#39;E&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($type eq &#39;D&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;T&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;C&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;PI&#39;) { }</td></tr>
<tr><td class="h"><a id="L270">270</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L271">271</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L272">272</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq $eatuntil[-1])</td></tr>
<tr><td class="h"><a id="L278">278</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-template&#39; and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L285">285</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$override_capture ? :</td></tr>
<tr><td class="h"><a id="L286">286</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$name =~ /^\w+$/ ? :</td></tr>
<tr><td class="h"><a id="L290">290</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$attr{&#39;/&#39;}) { }</td></tr>
<tr><td class="h"><a id="L301">301</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;object&#39; or $tag eq &#39;embed&#39;)</td></tr>
<tr><td class="h"><a id="L302">302</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (LJ::are_hooks(&#39;transform_embed&#39;) and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L305">305</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$attr{&#39;/&#39;})</td></tr>
<tr><td class="h"><a id="L320">320</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;span&#39; and lc $$attr{&#39;class&#39;} eq &#39;ljuser&#39; and not $noexpand_embedded)</td></tr>
<tr><td class="h"><a id="L325">325</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L329">329</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;div&#39; || $tag eq &#39;span&#39; and lc $$attr{&#39;class&#39;} eq &#39;ljvideo&#39;)</td></tr>
<tr><td class="h"><a id="L339">339</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag =~ m[(?:\@|://)])</td></tr>
<tr><td class="h"><a id="L344">344</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$form_tag{$tag})</td></tr>
<tr><td class="h"><a id="L345">345</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not $opencount{&#39;form&#39;})</td></tr>
<tr><td class="h"><a id="L350">350</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;input&#39;)</td></tr>
<tr><td class="h"><a id="L351">351</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (not $$attr{&#39;type&#39;} =~ /^\w+$/ or lc $$attr{&#39;type&#39;} eq &#39;password&#39;)</td></tr>
<tr><td class="h"><a id="L359">359</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $tag =~ s[/$][]</td></tr>
<tr><td class="h"><a id="L361">361</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless ($tag =~ /^\w([\w\-:_]*\w)?$/)</td></tr>
<tr><td class="h"><a id="L371">371</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($action{$tag} eq &#39;eat&#39;)</td></tr>
<tr><td class="h"><a id="L385">385</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless my $code = $htmlcleaner-&gt;can($meth)</td></tr>
<tr><td class="h"><a id="L389">389</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if not $@ and not $clean_res</td></tr>
<tr><td class="h"><a id="L393">393</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($ljuser_div)</td></tr>
<tr><td class="h"><a id="L403">403</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($ljcut_div and $ljcut_disable)</td></tr>
<tr><td class="h"><a id="L414">414</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-cut&#39; or $ljcut_div) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;style&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj-raw&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag =~ /:set$/) { }</td></tr>
<tr><td class="h"><a id="L415">415</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $ljcut_disable</td></tr>
<tr><td class="h"><a id="L419">419</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$attr{&#39;text&#39;})</td></tr>
<tr><td class="h"><a id="L421">421</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($text =~ /[^\x01-\x7f]/)</td></tr>
<tr><td class="h"><a id="L429">429</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($cut) { }</td></tr>
<tr><td class="h"><a id="L432">432</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag eq &#39;div&#39;</td></tr>
<tr><td class="h"><a id="L434">434</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag eq &#39;div&#39;</td></tr>
<tr><td class="h"><a id="L435">435</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$opts{&#39;cutpreview&#39;})</td></tr>
<tr><td class="h"><a id="L440">440</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless $$opts{&#39;textonly&#39;}</td></tr>
<tr><td class="h"><a id="L441">441</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;div&#39; and not $$opts{&#39;textonly&#39;})</td></tr>
<tr><td class="h"><a id="L452">452</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (LJ::is_enabled(&#39;css_cleaner&#39;))</td></tr>
<tr><td class="h"><a id="L456">456</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($LJ::IS_DEV_SERVER)</td></tr>
<tr><td class="h"><a id="L467">467</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">exists $$attr{&#39;comm&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">exists $$attr{&#39;user&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">exists $$attr{&#39;name&#39;} ? :</td></tr>
<tr><td class="h"><a id="L473">473</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $site = $$attr{&#39;site&#39;} and $$attr{&#39;site&#39;} ne $LJ::DOMAIN) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">elsif (length $user) { }</td></tr>
<tr><td class="h"><a id="L476">476</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $ext_u = &#39;DW::External::User&#39;-&gt;new(&#39;user&#39;, $user, &#39;site&#39;, $site)) { }</td></tr>
<tr><td class="h"><a id="L479">479</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L496">496</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (my $u = LJ::load_user_or_identity($user)) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif (my $username = LJ::canonical_username($user)) { }</td></tr>
<tr><td class="h"><a id="L497">497</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L529">529</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if delete $$hash{&#39;/&#39;}</td></tr>
<tr><td class="h"><a id="L533">533</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if lc $tag eq &#39;lj-embed&#39; and lc $_ eq &#39;id&#39;</td></tr>
<tr><td class="h"><a id="L537">537</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;form&#39;)</td></tr>
<tr><td class="h"><a id="L540">540</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($action =~ m[^https?://?([^/]+)]) { }</td></tr>
<tr><td class="h"><a id="L542">542</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $host =~ /[%\@\s]/ or $LJ::FORM_DOMAIN_BANNED{$host}</td></tr>
<tr><td class="h"><a id="L548">548</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if $deny</td></tr>
<tr><td class="h"><a id="L554">554</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr =~ /^(?:on|dynsrc)/)</td></tr>
<tr><td class="h"><a id="L559">559</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;data&#39;)</td></tr>
<tr><td class="h"><a id="L560">560</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $tag eq &#39;object&#39;</td></tr>
<tr><td class="h"><a id="L564">564</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;href&#39; and $$hash{$attr} =~ /^data/)</td></tr>
<tr><td class="h"><a id="L569">569</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr =~ /(?:^=)|[\x0b\x0d]/)</td></tr>
<tr><td class="h"><a id="L579">579</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ($attr =~ /^[\w_:-]+$/)</td></tr>
<tr><td class="h"><a id="L580">580</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">%$hash &gt; 1 ? :</td></tr>
<tr><td class="h"><a id="L592">592</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($nowhite =~ /(?:jscript|livescript|javascript|vbscript|about):/xi)</td></tr>
<tr><td class="h"><a id="L597">597</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;style&#39;)</td></tr>
<tr><td class="h"><a id="L598">598</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;cleancss&#39;})</td></tr>
<tr><td class="h"><a id="L606">606</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$hash{&#39;style&#39;} =~ /\Q$css\E/i)</td></tr>
<tr><td class="h"><a id="L612">612</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L613">613</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$hash{&#39;style&#39;} =~ /-moz-|absolute|relative|outline|z-index|(?&lt;!-)(?:top|left|right|bottom)\s*:|filter|-webkit-/io)</td></tr>
<tr><td class="h"><a id="L620">620</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_colors)</td></tr>
<tr><td class="h"><a id="L623">623</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_sizes)</td></tr>
<tr><td class="h"><a id="L626">626</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_fonts)</td></tr>
<tr><td class="h"><a id="L629">629</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($remove_positioning)</td></tr>
<tr><td class="h"><a id="L635">635</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;clean_js_css&#39;} and LJ::is_enabled(&#39;css_cleaner&#39;))</td></tr>
<tr><td class="h"><a id="L642">642</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;class&#39; || $attr eq &#39;id&#39; and $$opts{&#39;strongcleancss&#39;})</td></tr>
<tr><td class="h"><a id="L648">648</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($attr eq &#39;id&#39; and $$hash{$attr} =~ /^ljs_/i)</td></tr>
<tr><td class="h"><a id="L654">654</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($remove_colors and $attr eq &#39;color&#39; || $attr eq &#39;bgcolor&#39; || $attr eq &#39;fgcolor&#39; || $attr eq &#39;text&#39; or $remove_sizes and $attr eq &#39;size&#39; or $remove_fonts and $attr eq &#39;face&#39;)</td></tr>
<tr><td class="h"><a id="L661">661</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (exists $$hash{&#39;href&#39;})</td></tr>
<tr><td class="h"><a id="L664">664</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($blocked_links)</td></tr>
<tr><td class="h"><a id="L666">666</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$hash{&#39;href&#39;} =~ /$re/)</td></tr>
<tr><td class="h"><a id="L673">673</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($$hash{&#39;href&#39;} =~ s[^(?:lj|site):(?://)?(.*)$][ExpandLJURL($1);]ie)</td></tr>
<tr><td class="h"><a id="L678">678</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;img&#39;)</td></tr>
<tr><td class="h"><a id="L682">682</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $$opts{&#39;maximgwidth&#39;} and $$hash{&#39;width&#39;} &gt; $$opts{&#39;maximgwidth&#39;})</td></tr>
<tr><td class="h"><a id="L684">684</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (defined $$opts{&#39;maximgheight&#39;} and $$hash{&#39;height&#39;} &gt; $$opts{&#39;maximgheight&#39;})</td></tr>
<tr><td class="h"><a id="L686">686</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not defined $$hash{&#39;width&#39;} or not defined $$hash{&#39;height&#39;})</td></tr>
<tr><td class="h"><a id="L688">688</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;extractimages&#39;})</td></tr>
<tr><td class="h"><a id="L692">692</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($img_bad)</td></tr>
<tr><td class="h"><a id="L701">701</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;a&#39; and $extractlinks)</td></tr>
<tr><td class="h"><a id="L717">717</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;xsl:attribute&#39;)</td></tr>
<tr><td class="h"><a id="L727">727</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($value =~ /(javascript|vbscript)/i) { }</td></tr>
<tr><td class="h"><a id="L741">741</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">unless ($alt_output)</td></tr>
<tr><td class="h"><a id="L744">744</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($mode eq &#39;allow&#39;) { }</td></tr>
<tr><td class="h"><a id="L746">746</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($action{$tag} eq &#39;deny&#39;)</td></tr>
<tr><td class="h"><a id="L749">749</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($action{$tag} eq &#39;allow&#39;)</td></tr>
<tr><td class="h"><a id="L752">752</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $remove{$tag})</td></tr>
<tr><td class="h"><a id="L754">754</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L765">765</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:tbody|thead|tfoot|tr|td|th|caption|colgroup|col)$/ and not @tablescope or $tag =~ /^(?:td|th)$/ and not $tablescope[-1]{&#39;tr&#39;} or $tag eq &#39;table&#39; and @tablescope and not grep {$tablescope[-1]{$_};} &#39;td&#39;, &#39;th&#39;</td></tr>
<tr><td class="h"><a id="L768">768</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow) { }</td></tr>
<tr><td class="h"><a id="L774">774</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless (LJ::is_ascii($$hash{$_}))</td></tr>
<tr><td class="h"><a id="L783">783</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if exists $$hash{$_}</td></tr>
<tr><td class="h"><a id="L790">790</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($slashclose and $tag =~ /$slashclose_tags/)</td></tr>
<tr><td class="h"><a id="L793">793</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $$opts{&#39;tablecheck&#39;} and @tablescope</td></tr>
<tr><td class="h"><a id="L795">795</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow) { }</td></tr>
<tr><td class="h"><a id="L800">800</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L803">803</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;table&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif (@tablescope) { }</td></tr>
<tr><td class="h"><a id="L822">822</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $tag =~ /[^\w\-:]/</td></tr>
<tr><td class="h"><a id="L824">824</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L825">825</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L827">827</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($eatuntil[-1] eq $tag)</td></tr>
<tr><td class="h"><a id="L829">829</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (my $cb = $capturing_during_eat)</td></tr>
<tr><td class="h"><a id="L836">836</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if @eatuntil</td></tr>
<tr><td class="h"><a id="L839">839</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L840">840</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($tag eq &#39;span&#39;)</td></tr>
<tr><td class="h"><a id="L843">843</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($$opts{&#39;textonly&#39;}) { }</td></tr>
<tr><td class="h"><a id="L854">854</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;lj-raw&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">elsif ($tag eq &#39;lj-cut&#39;) { }</td></tr>
<tr><td class="h"><a id="L856">856</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $$opts{&#39;tablecheck&#39;} and @tablescope</td></tr>
<tr><td class="h"><a id="L859">859</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;cutpreview&#39;})</td></tr>
<tr><td class="h"><a id="L863">863</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($mode eq &#39;allow&#39;) { }</td></tr>
<tr><td class="h"><a id="L865">865</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($action{$tag} eq &#39;deny&#39;)</td></tr>
<tr><td class="h"><a id="L868">868</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($action{$tag} eq &#39;allow&#39;)</td></tr>
<tr><td class="h"><a id="L871">871</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($extractlinks and $tag eq &#39;a&#39;)</td></tr>
<tr><td class="h"><a id="L872">872</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (@canonical_urls)</td></tr>
<tr><td class="h"><a id="L879">879</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $remove{$tag})</td></tr>
<tr><td class="h"><a id="L882">882</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L884">884</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:table|tbody|thead|tfoot|tr|td|th|caption|colgroup|col)$/ and not @tablescope or $tag =~ /^(?:td|th)$/ and not $tablescope[-1]{&#39;tr&#39;}</td></tr>
<tr><td class="h"><a id="L893">893</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($allow and not $$opts{&#39;noearlyclose&#39;} &amp;&amp; !$opencount{$tag}) { }</td></tr>
<tr><td class="h"><a id="L896">896</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($$opts{&#39;tablecheck&#39;})</td></tr>
<tr><td class="h"><a id="L899">899</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($tag eq &#39;table&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">elsif (@tablescope) { }</td></tr>
<tr><td class="h"><a id="L927">927</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if (@eatuntil)</td></tr>
<tr><td class="h"><a id="L928">928</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if $capturing_during_eat</td></tr>
<tr><td class="h"><a id="L932">932</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($eating_ljuser_span)</td></tr>
<tr><td class="h"><a id="L942">942</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($auto_format and not $noautolinks and not $opencount{&#39;a&#39;} and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L945">945</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($str =~ /^(.*?)(&amp;(#39|quot|lt|gt)(;.*)?)$/) { }</td></tr>
<tr><td class="h"><a id="L963">963</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if ($wordlength and not $opencount{&#39;pre&#39;} and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L968">968</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($auto_format and not $opencount{&#39;textarea&#39;})</td></tr>
<tr><td class="h"><a id="L970">970</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (not $opencount{&#39;a&#39;})</td></tr>
<tr><td class="h"><a id="L982">982</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($$token[1] =~ /^&lt;[^!]/) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($keepcomments) { }</td></tr>
<tr><td class="h"><a id="L1007">1007</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($extractlinks and @canonical_urls)</td></tr>
<tr><td class="h"><a id="L1018">1018</a></td><td class="c0">50</td><td class="c3">T</td><td class="c0">F</td><td class="s">if (ref $$opts{&#39;autoclose&#39;} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h"><a id="L1020">1020</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $tag =~ /^(?:tr|td|th|tbody|thead|tfoot|li)$/</td></tr>
<tr><td class="h"><a id="L1021">1021</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if ($opencount{$tag})</td></tr>
<tr><td class="h"><a id="L1031">1031</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">if $extra_text</td></tr>
<tr><td class="h"><a id="L1033">1033</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($suspend_msg)</td></tr>
<tr><td class="h"><a id="L1037">1037</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($unsuspend_supportid) { }</td></tr>
<tr><td class="h"><a id="L1077">1077</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($type eq &#39;S&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;E&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;D&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;T&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;C&#39;) { }</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">elsif ($type eq &#39;PI&#39;) { }</td></tr>
<tr><td class="h"><a id="L1085">1085</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (my $relats = $$rel_source{$tag})</td></tr>
<tr><td class="h"><a id="L1087">1087</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless defined $$hash{$k} and not $$hash{$k} =~ /^[a-z]+:/</td></tr>
<tr><td class="h"><a id="L1097">1097</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ($did_mod)</td></tr>
<tr><td class="h"><a id="L1106">1106</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $tag =~ s[/$][]</td></tr>
<tr><td class="h"><a id="L1107">1107</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if delete $$hash{&#39;/&#39;}</td></tr>
<tr><td class="h"><a id="L1113">1113</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if exists $$hash{$_}</td></tr>
<tr><td class="h"><a id="L1116">1116</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $slashclose</td></tr>
<tr><td class="h"><a id="L1136">1136</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $global_did_mod</td></tr>
<tr><td class="h"><a id="L1149">1149</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($id) { }</td></tr>
<tr><td class="h"><a id="L1157">1157</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1165">1165</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1173">1173</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($id) { }</td></tr>
<tr><td class="h"><a id="L1181">1181</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if grep {/[&quot;&#39;&lt;&gt;\n&amp;]/;} @_</td></tr>
<tr><td class="h"><a id="L1184">1184</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$_[0] eq &#39;profile&#39; ? :</td></tr>
<tr><td class="h"><a id="L1188">1188</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1196">1196</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($user) { }</td></tr>
<tr><td class="h"><a id="L1204">1204</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$modes{$mode} ? :</td></tr>
<tr><td class="h"><a id="L1215">1215</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $$ref =~ /[&lt;&gt;]/</td></tr>
<tr><td class="h"><a id="L1233">1233</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless $$ref =~ /[&lt;&gt;]/</td></tr>
<tr><td class="h"><a id="L1279">1279</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless (ref $opts eq &#39;HASH&#39;)</td></tr>
<tr><td class="h"><a id="L1283">1283</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">defined $$opts{&#39;wordlength&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1286">1286</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if (not $$ref =~ /&lt;|&gt;|http/ and not $$opts{&#39;preformatted&#39;} and not $$opts{&#39;suspend_msg&#39;})</td></tr>
<tr><td class="h"><a id="L1287">1287</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $wordlength</td></tr>
<tr><td class="h"><a id="L1293">1293</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;preformatted&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;extractimages&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;noexpandembedded&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;textonly&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_colors&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_sizes&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">$$opts{&#39;remove_fonts&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;transform_embed_nocheck&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;suspend_msg&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">$$opts{&#39;to_external_site&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1339">1339</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless (ref $opts)</td></tr>
<tr><td class="h"><a id="L1344">1344</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if (not $$ref =~ /&lt;|&gt;|http/ and not $$opts{&#39;preformatted&#39;})</td></tr>
<tr><td class="h"><a id="L1351">1351</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$$opts{&#39;preformatted&#39;} ? :</td></tr>
<tr><td class="h"></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">$$opts{&#39;textonly&#39;} ? :</td></tr>
<tr><td class="h"><a id="L1373">1373</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless ref $ref</td></tr>
<tr><td class="h"><a id="L1397">1397</a></td><td class="c3">100</td><td class="c3">T</td><td class="c3">F</td><td class="s">unless $url</td></tr>
<tr><td class="h"><a id="L1399">1399</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">unless ($allow_all)</td></tr>
<tr><td class="h"><a id="L1402">1402</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if $url =~ /^(https?|ftp|webcal):/</td></tr>
<tr><td class="h"><a id="L1407">1407</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $url</td></tr>
<tr><td class="h"><a id="L1413">1413</a></td><td class="c0">50</td><td class="c0">T</td><td class="c3">F</td><td class="s">if ($LJ::DEBUG{&#39;aol_http_to_ftp&#39;})</td></tr>
<tr><td class="h"><a id="L1415">1415</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">if ($url =~ m[^http://(?:www\.)?(?:members|hometown|users)\.aol\.com/])</td></tr>
<tr><td class="h"><a id="L1425">1425</a></td><td class="c0">0</td><td class="c0">T</td><td class="c0">F</td><td class="s">unless $at</td></tr>
</table>
</body>
</html>
